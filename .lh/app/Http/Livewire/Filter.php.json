{
    "sourceFile": "app/Http/Livewire/Filter.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 72,
            "patches": [
                {
                    "date": 1696869884204,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1696869913919,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,9 @@\n \n namespace App\\Http\\Livewire;\n \n use App\\Models\\PlaceDetails;\n+use App\\Models\\User;\n use Livewire\\Component;\n \n class Filter extends Component\n {\n@@ -41,10 +42,11 @@\n     }\n \n     public function render()\n     {\n-        $places = PlaceDetails::all();\n-        $placeDetails = User::with('placeDetails')->find($userid)->placeDetails()->orderBy('id', 'desc')->paginate(10);\n+       \n+        $userid = backpack_auth()->user()->id;\n+        $places = User::with('placeDetails')->find($userid)->placeDetails()->orderBy('id', 'desc');\n \n \n         return view('livewire.filter', compact('places'));\n     }\n"
                },
                {
                    "date": 1696869938310,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,55 @@\n+<?php\n+\n+namespace App\\Http\\Livewire;\n+\n+use App\\Models\\PlaceDetails;\n+use App\\Models\\User;\n+use Livewire\\Component;\n+\n+class Filter extends Component\n+{\n+    // public $places;\n+\n+    public $selected_places = [];\n+\n+    public function select_place($id)\n+    {\n+        array_push($this->selected_places, $id);\n+    }\n+\n+    public function updateMap()\n+    {\n+\n+        foreach ($this->selected_places as $value) {\n+\n+            $data =  PlaceDetails::where('id', $value)->first();\n+\n+            // dd($data);\n+\n+            if ($data->is_home == 1) {\n+                PlaceDetails::where('id', $value)->update([\n+                    'is_home' => 0\n+                ]);\n+            }\n+            if ($data->is_home == 0) {\n+                PlaceDetails::where('id', $value)->update([\n+                    'is_home' => 1\n+                ]);\n+            }\n+        }\n+\n+        $this->emit('success', 'Map updated successfully');\n+    }\n+\n+    public function render()\n+    {\n+       \n+        $userid = backpack_auth()->user()->id;\n+        $places = User::with('placeDetails')->find($userid)->placeDetails()->orderBy('id', 'desc');\n+\n+        var_dump($places);\n+        die();\n+\n+        return view('livewire.filter', compact('places'));\n+    }\n+}\n"
                },
                {
                    "date": 1696869946596,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,62 +47,9 @@\n         $userid = backpack_auth()->user()->id;\n         $places = User::with('placeDetails')->find($userid)->placeDetails()->orderBy('id', 'desc');\n \n         var_dump($places);\n-        die();\n+        \n \n         return view('livewire.filter', compact('places'));\n     }\n }\n-<?php\n-\n-namespace App\\Http\\Livewire;\n-\n-use App\\Models\\PlaceDetails;\n-use App\\Models\\User;\n-use Livewire\\Component;\n-\n-class Filter extends Component\n-{\n-    // public $places;\n-\n-    public $selected_places = [];\n-\n-    public function select_place($id)\n-    {\n-        array_push($this->selected_places, $id);\n-    }\n-\n-    public function updateMap()\n-    {\n-\n-        foreach ($this->selected_places as $value) {\n-\n-            $data =  PlaceDetails::where('id', $value)->first();\n-\n-            // dd($data);\n-\n-            if ($data->is_home == 1) {\n-                PlaceDetails::where('id', $value)->update([\n-                    'is_home' => 0\n-                ]);\n-            }\n-            if ($data->is_home == 0) {\n-                PlaceDetails::where('id', $value)->update([\n-                    'is_home' => 1\n-                ]);\n-            }\n-        }\n-\n-        $this->emit('success', 'Map updated successfully');\n-    }\n-\n-    public function render()\n-    {\n-       \n-        $userid = backpack_auth()->user()->id;\n-        $places = User::with('placeDetails')->find($userid)->placeDetails()->orderBy('id', 'desc');\n-\n-\n-        return view('livewire.filter', compact('places'));\n-    }\n-}\n"
                },
                {
                    "date": 1696869957280,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -46,9 +46,8 @@\n        \n         $userid = backpack_auth()->user()->id;\n         $places = User::with('placeDetails')->find($userid)->placeDetails()->orderBy('id', 'desc');\n \n-        var_dump($places);\n         \n \n         return view('livewire.filter', compact('places'));\n     }\n"
                },
                {
                    "date": 1696870008703,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,8 @@\n \n namespace App\\Http\\Livewire;\n \n use App\\Models\\PlaceDetails;\n-use App\\Models\\User;\n use Livewire\\Component;\n \n class Filter extends Component\n {\n@@ -42,13 +41,10 @@\n     }\n \n     public function render()\n     {\n+        $places = PlaceDetails::all();\n        \n-        $userid = backpack_auth()->user()->id;\n-        $places = User::with('placeDetails')->find($userid)->placeDetails()->orderBy('id', 'desc');\n \n-        \n-\n         return view('livewire.filter', compact('places'));\n     }\n }\n"
                },
                {
                    "date": 1696870026485,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,9 +42,12 @@\n \n     public function render()\n     {\n         $places = PlaceDetails::all();\n-       \n+         \n+        $userid = backpack_auth()->user()->id;\n+        $places = User::with('placeDetails')->find($userid)->placeDetails()->orderBy('id', 'desc');\n \n+\n         return view('livewire.filter', compact('places'));\n     }\n }\n"
                },
                {
                    "date": 1696870043344,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,11 +43,13 @@\n     public function render()\n     {\n         $places = PlaceDetails::all();\n          \n-        $userid = backpack_auth()->user()->id;\n-        $places = User::with('placeDetails')->find($userid)->placeDetails()->orderBy('id', 'desc');\n+        // $userid = backpack_auth()->user()->id;\n+        // $places = User::with('placeDetails')->find($userid)->placeDetails()->orderBy('id', 'desc');\n \n \n+        dd($places);\n+\n         return view('livewire.filter', compact('places'));\n     }\n }\n"
                },
                {
                    "date": 1696870062603,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,13 +43,13 @@\n     public function render()\n     {\n         $places = PlaceDetails::all();\n          \n-        // $userid = backpack_auth()->user()->id;\n+        $userid = backpack_auth()->user()->id;\n         // $places = User::with('placeDetails')->find($userid)->placeDetails()->orderBy('id', 'desc');\n \n \n-        dd($places);\n+        dd($userid);\n \n         return view('livewire.filter', compact('places'));\n     }\n }\n"
                },
                {
                    "date": 1696870069170,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,9 @@\n \n namespace App\\Http\\Livewire;\n \n use App\\Models\\PlaceDetails;\n+use App\\Models\\User;\n use Livewire\\Component;\n \n class Filter extends Component\n {\n@@ -44,9 +45,9 @@\n     {\n         $places = PlaceDetails::all();\n          \n         $userid = backpack_auth()->user()->id;\n-        // $places = User::with('placeDetails')->find($userid)->placeDetails()->orderBy('id', 'desc');\n+        $places = User::with('placeDetails')->find($userid)->placeDetails()->orderBy('id', 'desc');\n \n \n         dd($userid);\n \n"
                },
                {
                    "date": 1696870078886,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,9 +45,9 @@\n     {\n         $places = PlaceDetails::all();\n          \n         $userid = backpack_auth()->user()->id;\n-        $places = User::with('placeDetails')->find($userid)->placeDetails()->orderBy('id', 'desc');\n+        $places = User::with('placeDetails')->find($userid)->placeDetails();\n \n \n         dd($userid);\n \n"
                },
                {
                    "date": 1696870085074,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -48,9 +48,9 @@\n         $userid = backpack_auth()->user()->id;\n         $places = User::with('placeDetails')->find($userid)->placeDetails();\n \n \n-        dd($userid);\n+        dd($places);\n \n         return view('livewire.filter', compact('places'));\n     }\n }\n"
                },
                {
                    "date": 1696870091666,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -48,9 +48,9 @@\n         $userid = backpack_auth()->user()->id;\n         $places = User::with('placeDetails')->find($userid)->placeDetails();\n \n \n-        dd($places);\n+  \n \n         return view('livewire.filter', compact('places'));\n     }\n }\n"
                },
                {
                    "date": 1696870115031,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -48,9 +48,9 @@\n         $userid = backpack_auth()->user()->id;\n         $places = User::with('placeDetails')->find($userid)->placeDetails();\n \n \n-  \n+        dd($places);\n \n         return view('livewire.filter', compact('places'));\n     }\n }\n"
                },
                {
                    "date": 1696870151593,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,12 +42,13 @@\n     }\n \n     public function render()\n     {\n-        $places = PlaceDetails::all();\n+        $userid = backpack_auth()->user()->id;\n+        $places = PlaceDetails::find($userid);\n          \n-        $userid = backpack_auth()->user()->id;\n-        $places = User::with('placeDetails')->find($userid)->placeDetails();\n+       \n+        // $places = User::with('placeDetails')->find($userid)->placeDetails();\n \n \n         dd($places);\n \n"
                },
                {
                    "date": 1696870157080,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,13 +45,9 @@\n     {\n         $userid = backpack_auth()->user()->id;\n         $places = PlaceDetails::find($userid);\n          \n-       \n-        // $places = User::with('placeDetails')->find($userid)->placeDetails();\n+      \n \n-\n-        dd($places);\n-\n         return view('livewire.filter', compact('places'));\n     }\n }\n"
                },
                {
                    "date": 1696870170294,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,9 +45,13 @@\n     {\n         $userid = backpack_auth()->user()->id;\n         $places = PlaceDetails::find($userid);\n          \n-      \n+       \n+        // $places = User::with('placeDetails')->find($userid)->placeDetails();\n \n+\n+        dd($places);\n+\n         return view('livewire.filter', compact('places'));\n     }\n }\n"
                },
                {
                    "date": 1696870195037,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,9 +43,9 @@\n \n     public function render()\n     {\n         $userid = backpack_auth()->user()->id;\n-        $places = PlaceDetails::find($userid);\n+        $places = PlaceDetails::find($userid)->get();\n          \n        \n         // $places = User::with('placeDetails')->find($userid)->placeDetails();\n \n"
                },
                {
                    "date": 1696870203132,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -49,9 +49,9 @@\n        \n         // $places = User::with('placeDetails')->find($userid)->placeDetails();\n \n \n-        dd($places);\n+        // dd($places);\n \n         return view('livewire.filter', compact('places'));\n     }\n }\n"
                },
                {
                    "date": 1696870382930,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,8 +45,13 @@\n     {\n         $userid = backpack_auth()->user()->id;\n         $places = PlaceDetails::find($userid)->get();\n          \n+        $places = PlaceDetails::whereNotNull('place_id')\n+        ->orWhereNotNull('observation_id')\n+        ->with(['place', 'observation'])\n+        ->groupBy('place_id', 'observation_id')\n+        ->get();\n        \n         // $places = User::with('placeDetails')->find($userid)->placeDetails();\n \n \n"
                },
                {
                    "date": 1696870433851,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,13 +45,16 @@\n     {\n         $userid = backpack_auth()->user()->id;\n         $places = PlaceDetails::find($userid)->get();\n          \n-        $places = PlaceDetails::whereNotNull('place_id')\n-        ->orWhereNotNull('observation_id')\n-        ->with(['place', 'observation'])\n-        ->groupBy('place_id', 'observation_id')\n-        ->get();\n+        $places = PlaceDetails::where('user_id', $userid)\n+            ->where(function ($query) {\n+                $query->whereNotNull('place_id')\n+                    ->orWhereNotNull('observation_id');\n+            })\n+            ->with(['place', 'observation'])\n+            ->groupBy('place_id', 'observation_id')\n+            ->get();\n        \n         // $places = User::with('placeDetails')->find($userid)->placeDetails();\n \n \n"
                },
                {
                    "date": 1696870479983,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,13 +45,14 @@\n     {\n         $userid = backpack_auth()->user()->id;\n         $places = PlaceDetails::find($userid)->get();\n          \n-        $places = PlaceDetails::where('user_id', $userid)\n+        $uniquePlaceDetails = PlaceDetails::where('user_id', $userid)\n             ->where(function ($query) {\n                 $query->whereNotNull('place_id')\n                     ->orWhereNotNull('observation_id');\n             })\n+            ->select('place_id', 'observation_id')\n             ->with(['place', 'observation'])\n             ->groupBy('place_id', 'observation_id')\n             ->get();\n        \n"
                },
                {
                    "date": 1696870502854,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,66 @@\n+<?php\n+\n+namespace App\\Http\\Livewire;\n+\n+use App\\Models\\PlaceDetails;\n+use App\\Models\\User;\n+use Livewire\\Component;\n+\n+class Filter extends Component\n+{\n+    // public $places;\n+\n+    public $selected_places = [];\n+\n+    public function select_place($id)\n+    {\n+        array_push($this->selected_places, $id);\n+    }\n+\n+    public function updateMap()\n+    {\n+\n+        foreach ($this->selected_places as $value) {\n+\n+            $data =  PlaceDetails::where('id', $value)->first();\n+\n+            // dd($data);\n+\n+            if ($data->is_home == 1) {\n+                PlaceDetails::where('id', $value)->update([\n+                    'is_home' => 0\n+                ]);\n+            }\n+            if ($data->is_home == 0) {\n+                PlaceDetails::where('id', $value)->update([\n+                    'is_home' => 1\n+                ]);\n+            }\n+        }\n+\n+        $this->emit('success', 'Map updated successfully');\n+    }\n+\n+    public function render()\n+    {\n+        $userid = backpack_auth()->user()->id;\n+        $places = PlaceDetails::find($userid)->get();\n+         \n+        $places = PlaceDetails::where('user_id', $userid)\n+            ->where(function ($query) {\n+                $query->whereNotNull('place_id')\n+                    ->orWhereNotNull('observation_id');\n+            })\n+            ->select('place_id', 'observation_id')\n+            ->with(['place', 'observation'])\n+            ->groupBy('place_id', 'observation_id')\n+            ->get();\n+       \n+        // $places = User::with('placeDetails')->find($userid)->placeDetails();\n+\n+\n+        // dd($places);\n+\n+        return view('livewire.filter', compact('places'));\n+    }\n+}\n"
                },
                {
                    "date": 1696870537792,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,9 +43,9 @@\n \n     public function render()\n     {\n         $userid = backpack_auth()->user()->id;\n-        $places = PlaceDetails::find($userid)->get();\n+        // $places = PlaceDetails::find($userid)->get();\n          \n         $places = PlaceDetails::where('user_id', $userid)\n             ->where(function ($query) {\n                 $query->whereNotNull('place_id')\n@@ -53,8 +53,9 @@\n             })\n             ->select('place_id', 'observation_id')\n             ->with(['place', 'observation'])\n             ->groupBy('place_id', 'observation_id')\n+            ->orderBy('id', 'desc')\n             ->get();\n        \n         // $places = User::with('placeDetails')->find($userid)->placeDetails();\n \n@@ -63,70 +64,4 @@\n \n         return view('livewire.filter', compact('places'));\n     }\n }\n-<?php\n-\n-namespace App\\Http\\Livewire;\n-\n-use App\\Models\\PlaceDetails;\n-use App\\Models\\User;\n-use Livewire\\Component;\n-\n-class Filter extends Component\n-{\n-    // public $places;\n-\n-    public $selected_places = [];\n-\n-    public function select_place($id)\n-    {\n-        array_push($this->selected_places, $id);\n-    }\n-\n-    public function updateMap()\n-    {\n-\n-        foreach ($this->selected_places as $value) {\n-\n-            $data =  PlaceDetails::where('id', $value)->first();\n-\n-            // dd($data);\n-\n-            if ($data->is_home == 1) {\n-                PlaceDetails::where('id', $value)->update([\n-                    'is_home' => 0\n-                ]);\n-            }\n-            if ($data->is_home == 0) {\n-                PlaceDetails::where('id', $value)->update([\n-                    'is_home' => 1\n-                ]);\n-            }\n-        }\n-\n-        $this->emit('success', 'Map updated successfully');\n-    }\n-\n-    public function render()\n-    {\n-        $userid = backpack_auth()->user()->id;\n-        $places = PlaceDetails::find($userid)->get();\n-         \n-        $uniquePlaceDetails = PlaceDetails::where('user_id', $userid)\n-            ->where(function ($query) {\n-                $query->whereNotNull('place_id')\n-                    ->orWhereNotNull('observation_id');\n-            })\n-            ->select('place_id', 'observation_id')\n-            ->with(['place', 'observation'])\n-            ->groupBy('place_id', 'observation_id')\n-            ->get();\n-       \n-        // $places = User::with('placeDetails')->find($userid)->placeDetails();\n-\n-\n-        // dd($places);\n-\n-        return view('livewire.filter', compact('places'));\n-    }\n-}\n"
                },
                {
                    "date": 1696870550840,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,9 @@\n             })\n             ->select('place_id', 'observation_id')\n             ->with(['place', 'observation'])\n             ->groupBy('place_id', 'observation_id')\n-            ->orderBy('id', 'desc')\n+            \n             ->get();\n        \n         // $places = User::with('placeDetails')->find($userid)->placeDetails();\n \n"
                },
                {
                    "date": 1696870556712,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,9 @@\n             })\n             ->select('place_id', 'observation_id')\n             ->with(['place', 'observation'])\n             ->groupBy('place_id', 'observation_id')\n-            \n+            ->orderBy('id', 'desc')\n             ->get();\n        \n         // $places = User::with('placeDetails')->find($userid)->placeDetails();\n \n"
                },
                {
                    "date": 1696870628283,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,18 +45,17 @@\n     {\n         $userid = backpack_auth()->user()->id;\n         // $places = PlaceDetails::find($userid)->get();\n          \n-        $places = PlaceDetails::where('user_id', $userid)\n-            ->where(function ($query) {\n-                $query->whereNotNull('place_id')\n-                    ->orWhereNotNull('observation_id');\n-            })\n-            ->select('place_id', 'observation_id')\n-            ->with(['place', 'observation'])\n-            ->groupBy('place_id', 'observation_id')\n-            ->orderBy('id', 'desc')\n-            ->get();\n+        $places = PlaceDetails::where('user_id', 1)\n+    ->where(function ($query) {\n+        $query->whereNotNull('place_id')\n+            ->orWhereNotNull('observation_id');\n+    })\n+    ->select('place_id', 'observation_id')\n+    ->distinct()\n+    ->with(['place', 'observation'])\n+    ->get();\n        \n         // $places = User::with('placeDetails')->find($userid)->placeDetails();\n \n \n"
                },
                {
                    "date": 1696870664047,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,17 +45,15 @@\n     {\n         $userid = backpack_auth()->user()->id;\n         // $places = PlaceDetails::find($userid)->get();\n          \n-        $places = PlaceDetails::where('user_id', 1)\n-    ->where(function ($query) {\n-        $query->whereNotNull('place_id')\n-            ->orWhereNotNull('observation_id');\n-    })\n-    ->select('place_id', 'observation_id')\n-    ->distinct()\n-    ->with(['place', 'observation'])\n-    ->get();\n+        $places = PlaceDetails::where('user_id', $userid)\n+           \n+            ->select('place_id', 'observation_id')\n+            ->with(['place', 'observation'])\n+            ->groupBy('place_id', 'observation_id')\n+            ->orderBy('id', 'desc')\n+            ->get();\n        \n         // $places = User::with('placeDetails')->find($userid)->placeDetails();\n \n \n"
                },
                {
                    "date": 1696870675555,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -48,9 +48,9 @@\n          \n         $places = PlaceDetails::where('user_id', $userid)\n            \n             ->select('place_id', 'observation_id')\n-            ->with(['place', 'observation'])\n+       \n             ->groupBy('place_id', 'observation_id')\n             ->orderBy('id', 'desc')\n             ->get();\n        \n"
                },
                {
                    "date": 1696870682516,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -49,9 +49,9 @@\n         $places = PlaceDetails::where('user_id', $userid)\n            \n             ->select('place_id', 'observation_id')\n        \n-            ->groupBy('place_id', 'observation_id')\n+            // ->groupBy('place_id', 'observation_id')\n             ->orderBy('id', 'desc')\n             ->get();\n        \n         // $places = User::with('placeDetails')->find($userid)->placeDetails();\n"
                },
                {
                    "date": 1696870692096,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -49,16 +49,16 @@\n         $places = PlaceDetails::where('user_id', $userid)\n            \n             ->select('place_id', 'observation_id')\n        \n-            // ->groupBy('place_id', 'observation_id')\n+            ->groupBy('place_id', 'observation_id')\n             ->orderBy('id', 'desc')\n             ->get();\n        \n         // $places = User::with('placeDetails')->find($userid)->placeDetails();\n \n \n-        // dd($places);\n+        dd($places);\n \n         return view('livewire.filter', compact('places'));\n     }\n }\n"
                },
                {
                    "date": 1696870732644,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,10 +52,8 @@\n        \n             ->groupBy('place_id', 'observation_id')\n             ->orderBy('id', 'desc')\n             ->get();\n-       \n-        // $places = User::with('placeDetails')->find($userid)->placeDetails();\n \n \n         dd($places);\n \n"
                },
                {
                    "date": 1696870759776,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,18 +45,15 @@\n     {\n         $userid = backpack_auth()->user()->id;\n         // $places = PlaceDetails::find($userid)->get();\n          \n-        $places = PlaceDetails::where('user_id', $userid)\n-           \n-            ->select('place_id', 'observation_id')\n-       \n-            ->groupBy('place_id', 'observation_id')\n-            ->orderBy('id', 'desc')\n-            ->get();\n+        $places = PlaceDetail::where('user_id', $userid)\n+    ->select('place_id', 'observation_id')\n+    ->distinct()\n+    ->orderBy('id', 'desc')\n+    ->get();\n \n+dd($places);\n \n-        dd($places);\n-\n         return view('livewire.filter', compact('places'));\n     }\n }\n"
                },
                {
                    "date": 1696870771874,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,15 +45,15 @@\n     {\n         $userid = backpack_auth()->user()->id;\n         // $places = PlaceDetails::find($userid)->get();\n          \n-        $places = PlaceDetail::where('user_id', $userid)\n+        $places = PlaceDetails::where('user_id', $userid)\n     ->select('place_id', 'observation_id')\n     ->distinct()\n     ->orderBy('id', 'desc')\n     ->get();\n \n-dd($places);\n \n+\n         return view('livewire.filter', compact('places'));\n     }\n }\n"
                },
                {
                    "date": 1696870793288,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,9 +51,12 @@\n     ->distinct()\n     ->orderBy('id', 'desc')\n     ->get();\n \n+    \n \n+    die();\n \n+\n         return view('livewire.filter', compact('places'));\n     }\n }\n"
                },
                {
                    "date": 1696870817723,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,8 +51,12 @@\n     ->distinct()\n     ->orderBy('id', 'desc')\n     ->get();\n \n+    foreach($places as $p){\n+        var_dump($p);\n+        echo '<br>';\n+    }\n     \n \n     die();\n \n"
                },
                {
                    "date": 1696870827658,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -54,8 +54,10 @@\n \n     foreach($places as $p){\n         var_dump($p);\n         echo '<br>';\n+        echo '<br>';\n+        echo '<br>';\n     }\n     \n \n     die();\n"
                },
                {
                    "date": 1696870856608,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,9 +52,9 @@\n     ->orderBy('id', 'desc')\n     ->get();\n \n     foreach($places as $p){\n-        var_dump($p);\n+        var_dump($p->place_id);\n         echo '<br>';\n         echo '<br>';\n         echo '<br>';\n     }\n"
                },
                {
                    "date": 1696870937976,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,9 +43,9 @@\n \n     public function render()\n     {\n         $userid = backpack_auth()->user()->id;\n-        // $places = PlaceDetails::find($userid)->get();\n+        $places = PlaceDetails::find($userid)->get();\n          \n         $places = PlaceDetails::where('user_id', $userid)\n     ->select('place_id', 'observation_id')\n     ->distinct()\n"
                },
                {
                    "date": 1696870972148,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,15 +43,15 @@\n \n     public function render()\n     {\n         $userid = backpack_auth()->user()->id;\n-        $places = PlaceDetails::find($userid)->get();\n+        $places = User::places()->find($userid)->get();\n          \n-        $places = PlaceDetails::where('user_id', $userid)\n-    ->select('place_id', 'observation_id')\n-    ->distinct()\n-    ->orderBy('id', 'desc')\n-    ->get();\n+    //     $places = PlaceDetails::where('user_id', $userid)\n+    // ->select('place_id', 'observation_id')\n+    // ->distinct()\n+    // ->orderBy('id', 'desc')\n+    // ->get();\n \n     foreach($places as $p){\n         var_dump($p->place_id);\n         echo '<br>';\n"
                },
                {
                    "date": 1696870984183,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,9 +43,9 @@\n \n     public function render()\n     {\n         $userid = backpack_auth()->user()->id;\n-        $places = User::places()->find($userid)->get();\n+        $places = places::find($userid)->get();\n          \n     //     $places = PlaceDetails::where('user_id', $userid)\n     // ->select('place_id', 'observation_id')\n     // ->distinct()\n"
                },
                {
                    "date": 1696871006710,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,9 +43,10 @@\n \n     public function render()\n     {\n         $userid = backpack_auth()->user()->id;\n-        $places = places::find($userid)->get();\n+\n+        $places = User::with('placeDetails');\n          \n     //     $places = PlaceDetails::where('user_id', $userid)\n     // ->select('place_id', 'observation_id')\n     // ->distinct()\n"
                },
                {
                    "date": 1696871018183,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,9 +44,9 @@\n     public function render()\n     {\n         $userid = backpack_auth()->user()->id;\n \n-        $places = User::with('placeDetails');\n+        $places = User::with('placeDetails')->get();\n          \n     //     $places = PlaceDetails::where('user_id', $userid)\n     // ->select('place_id', 'observation_id')\n     // ->distinct()\n"
                },
                {
                    "date": 1696871038868,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,9 +44,9 @@\n     public function render()\n     {\n         $userid = backpack_auth()->user()->id;\n \n-        $places = User::with('placeDetails')->get();\n+        $places = User::with('placeDetails')->find($userid)->placeDetails()->orderBy('id', 'desc');\n          \n     //     $places = PlaceDetails::where('user_id', $userid)\n     // ->select('place_id', 'observation_id')\n     // ->distinct()\n"
                },
                {
                    "date": 1696871062952,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,71 @@\n+<?php\n+\n+namespace App\\Http\\Livewire;\n+\n+use App\\Models\\PlaceDetails;\n+use App\\Models\\User;\n+use Livewire\\Component;\n+\n+class Filter extends Component\n+{\n+    // public $places;\n+\n+    public $selected_places = [];\n+\n+    public function select_place($id)\n+    {\n+        array_push($this->selected_places, $id);\n+    }\n+\n+    public function updateMap()\n+    {\n+\n+        foreach ($this->selected_places as $value) {\n+\n+            $data =  PlaceDetails::where('id', $value)->first();\n+\n+            // dd($data);\n+\n+            if ($data->is_home == 1) {\n+                PlaceDetails::where('id', $value)->update([\n+                    'is_home' => 0\n+                ]);\n+            }\n+            if ($data->is_home == 0) {\n+                PlaceDetails::where('id', $value)->update([\n+                    'is_home' => 1\n+                ]);\n+            }\n+        }\n+\n+        $this->emit('success', 'Map updated successfully');\n+    }\n+\n+    public function render()\n+    {\n+        $userid = backpack_auth()->user()->id;\n+\n+        $places = User::with('placeDetails')->find($userid)->placeDetails()->orderBy('id', 'desc');\n+         \n+    //     $places = PlaceDetails::where('user_id', $userid)\n+    // ->select('place_id', 'observation_id')\n+    // ->distinct()\n+    // ->orderBy('id', 'desc')\n+    // ->get();\n+\n+    dd($places);\n+\n+    foreach($places as $p){\n+        var_dump($p->place_id);\n+        echo '<br>';\n+        echo '<br>';\n+        echo '<br>';\n+    }\n+    \n+\n+    die();\n+\n+\n+        return view('livewire.filter', compact('places'));\n+    }\n+}\n"
                },
                {
                    "date": 1696871084822,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,9 +44,9 @@\n     public function render()\n     {\n         $userid = backpack_auth()->user()->id;\n \n-        $places = User::with('placeDetails')->find($userid)->placeDetails()->orderBy('id', 'desc');\n+        $places = User::with('placeDetails')->find($userid)->placeDetails()->orderBy('id', 'desc')->get();\n          \n     //     $places = PlaceDetails::where('user_id', $userid)\n     // ->select('place_id', 'observation_id')\n     // ->distinct()\n@@ -68,73 +68,4 @@\n \n         return view('livewire.filter', compact('places'));\n     }\n }\n-<?php\n-\n-namespace App\\Http\\Livewire;\n-\n-use App\\Models\\PlaceDetails;\n-use App\\Models\\User;\n-use Livewire\\Component;\n-\n-class Filter extends Component\n-{\n-    // public $places;\n-\n-    public $selected_places = [];\n-\n-    public function select_place($id)\n-    {\n-        array_push($this->selected_places, $id);\n-    }\n-\n-    public function updateMap()\n-    {\n-\n-        foreach ($this->selected_places as $value) {\n-\n-            $data =  PlaceDetails::where('id', $value)->first();\n-\n-            // dd($data);\n-\n-            if ($data->is_home == 1) {\n-                PlaceDetails::where('id', $value)->update([\n-                    'is_home' => 0\n-                ]);\n-            }\n-            if ($data->is_home == 0) {\n-                PlaceDetails::where('id', $value)->update([\n-                    'is_home' => 1\n-                ]);\n-            }\n-        }\n-\n-        $this->emit('success', 'Map updated successfully');\n-    }\n-\n-    public function render()\n-    {\n-        $userid = backpack_auth()->user()->id;\n-\n-        $places = User::with('placeDetails')->find($userid)->placeDetails()->orderBy('id', 'desc');\n-         \n-    //     $places = PlaceDetails::where('user_id', $userid)\n-    // ->select('place_id', 'observation_id')\n-    // ->distinct()\n-    // ->orderBy('id', 'desc')\n-    // ->get();\n-\n-    foreach($places as $p){\n-        var_dump($p->place_id);\n-        echo '<br>';\n-        echo '<br>';\n-        echo '<br>';\n-    }\n-    \n-\n-    die();\n-\n-\n-        return view('livewire.filter', compact('places'));\n-    }\n-}\n"
                },
                {
                    "date": 1696871091377,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,9 +52,9 @@\n     // ->distinct()\n     // ->orderBy('id', 'desc')\n     // ->get();\n \n-    dd($places);\n+    // dd($places);\n \n     foreach($places as $p){\n         var_dump($p->place_id);\n         echo '<br>';\n"
                },
                {
                    "date": 1696871101798,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,9 +44,9 @@\n     public function render()\n     {\n         $userid = backpack_auth()->user()->id;\n \n-        $places = User::with('placeDetails')->find($userid)->placeDetails()->orderBy('id', 'desc')->get();\n+        $places = User::with('placeDetails')->find($userid)->placeDetails()->distinct()->orderBy('id', 'desc')->get();\n          \n     //     $places = PlaceDetails::where('user_id', $userid)\n     // ->select('place_id', 'observation_id')\n     // ->distinct()\n"
                },
                {
                    "date": 1696871110352,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,9 +44,9 @@\n     public function render()\n     {\n         $userid = backpack_auth()->user()->id;\n \n-        $places = User::with('placeDetails')->find($userid)->placeDetails()->distinct()->orderBy('id', 'desc')->get();\n+        $places = User::with('places')->find($userid)->placeDetails()->distinct()->orderBy('id', 'desc')->get();\n          \n     //     $places = PlaceDetails::where('user_id', $userid)\n     // ->select('place_id', 'observation_id')\n     // ->distinct()\n"
                },
                {
                    "date": 1696871148320,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,9 +44,9 @@\n     public function render()\n     {\n         $userid = backpack_auth()->user()->id;\n \n-        $places = User::with('places')->find($userid)->placeDetails()->distinct()->orderBy('id', 'desc')->get();\n+        $places = User::with('observations')->find($userid)->placeDetails()->distinct()->orderBy('id', 'desc')->get();\n          \n     //     $places = PlaceDetails::where('user_id', $userid)\n     // ->select('place_id', 'observation_id')\n     // ->distinct()\n"
                },
                {
                    "date": 1696873097321,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,9 +44,9 @@\n     public function render()\n     {\n         $userid = backpack_auth()->user()->id;\n \n-        $places = User::with('observations')->find($userid)->placeDetails()->distinct()->orderBy('id', 'desc')->get();\n+        $places = PlaceDetails::where('user_id', $userid)->where()\n          \n     //     $places = PlaceDetails::where('user_id', $userid)\n     // ->select('place_id', 'observation_id')\n     // ->distinct()\n"
                },
                {
                    "date": 1696873144659,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,18 +44,23 @@\n     public function render()\n     {\n         $userid = backpack_auth()->user()->id;\n \n-        $places = PlaceDetails::where('user_id', $userid)->where()\n+        // $places = PlaceDetails::where('user_id', $userid)->where()\n          \n     //     $places = PlaceDetails::where('user_id', $userid)\n     // ->select('place_id', 'observation_id')\n     // ->distinct()\n     // ->orderBy('id', 'desc')\n     // ->get();\n \n-    // dd($places);\n+    $placeIds = PlaceDetails::whereNotNull('place_id')\n+    ->pluck('place_id');\n \n+dd($placeIds);\n+\n+\n+\n     foreach($places as $p){\n         var_dump($p->place_id);\n         echo '<br>';\n         echo '<br>';\n"
                },
                {
                    "date": 1696873158065,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,9 +52,9 @@\n     // ->distinct()\n     // ->orderBy('id', 'desc')\n     // ->get();\n \n-    $placeIds = PlaceDetails::whereNotNull('place_id')\n+    $placeIds = PlaceDetails::whereNotNull('place_id')->distinct()\n     ->pluck('place_id');\n \n dd($placeIds);\n \n"
                },
                {
                    "date": 1696873199853,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,9 +52,9 @@\n     // ->distinct()\n     // ->orderBy('id', 'desc')\n     // ->get();\n \n-    $placeIds = PlaceDetails::whereNotNull('place_id')->distinct()\n+    $placeIds = PlaceDetails::where('user_id', $userid)->whereNotNull('place_id')->distinct()\n     ->pluck('place_id');\n \n dd($placeIds);\n \n"
                },
                {
                    "date": 1696873229422,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,12 +52,13 @@\n     // ->distinct()\n     // ->orderBy('id', 'desc')\n     // ->get();\n \n-    $placeIds = PlaceDetails::where('user_id', $userid)->whereNotNull('place_id')->distinct()\n-    ->pluck('place_id');\n+    $placeIds = PlaceDetails::where('user_id', $userid)->whereNotNull('place_id')->distinct();\n+    $observation_ids = PlaceDetails::where('user_id', $userid)->whereNotNull('observation_id')->distinct();\n+    \n \n-dd($placeIds);\n+dd($observation_ids);\n \n \n \n     foreach($places as $p){\n"
                },
                {
                    "date": 1696873249007,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,9 @@\n     // ->orderBy('id', 'desc')\n     // ->get();\n \n     $placeIds = PlaceDetails::where('user_id', $userid)->whereNotNull('place_id')->distinct();\n-    $observation_ids = PlaceDetails::where('user_id', $userid)->whereNotNull('observation_id')->distinct();\n+    $observation_ids = PlaceDetails::where('user_id', $userid)->whereNotNull('observation_id')->distinct()->get();\n     \n \n dd($observation_ids);\n \n"
                },
                {
                    "date": 1696873269331,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,9 @@\n     // ->orderBy('id', 'desc')\n     // ->get();\n \n     $placeIds = PlaceDetails::where('user_id', $userid)->whereNotNull('place_id')->distinct();\n-    $observation_ids = PlaceDetails::where('user_id', $userid)->whereNotNull('observation_id')->distinct()->get();\n+    $observation_ids = PlaceDetails::where('user_id', $userid)->whereNotNull('observation_id')->distinct()->pluck('observation_id');\n     \n \n dd($observation_ids);\n \n"
                },
                {
                    "date": 1696873302319,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,77 @@\n+<?php\n+\n+namespace App\\Http\\Livewire;\n+\n+use App\\Models\\PlaceDetails;\n+use App\\Models\\User;\n+use Livewire\\Component;\n+\n+class Filter extends Component\n+{\n+    // public $places;\n+\n+    public $selected_places = [];\n+\n+    public function select_place($id)\n+    {\n+        array_push($this->selected_places, $id);\n+    }\n+\n+    public function updateMap()\n+    {\n+\n+        foreach ($this->selected_places as $value) {\n+\n+            $data =  PlaceDetails::where('id', $value)->first();\n+\n+            // dd($data);\n+\n+            if ($data->is_home == 1) {\n+                PlaceDetails::where('id', $value)->update([\n+                    'is_home' => 0\n+                ]);\n+            }\n+            if ($data->is_home == 0) {\n+                PlaceDetails::where('id', $value)->update([\n+                    'is_home' => 1\n+                ]);\n+            }\n+        }\n+\n+        $this->emit('success', 'Map updated successfully');\n+    }\n+\n+    public function render()\n+    {\n+        $userid = backpack_auth()->user()->id;\n+\n+        // $places = PlaceDetails::where('user_id', $userid)->where()\n+         \n+    //     $places = PlaceDetails::where('user_id', $userid)\n+    // ->select('place_id', 'observation_id')\n+    // ->distinct()\n+    // ->orderBy('id', 'desc')\n+    // ->get();\n+\n+    $placeIds = PlaceDetails::where('user_id', $userid)->whereNotNull('place_id')->distinct();\n+    $observation_ids = PlaceDetails::where('user_id', $userid)->whereNotNull('observation_id')->distinct()->pluck('observation_id');\n+    \n+\n+dd($observation_ids);\n+\n+\n+\n+    foreach($observation_ids as $p){\n+        var_dump($p->observation->name);\n+        echo '<br>';\n+        echo '<br>';\n+        echo '<br>';\n+    }\n+    \n+\n+    die();\n+\n+\n+        return view('livewire.filter', compact('places'));\n+    }\n+}\n"
                },
                {
                    "date": 1696873308775,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -56,9 +56,9 @@\n     $placeIds = PlaceDetails::where('user_id', $userid)->whereNotNull('place_id')->distinct();\n     $observation_ids = PlaceDetails::where('user_id', $userid)->whereNotNull('observation_id')->distinct()->pluck('observation_id');\n     \n \n-dd($observation_ids);\n+// dd($observation_ids);\n \n \n \n     foreach($observation_ids as $p){\n@@ -74,81 +74,4 @@\n \n         return view('livewire.filter', compact('places'));\n     }\n }\n-<?php\n-\n-namespace App\\Http\\Livewire;\n-\n-use App\\Models\\PlaceDetails;\n-use App\\Models\\User;\n-use Livewire\\Component;\n-\n-class Filter extends Component\n-{\n-    // public $places;\n-\n-    public $selected_places = [];\n-\n-    public function select_place($id)\n-    {\n-        array_push($this->selected_places, $id);\n-    }\n-\n-    public function updateMap()\n-    {\n-\n-        foreach ($this->selected_places as $value) {\n-\n-            $data =  PlaceDetails::where('id', $value)->first();\n-\n-            // dd($data);\n-\n-            if ($data->is_home == 1) {\n-                PlaceDetails::where('id', $value)->update([\n-                    'is_home' => 0\n-                ]);\n-            }\n-            if ($data->is_home == 0) {\n-                PlaceDetails::where('id', $value)->update([\n-                    'is_home' => 1\n-                ]);\n-            }\n-        }\n-\n-        $this->emit('success', 'Map updated successfully');\n-    }\n-\n-    public function render()\n-    {\n-        $userid = backpack_auth()->user()->id;\n-\n-        // $places = PlaceDetails::where('user_id', $userid)->where()\n-         \n-    //     $places = PlaceDetails::where('user_id', $userid)\n-    // ->select('place_id', 'observation_id')\n-    // ->distinct()\n-    // ->orderBy('id', 'desc')\n-    // ->get();\n-\n-    $placeIds = PlaceDetails::where('user_id', $userid)->whereNotNull('place_id')->distinct();\n-    $observation_ids = PlaceDetails::where('user_id', $userid)->whereNotNull('observation_id')->distinct()->pluck('observation_id');\n-    \n-\n-dd($observation_ids);\n-\n-\n-\n-    foreach($places as $p){\n-        var_dump($p->place_id);\n-        echo '<br>';\n-        echo '<br>';\n-        echo '<br>';\n-    }\n-    \n-\n-    die();\n-\n-\n-        return view('livewire.filter', compact('places'));\n-    }\n-}\n"
                },
                {
                    "date": 1696873318385,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,9 @@\n     // ->orderBy('id', 'desc')\n     // ->get();\n \n     $placeIds = PlaceDetails::where('user_id', $userid)->whereNotNull('place_id')->distinct();\n-    $observation_ids = PlaceDetails::where('user_id', $userid)->whereNotNull('observation_id')->distinct()->pluck('observation_id');\n+    $observation_ids = PlaceDetails::where('user_id', $userid)->whereNotNull('observation_id')->distinct()->get();\n     \n \n // dd($observation_ids);\n \n"
                },
                {
                    "date": 1696873329826,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -56,9 +56,9 @@\n     $placeIds = PlaceDetails::where('user_id', $userid)->whereNotNull('place_id')->distinct();\n     $observation_ids = PlaceDetails::where('user_id', $userid)->whereNotNull('observation_id')->distinct()->get();\n     \n \n-// dd($observation_ids);\n+dd($observation_ids);\n \n \n \n     foreach($observation_ids as $p){\n"
                },
                {
                    "date": 1696873343788,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,9 @@\n     // ->orderBy('id', 'desc')\n     // ->get();\n \n     $placeIds = PlaceDetails::where('user_id', $userid)->whereNotNull('place_id')->distinct();\n-    $observation_ids = PlaceDetails::where('user_id', $userid)->whereNotNull('observation_id')->distinct()->get();\n+    $observation_ids = PlaceDetails::where('user_id', $userid)->whereNotNull('observation_id')->distinct()->pluck('observation_id');\n     \n \n dd($observation_ids);\n \n"
                },
                {
                    "date": 1696873359285,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,9 @@\n     // ->orderBy('id', 'desc')\n     // ->get();\n \n     $placeIds = PlaceDetails::where('user_id', $userid)->whereNotNull('place_id')->distinct();\n-    $observation_ids = PlaceDetails::where('user_id', $userid)->whereNotNull('observation_id')->distinct()->pluck('observation_id');\n+    $observation_ids = PlaceDetails::where('user_id', $userid)->whereNotNull('observation_id')->distinct();\n     \n \n dd($observation_ids);\n \n"
                },
                {
                    "date": 1696873364619,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -56,9 +56,9 @@\n     $placeIds = PlaceDetails::where('user_id', $userid)->whereNotNull('place_id')->distinct();\n     $observation_ids = PlaceDetails::where('user_id', $userid)->whereNotNull('observation_id')->distinct();\n     \n \n-dd($observation_ids);\n+dd($placeIds->get());\n \n \n \n     foreach($observation_ids as $p){\n"
                },
                {
                    "date": 1696873417364,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,13 +52,13 @@\n     // ->distinct()\n     // ->orderBy('id', 'desc')\n     // ->get();\n \n-    $placeIds = PlaceDetails::where('user_id', $userid)->whereNotNull('place_id')->distinct();\n-    $observation_ids = PlaceDetails::where('user_id', $userid)->whereNotNull('observation_id')->distinct();\n+    $placeIds = PlaceDetails::where('user_id', $userid)->whereNotNull('place_id')->distinct()->pluck('place_id');\n+    $observation_ids = PlaceDetails::where('user_id', $userid)->whereNotNull('observation_id')->distinct()->pluck('observation_id');\n     \n \n-dd($placeIds->get());\n+dd($observation_ids);\n \n \n \n     foreach($observation_ids as $p){\n"
                },
                {
                    "date": 1696873467164,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,13 +52,22 @@\n     // ->distinct()\n     // ->orderBy('id', 'desc')\n     // ->get();\n \n-    $placeIds = PlaceDetails::where('user_id', $userid)->whereNotNull('place_id')->distinct()->pluck('place_id');\n-    $observation_ids = PlaceDetails::where('user_id', $userid)->whereNotNull('observation_id')->distinct()->pluck('observation_id');\n-    \n+    $placeAndObservationIds = PlaceDetails::where('user_id', $userid)\n+    ->where(function ($query) {\n+        $query->whereNotNull('place_id')\n+              ->orWhereNotNull('observation_id');\n+    })\n+    ->distinct()\n+    ->pluck('place_id')\n+    ->concat(PlaceDetails::where('user_id', $userid)\n+        ->whereNotNull('observation_id')\n+        ->distinct()\n+        ->pluck('observation_id'))\n+    ->unique();\n \n-dd($observation_ids);\n+dd($placeAndObservationIds);\n \n \n \n     foreach($observation_ids as $p){\n"
                },
                {
                    "date": 1696873513423,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,87 @@\n+<?php\n+\n+namespace App\\Http\\Livewire;\n+\n+use App\\Models\\PlaceDetails;\n+use App\\Models\\User;\n+use Livewire\\Component;\n+\n+class Filter extends Component\n+{\n+    // public $places;\n+\n+    public $selected_places = [];\n+\n+    public function select_place($id)\n+    {\n+        array_push($this->selected_places, $id);\n+    }\n+\n+    public function updateMap()\n+    {\n+\n+        foreach ($this->selected_places as $value) {\n+\n+            $data =  PlaceDetails::where('id', $value)->first();\n+\n+            // dd($data);\n+\n+            if ($data->is_home == 1) {\n+                PlaceDetails::where('id', $value)->update([\n+                    'is_home' => 0\n+                ]);\n+            }\n+            if ($data->is_home == 0) {\n+                PlaceDetails::where('id', $value)->update([\n+                    'is_home' => 1\n+                ]);\n+            }\n+        }\n+\n+        $this->emit('success', 'Map updated successfully');\n+    }\n+\n+    public function render()\n+    {\n+        $userid = backpack_auth()->user()->id;\n+\n+        // $places = PlaceDetails::where('user_id', $userid)->where()\n+         \n+    //     $places = PlaceDetails::where('user_id', $userid)\n+    // ->select('place_id', 'observation_id')\n+    // ->distinct()\n+    // ->orderBy('id', 'desc')\n+    // ->get();\n+\n+    $placeAndObservationIds = PlaceDetails::where('user_id', $userid)\n+    ->where(function ($query) {\n+        $query->whereNotNull('place_id')\n+              ->orWhereNotNull('observation_id');\n+    })\n+    ->distinct()\n+    // ->pluck('place_id')\n+    ->concat(PlaceDetails::where('user_id', $userid)\n+        ->whereNotNull('observation_id')\n+        ->distinct()\n+        // ->pluck('observation_id')\n+        )\n+    ->unique();\n+\n+dd($placeAndObservationIds);\n+\n+\n+\n+    foreach($observation_ids as $p){\n+        var_dump($p->observation->name);\n+        echo '<br>';\n+        echo '<br>';\n+        echo '<br>';\n+    }\n+    \n+\n+    die();\n+\n+\n+        return view('livewire.filter', compact('places'));\n+    }\n+}\n"
                },
                {
                    "date": 1696873523903,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,95 +58,8 @@\n         $query->whereNotNull('place_id')\n               ->orWhereNotNull('observation_id');\n     })\n     ->distinct()\n-    // ->pluck('place_id')\n-    ->concat(PlaceDetails::where('user_id', $userid)\n-        ->whereNotNull('observation_id')\n-        ->distinct()\n-        // ->pluck('observation_id')\n-        )\n-    ->unique();\n-\n-dd($placeAndObservationIds);\n-\n-\n-\n-    foreach($observation_ids as $p){\n-        var_dump($p->observation->name);\n-        echo '<br>';\n-        echo '<br>';\n-        echo '<br>';\n-    }\n-    \n-\n-    die();\n-\n-\n-        return view('livewire.filter', compact('places'));\n-    }\n-}\n-<?php\n-\n-namespace App\\Http\\Livewire;\n-\n-use App\\Models\\PlaceDetails;\n-use App\\Models\\User;\n-use Livewire\\Component;\n-\n-class Filter extends Component\n-{\n-    // public $places;\n-\n-    public $selected_places = [];\n-\n-    public function select_place($id)\n-    {\n-        array_push($this->selected_places, $id);\n-    }\n-\n-    public function updateMap()\n-    {\n-\n-        foreach ($this->selected_places as $value) {\n-\n-            $data =  PlaceDetails::where('id', $value)->first();\n-\n-            // dd($data);\n-\n-            if ($data->is_home == 1) {\n-                PlaceDetails::where('id', $value)->update([\n-                    'is_home' => 0\n-                ]);\n-            }\n-            if ($data->is_home == 0) {\n-                PlaceDetails::where('id', $value)->update([\n-                    'is_home' => 1\n-                ]);\n-            }\n-        }\n-\n-        $this->emit('success', 'Map updated successfully');\n-    }\n-\n-    public function render()\n-    {\n-        $userid = backpack_auth()->user()->id;\n-\n-        // $places = PlaceDetails::where('user_id', $userid)->where()\n-         \n-    //     $places = PlaceDetails::where('user_id', $userid)\n-    // ->select('place_id', 'observation_id')\n-    // ->distinct()\n-    // ->orderBy('id', 'desc')\n-    // ->get();\n-\n-    $placeAndObservationIds = PlaceDetails::where('user_id', $userid)\n-    ->where(function ($query) {\n-        $query->whereNotNull('place_id')\n-              ->orWhereNotNull('observation_id');\n-    })\n-    ->distinct()\n     ->pluck('place_id')\n     ->concat(PlaceDetails::where('user_id', $userid)\n         ->whereNotNull('observation_id')\n         ->distinct()\n"
                },
                {
                    "date": 1696873580535,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,22 +52,13 @@\n     // ->distinct()\n     // ->orderBy('id', 'desc')\n     // ->get();\n \n-    $placeAndObservationIds = PlaceDetails::where('user_id', $userid)\n-    ->where(function ($query) {\n-        $query->whereNotNull('place_id')\n-              ->orWhereNotNull('observation_id');\n-    })\n-    ->distinct()\n-    ->pluck('place_id')\n-    ->concat(PlaceDetails::where('user_id', $userid)\n-        ->whereNotNull('observation_id')\n-        ->distinct()\n-        ->pluck('observation_id'))\n-    ->unique();\n+    $placeIds = PlaceDetails::where('user_id', $userid)->whereNotNull('place_id')->distinct()->pluck('place_id');\n+    $observation_ids = PlaceDetails::where('user_id', $userid)->whereNotNull('observation_id')->distinct()->pluck('observation_id');\n+    \n \n-dd($placeAndObservationIds);\n+dd($observation_ids);\n \n \n \n     foreach($observation_ids as $p){\n"
                },
                {
                    "date": 1696873656128,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -56,8 +56,11 @@\n     $placeIds = PlaceDetails::where('user_id', $userid)->whereNotNull('place_id')->distinct()->pluck('place_id');\n     $observation_ids = PlaceDetails::where('user_id', $userid)->whereNotNull('observation_id')->distinct()->pluck('observation_id');\n     \n \n+    $places = $places::whereIn('id', $placeIds)->get();\n+    $observations = Observation::whereIn('id', $observationIds)->get();\n+\n dd($observation_ids);\n \n \n \n"
                },
                {
                    "date": 1696873691942,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,10 @@\n \n namespace App\\Http\\Livewire;\n \n use App\\Models\\PlaceDetails;\n+use App\\Models\\Place;\n+use App\\Models\\Observation;\n use App\\Models\\User;\n use Livewire\\Component;\n \n class Filter extends Component\n@@ -53,12 +55,12 @@\n     // ->orderBy('id', 'desc')\n     // ->get();\n \n     $placeIds = PlaceDetails::where('user_id', $userid)->whereNotNull('place_id')->distinct()->pluck('place_id');\n-    $observation_ids = PlaceDetails::where('user_id', $userid)->whereNotNull('observation_id')->distinct()->pluck('observation_id');\n+    $observationIds = PlaceDetails::where('user_id', $userid)->whereNotNull('observation_id')->distinct()->pluck('observation_id');\n     \n \n-    $places = $places::whereIn('id', $placeIds)->get();\n+    $places = Place::whereIn('id', $placeIds)->get();\n     $observations = Observation::whereIn('id', $observationIds)->get();\n \n dd($observation_ids);\n \n"
                },
                {
                    "date": 1696873705383,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,10 +65,10 @@\n dd($places);\n \n \n \n-    foreach($observation_ids as $p){\n-        var_dump($p->observation->name);\n+    foreach($places as $p){\n+        var_dump($p->name);\n         echo '<br>';\n         echo '<br>';\n         echo '<br>';\n     }\n"
                },
                {
                    "date": 1696873801407,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,8 +62,15 @@\n     $places = Place::whereIn('id', $placeIds)->get();\n     $observations = Observation::whereIn('id', $observationIds)->get();\n \n \n+    $sortedCombined = $combined->sortBy(function ($item) use ($placeIds, $observationIds) {\n+        if (in_array($item->id, $placeIds->toArray())) {\n+            return $placeIds->search($item->id);\n+        } elseif (in_array($item->id, $observationIds->toArray())) {\n+            return $observationIds->search($item->id);\n+        }\n+    });\n \n \n \n     foreach($places as $p){\n"
                }
            ],
            "date": 1696869884204,
            "name": "Commit-0",
            "content": "<?php\n\nnamespace App\\Http\\Livewire;\n\nuse App\\Models\\PlaceDetails;\nuse Livewire\\Component;\n\nclass Filter extends Component\n{\n    // public $places;\n\n    public $selected_places = [];\n\n    public function select_place($id)\n    {\n        array_push($this->selected_places, $id);\n    }\n\n    public function updateMap()\n    {\n\n        foreach ($this->selected_places as $value) {\n\n            $data =  PlaceDetails::where('id', $value)->first();\n\n            // dd($data);\n\n            if ($data->is_home == 1) {\n                PlaceDetails::where('id', $value)->update([\n                    'is_home' => 0\n                ]);\n            }\n            if ($data->is_home == 0) {\n                PlaceDetails::where('id', $value)->update([\n                    'is_home' => 1\n                ]);\n            }\n        }\n\n        $this->emit('success', 'Map updated successfully');\n    }\n\n    public function render()\n    {\n        $places = PlaceDetails::all();\n        $placeDetails = User::with('placeDetails')->find($userid)->placeDetails()->orderBy('id', 'desc')->paginate(10);\n\n\n        return view('livewire.filter', compact('places'));\n    }\n}\n"
        }
    ]
}