{
    "sourceFile": "resources/views/home.blade.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1701283805987,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1701283990826,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,1490 @@\n+@php\n+    $locale = session()->get('locale');\n+    if ($locale == null) {\n+        $locale = 'en';\n+    }\n+@endphp\n+@extends('layouts.app')\n+\n+@section('main')\n+    <div data-barba=\"container\">\n+        <div class=\"flex flex-col mx-auto\">\n+            <div class=\"\">\n+                <div class=\"relative\">\n+\n+\n+                    @if (backpack_auth()->user()->id)\n+                        <div class=\"fixed right-0 z-20 flex items-center justify-center p-4 rounded-full cursor-pointer top-4\"\n+                            id=\"openPopup_profile\">\n+                            <img class=\"object-cover border-2 rounded-full border-site h-14 w-14\"\n+                                src=\"/storage/uploads/avatar/{{ backpack_auth()->user()->avatar }}\" alt=\"\">\n+                        </div>\n+                    @endif\n+\n+                    <div onclick=\"mylocation()\"\n+                        class=\"fixed z-20 flex items-center justify-center p-4 bg-transparent rounded-full cursor-pointer h-14 w-20 bottom-[6.8rem] left-4\">\n+                        <img src=\"{{ asset('img/location.png') }}\" class=\"w-20 h-12\" alt=\"\">\n+                    </div>\n+                    <a href=\"/filter\"\n+                        class=\"fixed z-20 flex items-center justify-center p-1 text-xl bg-white border-2 border-black rounded-full h-14 w-14 bottom-28 right-4\">\n+                        <div class=\"\"> <img src=\"{{ asset('img/eye.png') }}\" class=\"w-8 h-6\" alt=\"\"></div>\n+                    </a>\n+\n+                    <div class=\"flex justify-center items-center\">\n+                        <span class=\"fixed z-[30] top-10 mr-20 text-center\">\n+                            Explore the map to view the activities of other users.\n+                        </span>\n+                    </div>\n+\n+\n+                    <div id=\"map\" class=\"absolute w-[100vw] z-10 h-[90vh]\"></div>\n+                </div>\n+\n+                <div x-data=\"{ modelOpen: false, showMore: false, hidetab: 'no', tab: 'place', searchQuery: '' }\">\n+                    <div\n+                        class=\"fixed bottom-0 z-50 w-full pt-3 pb-8 text-xl font-semibold text-center shadow-xl rounded-t-3xl bg-gray-50 \">\n+\n+                        <div class=\"flex items-center justify-center\">\n+                            <div class=\"py-0.5 w-14 mb-3 rounded-full px-4 bg-black\">\n+\n+                            </div>\n+\n+                        </div>\n+\n+\n+                        <div class=\"flex\">\n+                            <div class=\"absolute left-16 bottom-[18px] \">\n+                                <div class=\"pl-4 py-3 pr-2.5 bg-[#ffa726] border-2 border-white rounded-full h-14 w-14\">\n+                                    <span class=\"w-10 h-14\"><img src=\"{{ asset('img/search.png') }}\" class=\"w-9 h-7\"\n+                                            alt=\"\"></span>\n+                                </div>\n+\n+                            </div>\n+                            <div class=\"absolute left-6 bottom-[18px] \">\n+                                <div class=\"p-3 border-2 border-white rounded-full bg-site h-14 w-14\">\n+                                    <img src=\"{{ asset('new_img/image.png') }}\" class=\"w-7 h-7\" alt=\"\">\n+                                </div>\n+\n+                            </div>\n+                        </div>\n+\n+                        <div class=\"w-full pt-4 addToMap\" @click=\"tab ='place'; modelOpen =true; searchQuery=''\">\n+                            <span\n+                                class=\"border-2 border-site w-full px-12 py-4 text-white bg-[#2d9bf0] rounded-3xl cursor-pointer\">\n+                                Add to Pin\n+                            </span>\n+\n+                        </div>\n+\n+\n+                        <div class=\"absolute right-5 bottom-[25px] \">\n+                            <div class=\"p-1 rounded-full bg-site w-9\">\n+                                <span class=\"italic font-bold text-white\">\n+                                    i\n+                                </span>\n+                            </div>\n+                        </div>\n+\n+                    </div>\n+\n+\n+                    <div class=\"parentDiv\" x-data=\"{ height: 'auto' }\">f\n+                        <button class=\"hidden OpenObservationModel\"\n+                            @click=\"modelOpen=true; showMore = true; hidetab = 'place'; tab='observation'; height = '100vh';\"></button>\n+                        <button class=\"hidden openPlaceModel\"\n+                            @click=\"modelOpen=true; showMore = true; hidetab = 'observation'; tab='place'; height = '100vh';\"></button>\n+\n+                        <div x-cloak x-show=\"modelOpen \" class=\"fixed bottom-0 z-50 overflow-y-auto\"\n+                            aria-labelledby=\"modal-title\" role=\"dialog\" aria-modal=\"true\">\n+                            <div class=\"flex items-end justify-center text-center\">\n+                                <div x-cloak @click=\"modelOpen = false; hidetab = 'no'\" x-show=\"modelOpen\"\n+                                    class=\"fixed inset-0 transition-opacity bg-gray-500 closeAddProcess bg-opacity-40\"\n+                                    aria-hidden=\"true\">\n+                                </div>\n+\n+                                <div x-cloak x-show=\"modelOpen\"\n+                                    x-transition:enter=\"transition ease-out duration-300 transform\"\n+                                    x-transition:enter-start=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n+                                    x-transition:enter-end=\"opacity-100 translate-y-0 sm:scale-100\" {{-- x-transition:leave=\"transition ease-in duration-200 transform\" --}}\n+                                    class=\"transition-height z-50 w-screen pb-16 transition-all transform bg-white h-[50%] shadow-xl mt-60 rounded-t-3xl\"\n+                                    :style=\"'height: ' + height\" :class=\"{ 'overflow-auto': showMore }\">\n+\n+                                    <div class=\"p-6 lg:p-12\">\n+\n+                                        @if ($edit_id)\n+                                            <a href=\"/\" class=\"block mb-4 closeAddProcess\" class=\"mb-4\">\n+                                                <img src=\"{{ asset('img/icons/arrow.png') }}\" class=\"arrow\">\n+                                            </a>\n+                                        @else\n+                                            <div class=\"mb-4 closeAddProcess\"\n+                                                @click=\"modelOpen=false; showMore = false; hidetab = 'no'; height = 'auto';\"\n+                                                x-show=\"showMore\" class=\"mb-4\">\n+                                                <img src=\"{{ asset('img/icons/arrow.png') }}\" class=\"arrow\">\n+                                            </div>\n+                                        @endif\n+\n+\n+\n+\n+\n+                                        <div class=\"flex items-center gap-4 justity-between\">\n+                                            <input type=\"text\" class=\"w-full px-2 py-2 bg-white rounded-full\"\n+                                                placeholder=\"Choose tags or add new city layers\" name=\"searchInput\"\n+                                                x-model=\"searchQuery\" @keyup=\"showMore = true; height = '100vh'\">\n+\n+                                            <a :href=\"tab === 'place' ?\n+                                                '/add-new/place{{ $edit_id ? '/' . urlencode($edit_id) : '' }}' :\n+                                                '/add-new/observation{{ $edit_id ? '/' . urlencode($edit_id) : '' }}'\"\n+                                                class=\"p-2 transition-all border-2 rounded-full tabNewLink\"\n+                                                :class=\"tab == 'place' ? 'bg-[#2d9bf0] border-[#2d9bf0]' :\n+                                                    'bg-[#ffa726] border-[#ffa726]'\">\n+                                                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\"\n+                                                    stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-6 h-6 text-white\">\n+                                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\"\n+                                                        d=\"M12 6v12m6-6H6\" />\n+                                                </svg>\n+                                            </a>\n+\n+                                        </div>\n+\n+                                        <div class=\"mt-2\">\n+                                            Drop a pin to share observations, opinions and ideas.\n+                                        </div>\n+\n+\n+\n+\n+\n+                                        <div class=\"flex items-center justify-center mt-12 homeTabs\">\n+                                            <div class=\"-mr-1 cursor-pointer\" x-show=\"hidetab!='place'\"\n+                                                @click=\"tab='place'\">\n+                                                <div class=\"flex flex-col w-[84px] justify-center items-center\">\n+                                                    <div class=\"bg-[#2d9bf0] border-2 border-white rounded-full \"\n+                                                        :class=\"tab == 'place' || tab == 'place1' ?\n+                                                            'bg-[#2d9bf0] z-10 p-[26px] placeTabActive' :\n+                                                            'bg-[#2d9bf0]/70 p-[40px]'\">\n+                                                        <img src=\"{{ asset('new_img/image.png') }}\" class=\"w-7 h-7\"\n+                                                            :class=\"tab == 'place' || tab == 'place1' ? 'block' : 'hidden'\"\n+                                                            id=\"place\" alt=\"\">\n+                                                    </div>\n+                                                    <div class=\"text-sm font-semibold text-center\"\n+                                                        :class=\"tab == 'place' ? 'text-black' : 'text-black/50'\">\n+                                                        Browse Places\n+                                                    </div>\n+                                                </div>\n+                                            </div>\n+                                            <div class=\"-ml-1 cursor-pointer\" x-show=\"hidetab!='observation'\"\n+                                                @click=\"tab='observation'\">\n+                                                <div class=\"flex flex-col w-[75px] justify-center items-center\">\n+\n+                                                    <div class=\"flex items-center justify-center border-2 border-white rounded-full \"\n+                                                        :class=\"tab == 'observation' || tab == 'observation1' ?\n+                                                            'bg-[#ffa726] z-10 p-[20px] observationTabActive' :\n+                                                            'bg-[#ffa726]/70 p-[40px]'\">\n+                                                        <div class=\"flex items-center justify-center w-10 h-10 text-2xl\"\n+                                                            :class=\"tab == 'observation' || tab == 'observation1' ? 'block' :\n+                                                                'hidden'\"\n+                                                            id=\"observation\" alt=\"\">🔍</div>\n+                                                    </div>\n+\n+                                                    <div class=\"text-sm font-semibold text-center \"\n+                                                        :class=\"tab == 'observation' ? 'text-black' : 'text-black/50'\">\n+                                                        Browse Observation\n+                                                    </div>\n+                                                </div>\n+                                            </div>\n+                                        </div>\n+\n+                                        <div x-data=\"{ active: '{{ isset($edited_place->placeDetail->place_id) ? 'PL_' . $edited_place->placeDetail->place_id : '' }}' }\">\n+\n+                                            <div class=\"flex items-start justify-center gap-10 mt-6 mb-6 italic font-semibold all-places\"\n+                                                x-show=\"tab=='place'\">\n+\n+                                                <div class=\"grid grid-cols-3 gap-10 italic font-semibold\"\n+                                                    id=\"searchResults2Pls\">\n+\n+\n+                                                    @foreach ($allPlaces as $key => $place)\n+                                                        <div x-show=\"(showMore || {{ $key }} < 2) && (searchQuery === '' || '{{ strtolower($place->name) }}'.includes(searchQuery.toLowerCase()))\"\n+                                                            class=\"flex flex-col items-center cursor-pointer\"\n+                                                            @click=\"active='PL_{{ $place->id }}'\">\n+                                                            <div data-place=\"{{ json_encode(['id' => $place->id, 'name' => $place->name, 'child' => $place->subplaces]) }}\"\n+                                                                class=\"w-[76px] h-[76px] rounded-full bg-[#2d9bf0]\"\n+                                                                :class=\"active == 'PL_{{ $place->id }}' ?\n+                                                                    'border-4 border-[#12CDD4] placeActive' : ''\">\n+                                                                <div\n+                                                                    class=\"flex items-center justify-center h-full align-item-center\">\n+                                                                    <img src=\"{{ asset('new_img/image.png') }}\"\n+                                                                        class=\"w-7 h-7\" />\n+                                                                </div>\n+                                                            </div>\n+                                                            <span\n+                                                                class=\"mt-4 font-normal text-black\">{{ $place->name }}</span>\n+                                                        </div>\n+                                                    @endforeach\n+\n+                                                    <div x-show=\"!showMore\" class=\"cursor-pointer\">\n+                                                        <button @click=\"showMore = true; height = '100vh'\">\n+                                                            <div class=\"rounded-full border-site border-4 p-[22px]\">\n+                                                                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\"\n+                                                                    viewBox=\"0 0 24 24\" stroke-width=\"3\"\n+                                                                    stroke=\"currentColor\"\n+                                                                    class=\"w-6 h-6 font-bold color-site\">\n+                                                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\"\n+                                                                        d=\"M12 6v12m6-6H6\" />\n+                                                                </svg>\n+                                                            </div>\n+                                                            <div class=\"mt-4 font-normal text-black\">See more</div>\n+                                                        </button>\n+                                                    </div>\n+                                                </div>\n+                                            </div>\n+                                        </div>\n+                                        <div class=\"\" x-data=\"{ active: '' }\">\n+                                            <div class=\"flex items-center justify-center gap-10 mt-6 mb-6 italic font-semibold\"\n+                                                x-show=\"tab=='observation'\">\n+                                                <div class=\"grid grid-cols-3 gap-10 italic font-semibold\"\n+                                                    id=\"searchResults2Obs\">\n+\n+                                                    @foreach ($allObservations as $key => $observation)\n+                                                        <div x-data=\"{ active: '{{ $edited_place && $edited_place->observationsDetail->contains('observation_id', $observation->id) ? 'OB_' . $observation->id : '' }}' }\"\n+                                                            x-show=\"(showMore || {{ $key }} < 2) && (searchQuery === '' || '{{ strtolower($observation->name) }}'.includes(searchQuery.toLowerCase()))\"\n+                                                            class=\"flex flex-col items-center cursor-pointer\"\n+                                                            @click=\"active = !active ? 'OB_{{ $observation->id }}' : false\">\n+\n+                                                            <div data-observations=\"{{ json_encode(['id' => $observation->id, 'name' => $observation->name, 'child' => $observation->subobservs]) }}\"\n+                                                                class=\"w-[76px] h-[76px] rounded-full bg-[#ffa726]\"\n+                                                                :class=\"active == 'OB_{{ $observation->id }}' ?\n+                                                                    'border-4 border-[#12CDD4] observationActive' : ''\">\n+                                                                <div\n+                                                                    class=\"flex items-center justify-center h-full align-item-center\">\n+                                                                    <img src=\"{{ asset('new_img/sad.png') }}\"\n+                                                                        alt=\"\" class=\"w-8 h-8 -mr-1\">\n+                                                                    <img src=\"{{ asset('new_img/happy.png') }}\"\n+                                                                        alt=\"\" class=\"w-8 h-8 -ml-1\">\n+                                                                </div>\n+                                                            </div>\n+                                                            <span\n+                                                                class=\"mt-4 font-normal text-black\">{{ $observation->name }}</span>\n+                                                        </div>\n+                                                    @endforeach\n+\n+\n+\n+                                                    <div x-show=\"!showMore\"\n+                                                        class=\"flex flex-col items-center justify-center cursor-pointer\">\n+                                                        <button @click=\"showMore = true; height = '100vh'\" type=\"button\">\n+                                                            <div class=\"rounded-full border-[#ffa726] border-4  p-[22px]\">\n+                                                                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\"\n+                                                                    viewBox=\"0 0 24 24\" stroke-width=\"3\"\n+                                                                    stroke=\"currentColor\"\n+                                                                    class=\"w-6 h-6 font-bold text-[#ffa726]\">\n+                                                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\"\n+                                                                        d=\"M12 6v12m6-6H6\" />\n+                                                                </svg>\n+\n+                                                            </div>\n+                                                            <div class=\"mt-4 font-normal text-black\">See more</div>\n+                                                        </button>\n+\n+                                                    </div>\n+\n+                                                </div>\n+\n+\n+\n+                                            </div>\n+                                        </div>\n+\n+\n+                                    </div>\n+\n+                                </div>\n+                            </div>\n+                        </div>\n+                        <div x-cloak x-show=\"modelOpen\" class=\"fixed bottom-0 z-50 w-full py-4 bg-white\">\n+                            <div class=\"flex items-center justify-center\">\n+                                <div\n+                                    class=\"submitData border-2 border-site flex cursor-pointer items-center justify-center gap-2 px-8 py-3 text-lg font-extrabold text-white bg-[#2d9bf0] rounded-3xl hover:shadow  hover:bg-[#268ede] transition-all\">\n+                                    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\"\n+                                        stroke-width=\"3\" stroke=\"currentColor\" class=\"w-6 h-6\">\n+                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\"\n+                                            d=\"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z\" />\n+                                    </svg>\n+                                    Add new\n+                                </div>\n+                            </div>\n+                        </div>\n+                    </div>\n+\n+\n+\n+\n+\n+\n+\n+\n+                </div>\n+\n+\n+                <div class=\"parentDiv\" x-data=\"{ subModelOpen: false, subtab: '' }\" x-cloak x-show=\"subModelOpen\">\n+\n+                    <button class=\"hidden subModeltrigerPlace\" @click=\"subModelOpen=true;subtab='place'\"></button>\n+\n+                    <button class=\"hidden subModeltrigerObservation\"\n+                        @click=\"subModelOpen=true;subtab='observation'\"></button>\n+\n+\n+                    <div x-data=\"{ subactive: '{{ isset($edited_place->placeDetail->place_child_id) ? 'SPL_' . $edited_place->placeDetail->place_child_id : '' }}' }\"\n+                        class=\"fixed h-screen overflow-auto bottom-0 bg-white z-[60] w-full pb-8 text-xl font-semibold text-center shadow-xl\">\n+\n+                        <div class=\"p-6 lg:p-12\">\n+\n+                            <div @click=\"subModelOpen=false;subactive='';subtab=''\"\n+                                class=\"mb-4 OpenObservationModel openPlaceModel\">\n+                                <img src=\"{{ asset('img/icons/arrow.png') }}\" class=\"arrow\">\n+                            </div>\n+\n+\n+                            <div class=\"flex items-center justify-center mt-12 homeTabs\">\n+                                <div class=\"-mr-1 cursor-pointer\" x-show=\"subtab=='place'\">\n+                                    <div class=\"flex flex-col w-[84px] justify-center items-center\">\n+                                        <div class=\"bg-[#2d9bf0] border-2 border-white rounded-full\"\n+                                            :class=\"subtab == 'place' ?\n+                                                'bg-[#2d9bf0] z-10 p-[26px] subplaceTabActive' :\n+                                                'bg-[#2d9bf0]/70 p-[40px]'\">\n+                                            <img src=\"{{ asset('new_img/image.png') }}\" class=\"w-7 h-7\"\n+                                                :class=\"subtab == 'place' ? 'block' : 'hidden'\" alt=\"\">\n+                                        </div>\n+\n+                                    </div>\n+                                </div>\n+                                <div class=\"-ml-1 cursor-pointer\" x-show=\"subtab=='observation'\">\n+                                    <div class=\"flex flex-col w-[75px] justify-center items-center\">\n+\n+                                        <div class=\"flex items-center justify-center border-2 border-white rounded-full\"\n+                                            :class=\"subtab == 'observation' ?\n+                                                'bg-[#ffa726] z-10 p-[20px] subobservationTabActive' :\n+                                                'bg-[#ffa726]/70 p-[40px]'\">\n+                                            <div class=\"flex items-center justify-center w-10 h-10 text-2xl\"\n+                                                :class=\"subtab == 'observation' ? 'block' :\n+                                                    'hidden'\">\n+                                                <div class=\"flex items-center justify-center h-full align-item-center\">\n+                                                    <img src=\"{{ asset('new_img/sad.png') }}\" alt=\"\"\n+                                                        class=\"w-8 h-8 -mr-1\"> <img\n+                                                        src=\"{{ asset('new_img/happy.png') }}\" alt=\"\"\n+                                                        class=\"w-8 h-8 -ml-1\">\n+                                                </div>\n+                                            </div>\n+                                        </div>\n+\n+\n+                                    </div>\n+                                </div>\n+                            </div>\n+\n+                            <div>\n+                                <div x-show=\"subtab=='place'\" class=\"flex flex-col items-center justify-center mt-12\">\n+                                    <div class=\"mb-10 placeparent\"></div>\n+\n+                                    <div class=\"grid grid-cols-3 gap-10 italic font-semibold subPlacesItems\">\n+\n+                                    </div>\n+                                    <div class=\"mt-4 text-center font-normal\">\n+                                        Tap \"submit\" to pin this place to the map and share it with other users.\n+                                        Provide more details by adding a description, and uploading a photo.\n+\n+                                    </div>\n+                                    <div class=\"flex items-center justify-between w-2/3 pb-12 pb-16 pt-28\">\n+                                        <label class=\"flex flex-col items-center gap-1 cursor-pointer\" for=\"image-upload\">\n+                                            <input id=\"image-upload\" type=\"file\" class=\"hidden place_image\"\n+                                                accept=\".jpg, .png\">\n+                                            <img src=\"{{ asset('img/cam-2.PNG') }}\" alt=\"\" class=\"w-10 h-9\">\n+                                            <div class=\"text-sm\">Upload image</div>\n+                                        </label>\n+\n+                                        <div class=\"relative\" x-data=\"{ placeText: false }\">\n+                                            <div @click=\"placeText = !placeText\"\n+                                                class=\"flex flex-col items-center gap-1 cursor-pointer\">\n+                                                <img src=\"{{ asset('img/msg.PNG') }}\" alt=\"\" class=\"w-10 h-9\">\n+                                                <div class=\"text-sm\">Add description</div>\n+                                            </div>\n+                                            <textarea class=\"font-normal place_description absolute px-2 py-2 bg-white rounded-xl w-[300px] right-0\"\n+                                                x-show=\"placeText\">{{ $edited_place && $edited_place->place_description ? $edited_place->place_description : '' }}</textarea>\n+                                        </div>\n+\n+                                    </div>\n+                                </div>\n+\n+                                <div x-show=\"subtab=='observation'\" class=\"flex flex-col items-center justify-center\">\n+                                    <div class=\"grid gap-10 mt-12 italic font-semibold grid-cols subObservationItems\">\n+\n+\n+\n+\n+                                    </div>\n+\n+\n+\n+                                    <div class=\"mt-4 text-center font-normal\">\n+                                        Tap \"submit\" to pin this observation to the map and share it with other users.\n+                                        Provide more details through rating, adding a description, and uploading a photo.\n+\n+                                    </div>\n+\n+\n+                                    <div class=\"flex items-center justify-between w-2/3 pt-20 pb-16 mb-12\">\n+                                        <label for=\"obser-image-upload\"\n+                                            class=\"flex flex-col items-center gap-1 cursor-pointer\">\n+                                            <input id=\"obser-image-upload\" type=\"file\"\n+                                                class=\"hidden observation_image\" accept=\".jpg, .png\">\n+                                            <img src=\"{{ asset('img/cam.PNG') }}\" alt=\"\" class=\"w-10 h-9\">\n+                                            <div class=\"text-sm\">Upload image</div>\n+                                        </label>\n+\n+\n+\n+                                        <div class=\"relative\" x-data=\"{ observationText: false }\">\n+                                            <div @click=\"observationText = !observationText\"\n+                                                class=\"flex flex-col items-center gap-1 cursor-pointer\">\n+                                                <img src=\"{{ asset('img/msg-2.PNG') }}\" alt=\"\" class=\"w-10 h-9\">\n+                                                <div class=\"text-sm\">Add description</div>\n+                                            </div>\n+                                            <textarea class=\"font-normal observation_description absolute px-2 py-2 bg-white rounded-xl w-[300px] right-0\"\n+                                                x-show=\"observationText\">{{ $edited_place && $edited_place->obsevation_description ? $edited_place->obsevation_description : '' }}</textarea>\n+                                        </div>\n+\n+                                    </div>\n+\n+                                </div>\n+                            </div>\n+\n+\n+                        </div>\n+\n+                    </div>\n+\n+\n+                    <div class=\"fixed w-full bottom-0 z-[60] bg-white py-4\">\n+                        <div class=\"flex items-center justify-center gap-6\">\n+                            <div @click=\"subModelOpen=false;\"\n+                                class=\"flex items-center justify-center gap-2 px-8 py-3 text-lg font-extrabold transition-all bg-white border-2 cursor-pointer border-site color-site rounded-3xl\">\n+                                Close\n+                            </div>\n+\n+                            <div\n+                                class=\"submitDataAll flex cursor-pointer items-center border-2 border-site justify-center gap-2 px-8 py-3 text-lg font-extrabold text-white bg-[#2d9bf0] rounded-3xl  hover:bg-[#268ede] transition-all\">\n+                                Submit\n+                            </div>\n+\n+                        </div>\n+                    </div>\n+\n+\n+                </div>\n+\n+\n+            </div>\n+        </div>\n+    </div>\n+\n+\n+    <div id=\"popup_profile\"\n+        class=\"p-6 lg:p-12 w-full h-screen lg:w-4/12 fixed bg-white shadow-md ml-[-2px] overflow-y-auto right-0 hidden z-50 transform translate-x-full transition-transform duration-300\">\n+        <a onclick=\"close_pop_profile()\">\n+            <img src=\"{{ asset('img/icons/arrow.png') }}\" class=\"arrow\">\n+\n+        </a>\n+        <div class=\"p-4\">\n+\n+            <div class=\"top\">\n+                <div class=\"topo\">\n+\n+                    <label for=\"image\" class=\"cursor-pointer new\">\n+                        <img class=\"object-cover w-24 h-24 border-blue-500 rounded-full border-7 nimage mimage\"\n+                            src=\"/storage/uploads/avatar/{{ backpack_auth()->user()->avatar }}\" alt=\"\">\n+\n+                    </label>\n+                </div>\n+                <div class=\"tops\">\n+                    <div class=\"toptaxt\">Hello \"{{ backpack_auth()->user()->name }}\"!</div>\n+                    <a href=\"/profile\" class=\"vieprofile\">View Profile</a>\n+                </div>\n+\n+\n+            </div>\n+            <br />\n+            <br />\n+            <div class=\"list\">\n+                <a href=\"/\" class=\"lbox\">\n+                    <div\n+                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n+                        +</div>\n+                    <div class=\"ltax\">Add to map</div>\n+                </a>\n+                <a href=\"/dashboard\" class=\"lbox\">\n+                    <div\n+                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n+                        ▄</div>\n+                    <div class=\"ltax\">Dashboard</div>\n+                </a>\n+                <a href=\"/community-achievements\" class=\"lbox\">\n+                    <div\n+                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n+                        ⌃</div>\n+                    <div class=\"ltax\">Community achievements</div>\n+                </a>\n+                <a href=\"/about-us\" class=\"lbox\">\n+                    <div\n+                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n+                        ?</div>\n+                    <div class=\"ltax\">About City Layers</div>\n+                </a>\n+                <a href=\"/contact-us\" class=\"lbox\">\n+                    <div\n+                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n+                        •</div>\n+\n+                    <div class=\"ltax\">Term & contact</div>\n+                </a>\n+                <a href=\"/privacy-policy\" class=\"lbox\">\n+                    <div\n+                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n+                        !</div>\n+\n+                    <div class=\"ltax\">Privacy Policy and Terms of Service</div>\n+                </a>\n+                <a href=\"/impressum-accessibility\" class=\"lbox\">\n+                    <div\n+                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n+                        i</div>\n+                    <div class=\"ltax\">Impressum & accessibility</div>\n+                </a>\n+                <a href=\"/admin/logout\" class=\"lbox\">\n+                    <div\n+                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n+                        i</div>\n+                    <div class=\"ltax\">Sign out</div>\n+                </a>\n+            </div>\n+            <br />\n+            <div class=\"belo\">\n+                <div class=\"mapping\">Maps are public and visible to all users. Your username will be shown along with your\n+                    pins and added layers.</div>\n+                <div class=\"cursor-pointer closebt\" onclick=\"close_pop_profile()\">Close</div>\n+            </div>\n+        </div>\n+    </div>\n+\n+    <script>\n+        const openPopupButton = document.getElementById('openPopup_profile');\n+        const popup = document.getElementById('popup_profile');\n+\n+        openPopupButton.addEventListener('click', () => {\n+            popup.style.transform = 'translateX(0)';\n+            popup.style.display = 'block';\n+        });\n+\n+        function close_pop_profile() {\n+\n+\n+            popup.style.transform = 'translateX(100%)';\n+            setTimeout(() => {\n+                popup.style.display = 'none';\n+            }, 300);\n+        }\n+    </script>\n+\n+\n+    <script>\n+        data = {!! json_encode($all_data) !!};\n+\n+        userid = {!! json_encode($userid) !!};\n+\n+        markers = {};\n+        const edit_id = {{ $edit_id ? $edit_id : '0' }};\n+        let marker = null;\n+\n+        let pin = [48.6890, 7.14086];\n+        if (data && data[0] && typeof data[0].latitude !== 'undefined' && typeof data[0].longitude !== 'undefined') {\n+            pin = [data[0].latitude, data[0].longitude];\n+        }\n+        let mymap0 = L.map('map').setView(pin, 6);\n+\n+        // https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png\n+\n+        osmLayer0 = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {\n+            subdomains: 'abcd',\n+            minZoom: 0,\n+            maxZoom: 19,\n+            ext: 'png'\n+        }).addTo(mymap0);\n+        mymap0.zoomControl.remove();\n+        mymap0.addLayer(osmLayer0);\n+        mymap0.touchZoom.enable();\n+        mymap0.scrollWheelZoom.enable();\n+\n+        let place_data = {\n+            place_id: '',\n+            child_place_id: '',\n+            observations: '',\n+            place_description: '',\n+            observation_description: '',\n+            latitude: '',\n+            longitude: '',\n+            tab: 'place',\n+        };\n+\n+\n+        var temp_des = [];\n+        var temp_comment = [];\n+        var temp_likes = [];\n+        var temp_dislikes = [];\n+\n+\n+        var currentPosIcon = L.icon({\n+            iconUrl: '/new_img/current-pos.svg', // Replace with the path to your icon image\n+            iconSize: [62, 62], // Adjust the icon size as needed\n+            iconAnchor: [16, 16], // Adjust the anchor point of the icon\n+            popupAnchor: [0, -16] // Adjust the popup anchor for the icon\n+        });\n+        var currentPosIcon = L.divIcon({\n+            className: 'transparent-icon',\n+            iconSize: [64, 64], // Adjust the size of the icon including the border\n+            iconAnchor: [32, 32], // Adjust the anchor point of the icon\n+            html: '<div class=\"border-2 rounded-full border-site\"><img src=\"/new_img/current-pos.svg\" /></div>'\n+        });\n+\n+\n+        var placeIcon = L.divIcon({\n+            className: 'transparent-icon',\n+            html: `<div class=\"rounded-full bg-[#2d9bf0] border-2 border-white flex justify-center items-center p-4 w-[64px] h-[64px]\">\n+                    <img src=\"{{ asset('new_img/image.png') }}\" class=\"w-full h-full\" />\n+                </div>`\n+        });\n+        var bothIcon = L.divIcon({\n+            className: 'transparent-icon',\n+            html: `<div class=\"rounded-full bg-[#2d9bf0] border-2 border-white flex justify-center items-center w-[64px] h-[64px]\">\n+                        <div class=\"flex items-center justify-center h-full align-item-center\">\n+                            <img src=\"{{ asset('new_img/sad.png') }}\" alt=\"\" class=\"w-6 h-6 -mr-2\">\n+                            <img src=\"{{ asset('new_img/image.png') }}\" class=\"z-20 w-6 h-6\" />\n+                            <img src=\"{{ asset('new_img/happy.png') }}\" alt=\"\" class=\"w-6 h-6 -ml-2\">\n+                        </div>\n+                </div>`\n+        });\n+        var observationIcon = L.divIcon({\n+            className: 'transparent-icon',\n+            html: `<div class=\"rounded-full bg-[#ffa726] border-2 border-white flex justify-center items-center p-4 w-[64px] h-[64px]\">\n+                    <div class=\"flex\">\n+                     <img src=\"{{ asset('new_img/sad.png') }}\" alt=\"\" class=\"-mr-1 w-7 h-7\">\n+                     <img src=\"{{ asset('new_img/happy.png') }}\" alt=\"\" class=\"-ml-1 w-7 h-7\">\n+                    </div>\n+                 </div>`\n+        });\n+\n+\n+\n+        if (navigator.geolocation) {\n+\n+            //wait 3 seconds to get position\n+            getposition(success, fail)\n+\n+        } else {\n+            alert(\"Geolocation is not supported by this browser.\");\n+        }\n+\n+\n+        function getposition(success, fail) {\n+\n+            var is_echo = false;\n+            if (navigator && navigator.geolocation) {\n+                navigator.geolocation.getCurrentPosition(\n+                    function(pos) {\n+                        if (is_echo) {\n+                            return;\n+                        }\n+                        is_echo = true;\n+\n+                        place_data['latitude'] = pos.coords.latitude;\n+                        place_data['longitude'] = pos.coords.longitude;\n+\n+                        success(pos.coords.latitude, pos.coords.longitude);\n+                    },\n+                    function() {\n+                        if (is_echo) {\n+                            return;\n+                        }\n+                        is_echo = true;\n+                        fail();\n+                    }\n+                );\n+            } else {\n+                fail();\n+            }\n+\n+        }\n+\n+\n+\n+\n+        function success(lat, lng) {\n+            mymap0.setView([lat, lng], 10);\n+\n+            L.marker([lat, lng], {\n+                icon: currentPosIcon\n+            }).addTo(mymap0);\n+        }\n+\n+        function fail() {\n+            alert(\"location failed\");\n+        }\n+\n+\n+\n+        function generateObservationHTML(observationDetail, place) {\n+            var obsrName = '';\n+            var addicon = '';\n+            if (observationDetail.observation.name) {\n+                obsrName = (observationDetail.observation ? observationDetail.observation.name : '') +\n+                    (observationDetail.observation && observationDetail.observation_child ?\n+                        '<span class=\"text-xs font-light\"> → ' + observationDetail.observation_child.name + '</span>' : '');\n+            } else {\n+                obsrName = 'No Observation';\n+                if (place.user_id == userid) {\n+                    addicon = `\n+                    <div data-id=\"${place.id}\" class=\"cursor-pointer border-2 transition-all rounded-full bg-[#2d9bf0] border-white w-6 h-6 mt-1 noObservation\">\n+                        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"text-white\">\n+                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 6v12m6-6H6\"></path>\n+                        </svg>\n+                    </div>\n+                    `;\n+                }\n+            }\n+\n+\n+            return `\n+            <div class=\"flex items-center justify-start gap-3 -mb-4 overflow-hidden\">\n+                <div class=\"flex flex-col items-center justify-center\">\n+                    <div class=\"rounded-full bg-[#ffa726] border-4 border-white w-[68px] h-[68px]\">\n+                        <img src=\"${observationDetail.feeling.image}\" alt=\"\">\n+                    </div>\n+                </div>\n+                <div class=\"flex gap-4 mt-4\">\n+                    <div class=\"text-center\">\n+                        <img src=\"{{ asset('img/cam.PNG') }}\" alt=\"\" class=\"h-6 w-7\">\n+                        <div @click=\"viewo=!viewo\" class=\"font-light text-white font-sm cursor-pointer\">view</div>\n+                    </div>\n+                    <span class=\"text-lg italic font-extrabold text-white whitespace-nowrap ` + (observationDetail\n+                .observation.id ? 'w-screen' : '') + `\">` + obsrName + `</span>\n+                    ` + addicon + `\n+                </div>\n+            </div>\n+            `;\n+        }\n+\n+        let count = 0;\n+        const likedPlaces = {!! json_encode($likedPlaces) !!};\n+\n+        const edited_place = {!! json_encode($edited_place) !!};\n+\n+\n+        for (let i = 0; i < data.length; i++) {\n+\n+            count = count + 1;\n+            place = data[i];\n+\n+\n+\n+            placename = 'No Place';\n+\n+            var addicon = '';\n+\n+            if (place.user_id == userid) {\n+                addicon = `\n+                    <div data-id=\"${place.id}\" class=\"cursor-pointer border-2 transition-all rounded-full bg-[#2d9bf0] border-white w-6 h-6 mt-1 noPlace\">\n+                        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"text-white\">\n+                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 6v12m6-6H6\"></path>\n+                        </svg>\n+                    </div>\n+                    `;\n+            }\n+\n+            if (place.place_detail) {\n+\n+                placename = (place.place_detail.place ? place.place_detail.place.name : '') +\n+                    (place.place_detail.place && place.place_detail.place_child ? '<span class=\"text-xs font-light\"> → ' +\n+                        place.place_detail.place_child.name + '</span>' : '');\n+\n+\n+                addicon = '';\n+            }\n+\n+\n+            const isUserOwner = place.user_id === userid;\n+            const userdescription = place.description !== null ? place.description : '';\n+            // const comment = place.place_comment.comment !== null ? place.place_comment.comment : '';\n+            const comment = place.place_comment?.comment || '';\n+\n+\n+            var textarea = `\n+            <div class=\"flex flex-col items-end w-full mt-4 mb-6\">\n+                <div class=\"px-3 py-2 h-[60px] border-0 focus:outline-none focus:border-0 focus:ring-0 bg-[#2d9bf0] border-0 italic text-white placeholder-white leading-2 text-sm w-10/12\">\n+                ${userdescription}\n+                </div>\n+            </div>\n+            `;\n+\n+            if (isUserOwner) {\n+                textarea = `\n+                <div class=\"flex flex-col items-end w-full mt-4 mb-6\">\n+                <textarea type=\"text\" data-id=\"${place.id}\" id=\"myTextArea\" class=\"h-[60px] border-0 focus:outline-none focus:border-0 focus:ring-0 bg-[#2d9bf0] border-0 italic text-white placeholder-white leading-2 text-sm w-10/12\" placeholder=\"Place for a comment max 120 characters\">${userdescription}</textarea>\n+                </div>\n+            `;\n+            }\n+\n+\n+\n+\n+            username = place.user.name;\n+\n+\n+\n+\n+            const givenDate = new Date(place.created_at); // Replace with your given date\n+            const options = {\n+                year: 'numeric',\n+                month: '2-digit',\n+                day: '2-digit'\n+            };\n+            const formattedDate = givenDate.toLocaleDateString('en-US', options);\n+            // pics = place.image0;\n+            placelatitude = place.latitude;\n+            placelongitude = place.longitude;\n+            var obsrvTotal = Object.keys(place.observations_detail).length;\n+\n+\n+            if ((place.place_detail) && obsrvTotal == 0) {\n+                icon2 = placeIcon;\n+            }\n+            if ((place.place_detail) && obsrvTotal > 0) {\n+                icon2 = bothIcon;\n+            }\n+            if ((place.place_detail) == null && obsrvTotal > 0) {\n+                icon2 = observationIcon;\n+            }\n+\n+\n+\n+\n+            var observationsList = '';\n+\n+            if (obsrvTotal > 0) {\n+                place.observations_detail.forEach(observationDetail => {\n+                    observationsList += generateObservationHTML(observationDetail);\n+                }, '');\n+            } else {\n+                observationsList += generateObservationHTML({\n+                    observation: 'null',\n+                    observation_child: null,\n+\n+                    feeling: {\n+                        image: ''\n+                    }\n+                }, place);\n+            }\n+\n+            var like = false;\n+            if (likedPlaces.includes(place.id)) {\n+                like = true;\n+            }\n+\n+\n+            markerx = L.marker([placelatitude, placelongitude], {\n+                icon: icon2\n+            }).addTo(mymap0).bindPopup(\n+\n+\n+                `<div class=\"bg-[#2d9bf0] p-0 w-full\" x-data=\"{ viewp: false,viewo: false }\">\n+\n+                    <div class=\"flex items-center justify-start gap-3 -mb-4 overflow-hidden\">\n+                        <div class=\"flex flex-col items-center justify-center\">\n+                            <div class=\"rounded-full bg-[#2d9bf0] border-4 border-white p-3 w-[68px] h-[68px]\">\n+                                <img class=\"w-full h-full\" src=\"{{ asset('new_img/image.png') }}\" />\n+                            </div>\n+                        </div>\n+                        <div class=\"flex gap-4 mt-4\">\n+                            <div class=\"text-center\">\n+                                <img src=\"{{ asset('img/cam-2.PNG') }}\" alt=\"\" class=\"h-6 w-7\">\n+                                <div @click=\"viewp=!viewp\" class=\"font-light text-white font-sm\">view</div>\n+                            </div>\n+                            <span class=\"text-lg italic font-extrabold text-white\">\n+                            ` + placename + `\n+                            </span>\n+                            ` + addicon + `\n+\n+\n+                        </div>\n+                    </div>\n+\n+                    ` + observationsList + `\n+\n+                    ` + textarea + `\n+\n+\n+\n+                    <div x-data=\"activeliked(${place.id},${like})\" class=\"absolute bottom-[-5px] w-full left-0 px-[10px]\">\n+                        <div class=\"flex items-center justify-between italic font-light text-white\">\n+                            <div class=\"flex items-center w-2/5 gap-10 likecomment\">\n+                                <div @click=\"comment${place.id}=!comment${place.id}\" class=\"cursor-pointer\"><img src=\"{{ asset('img/msg.PNG') }}\" class=\"h-9 mt-[8px]\"></div>\n+\n+                                <div onclick=\"setlike(${place.id},this)\" @click=\"like${place.id}=!like${place.id}\" class=\"cursor-pointer bg-[#0078d9] text-center text px-2 rounded\">\n+                                    <i class=\"fa fa-heart\"\n+                                    :class=\"like${place.id} ? 'fa-heart text-[#ffc543] liked' : 'fa-heart-o nolike'\"\n+                                    ></i></div>\n+                            </div>\n+                            <div class=\"w-3/5\">Added by ` + username + ` on ` + formattedDate +\n+                `</div>\n+                        </div>\n+\n+                        <div class=\"absolute left-0 w-full\" x-show=\"comment${place.id}\">\n+                            <textarea type=\"text\" data-id=\"${place.id}\" class=\"feedback w-full rounded-xl h-[60px] focus:outline-none focus:border-0 focus:ring-0 bg-[#2d9bf0] border-0 italic text-white placeholder-white leading-2 text-sm w-10/12\" placeholder=\"Put your feedback\">` +\n+                comment + `</textarea>\n+                            <button onclick=\"saveComment(this)\" class=\"font-bold border-2 border-site px-2 py-1 text-white bg-[#2d9bf0] rounded-3xl cursor-pointer float-right\">Save</button>\n+                            <div @click=\"comment${place.id}=false\" class=\"hideCommentBox\"></div>\n+                        </div>\n+                    </div>\n+\n+                    <div x-show=\"viewp\" class=\"fixed top-0 w-full height-[30vh] bg-white rounded\">\n+                  \n+                        <img src=\"storage/uploads/place/${place.place_image}\"  class=\"w-full h-full\" />\n+                    \n+                    </div>\n+                     <div x-show=\"viewo\" class=\"fixed top-0 w-full height-[30vh] bg-white rounded\">\n+                  \n+                        <img src=\"storage/uploads/observation/${place.obsevation_image}\"  class=\"w-full h-full\" />\n+                    \n+                    </div>\n+                </div>\n+\n+\n+             \n+                \n+                \n+                `\n+\n+\n+\n+            );\n+\n+            markerx.on('popupopen', (event) => {\n+                const _id = event.popup._source.placeDetailID;\n+                if (_id && temp_des['_' + _id]) {\n+                    $('body #myTextArea').text(`${temp_des['_'+_id]}`);\n+                }\n+                if (_id && temp_comment['_' + _id]) {\n+                    $('body .feedback').text(`${temp_comment['_'+_id]}`);\n+                }\n+                var typingTimer;\n+                var delay = 1000;\n+\n+                function handleTypingStopped() {\n+                    const data = $('body #myTextArea').val();\n+                    const id = $('body #myTextArea').data('id');\n+\n+                    if (data && id) {\n+                        temp_des['_' + id] = data;\n+                        saveDescription(data, id);\n+                        $('body #myTextArea').blur();\n+                    }\n+                }\n+                $('body #myTextArea').on('input', function() {\n+                    clearTimeout(typingTimer);\n+                    typingTimer = setTimeout(handleTypingStopped, delay);\n+                });\n+\n+\n+\n+            });\n+            markerx.placeDetailID = place.id;\n+            markers[place.id] = markerx;\n+        }\n+\n+        function mylocation() {\n+            getmyposition(success, fail);\n+        }\n+\n+        function activeliked(id, like) {\n+\n+            if (temp_likes.includes(id)) {\n+                like = true;\n+            }\n+            if (temp_dislikes.includes(id)) {\n+                like = false;\n+            }\n+            return {\n+                [`like${id}`]: like,\n+                [`comment${id}`]: false\n+            };\n+        }\n+\n+\n+\n+\n+\n+\n+\n+        function getmyposition(success, fail) {\n+\n+            var is_echo = false;\n+            if (navigator && navigator.geolocation) {\n+                navigator.geolocation.getCurrentPosition(\n+                    function(pos) {\n+\n+                        if (is_echo) {\n+                            return;\n+                        }\n+                        is_echo = true;\n+\n+                        success(pos.coords.latitude, pos.coords.longitude, false);\n+                    },\n+                    function() {\n+                        if (is_echo) {\n+                            return;\n+                        }\n+                        is_echo = true;\n+                        fail();\n+                    }\n+                );\n+            } else {\n+                fail();\n+            }\n+        }\n+\n+        function success(lat, lng, withmarket = true) {\n+            mymap0.flyTo([lat, lng], 19);\n+            if (withmarket) {\n+                L.marker([lat, lng], {\n+                    icon: currentPosIcon\n+                }).addTo(mymap0);\n+            }\n+\n+\n+        }\n+\n+        function fail() {\n+            alert(\"location failed\");\n+        }\n+\n+        function zoom() {\n+            myzoom(success, fail);\n+        }\n+\n+        function myzoom(success, fail) {\n+            var is_echo = false;\n+            if (navigator && navigator.geolocation) {\n+                navigator.geolocation.getCurrentPosition(\n+                    function(pos) {\n+                        if (is_echo) {\n+                            return;\n+                        }\n+                        is_echo = true;\n+                        success(pos.coords.latitude, pos.coords.longitude);\n+                    },\n+                    function() {\n+                        if (is_echo) {\n+                            return;\n+                        }\n+                        is_echo = true;\n+                        fail();\n+                    }\n+                );\n+            } else {\n+                fail();\n+            }\n+        }\n+\n+\n+\n+\n+\n+\n+\n+        $('body').on('click', '.addToMap', function() {\n+            set_empty();\n+\n+\n+        });\n+        $('body').on('click', '.submitData', function() {\n+\n+\n+            $('.subPlacesItems').html('');\n+            $('.subObservationItems').html('');\n+\n+            var place_detail = $(this).closest('.parentDiv').find('.placeActive').data('place');\n+\n+            var observations_detail = [];\n+            $(this).closest('.parentDiv').find('.observationActive').each(function() {\n+                var data = $(this).data('observations');\n+                observations_detail.push(data);\n+            });\n+\n+\n+            var $homeTab = $(this).closest('.parentDiv').find('.observationTabActive').length > 0 ? 'observation' :\n+                'place';\n+            place_data['tab'] = $homeTab;\n+            if ($homeTab == 'place' && place_detail.id) {\n+                place_data['place_id'] = place_detail.id;\n+\n+                if (place_detail.child.length >= 0) {\n+                    $('.placeparent').text(place_detail.name);\n+                    var allHtml = '';\n+                    place_detail.child.forEach(place => {\n+                        allHtml += `\n+                        <div class=\"flex flex-col items-center cursor-pointer\" @click=\"subactive='SPL_${place.id}'\">\n+                                            <div data-subplaceid=\"${place.id}\" class=\"SPL_${place.id} w-[76px] h-[76px] rounded-full bg-[#2d9bf0]\"\n+                                            :class=\"subactive == 'SPL_${place.id}' ? 'border-4 border-[#12CDD4] subplaceActive' : ''\">\n+                                                <div class=\"flex items-center justify-center h-full align-item-center\">\n+                                                    <img src=\"{{ asset('new_img/image.png') }}\" class=\"w-7 h-7\" />\n+                                                </div>\n+                                            </div>\n+                                            <span class=\"mt-4 text-base font-normal text-black\">${place.name}</span>\n+                                        </div>\n+                        `;\n+                    });\n+                    $('.subPlacesItems').html(allHtml);\n+\n+                    $('.subModeltrigerPlace').click();\n+\n+                    if (edited_place && edited_place.place_detail.place_child_id) {\n+                        setTimeout(() => {\n+                            $('.SPL_' + edited_place.place_detail.place_child_id).click();\n+                        }, 200);\n+                    }\n+\n+                } else {\n+                    submitDetailData(place_data);\n+                }\n+\n+\n+            } else if ($homeTab == 'observation') {\n+                var allHtml = '';\n+\n+\n+                observations_detail.forEach(function(observation) {\n+\n+\n+                    allHtml +=\n+                        `<div data-observation_id=\"${observation.id}\"><div class=\"mb-4\">${observation.name}</div>`;\n+\n+\n+\n+                    if (observation.child.length === 0) {\n+                        allHtml += `\n+                            <div data-subobservation_id=\"\" class=\"flex items-center justify-between mb-10\">\n+                               ${getFeelingHTML(observation)}\n+                            </div>\n+                        `;\n+                    } else {\n+                        observation.child.forEach(observ => {\n+                            allHtml += `\n+                            <div data-subobservation_id=\"${observ.id}\" class=\"flex items-center justify-between gap-2 mb-10 lg:gap-20\">\n+                                <div class=\"flex flex-col items-center w-[160px]\">\n+                                    <div class=\"w-[76px] h-[76px] rounded-full bg-[#ffa726]\">\n+                                        <div class=\"flex items-center justify-center h-full align-item-center\">\n+                                            <img src=\"{{ asset('new_img/sad.png') }}\" alt=\"\"\n+                                                            class=\"w-8 h-8 -mr-1\"> <img\n+                                                            src=\"{{ asset('new_img/happy.png') }}\" alt=\"\"\n+                                                            class=\"w-8 h-8 -ml-1\">\n+                                        </div>\n+                                    </div>\n+                                    <span class=\"mt-1 text-base font-normal text-black\">${observ.name}</span>\n+                                </div>\n+\n+                                ${getFeelingHTML(observation,observ)}\n+                            </div>`;\n+                        });\n+                    }\n+\n+                    allHtml += `</div>`;\n+                });\n+\n+                $('.subObservationItems').html(allHtml);\n+\n+\n+\n+                $('.subModeltrigerObservation').click();\n+\n+\n+                setTimeout(() => {\n+                    if (edited_place && edited_place.observations_detail && edited_place.observations_detail\n+                        .length > 0) {\n+                        edited_place.observations_detail.forEach(function(observation) {\n+                            if (observation.observation_child_id) {\n+                                clickClass = 'feel_' + observation.observation_id + '_' +\n+                                    observation.observation_child_id + '_' + observation.feeling_id;\n+                            } else {\n+                                clickClass = 'feel_' + observation.observation_id + '_' +\n+                                    observation.feeling_id;\n+                            }\n+                            $('.' + clickClass).click();\n+                        });\n+                    }\n+                }, 200);\n+\n+            }\n+\n+\n+\n+\n+\n+        });\n+\n+\n+        function getFeelingHTML(observation, child = '') {\n+            return `\n+                                <div x-data=\"{ feelActive${observation.id}: 'feel_${observation.id}_1' }\" class=\"flex flex-wrap items-center justify-center w-full gap-2 italic font-semibold \">\n+                                    @foreach ($feelings as $feeling)\n+                                        <div data-feeling_id=\"{{ $feeling->id }}\"\n+                                            @click=\"feelActive${observation.id}='feel_${observation.id}_{{ $feeling->id }}'\"\n+                                            class=\"feel_${observation.id}${child.id ? '_' + child.id : ''}_{{ $feeling->id }} cursor-pointer rounded-full\"\n+                                            :class=\"feelActive${observation.id} == 'feel_${observation.id}_{{ $feeling->id }}' ? 'border-4 border-[#12CDD4] feelingActive' : ''\"\n+                                            >\n+                                            <img class=\"w-12 h-12 sm:w-16 sm:h-16\" src=\"{{ asset($feeling->image) }}\" alt=\"\">\n+                                        </div>\n+                                    @endforeach\n+                                </div>\n+                    `;\n+        }\n+\n+        var fileInput_place = '';\n+        var fileInput_observation = '';\n+\n+        $('body').on('click', '.submitDataAll', function() {\n+\n+            var $SubTab = $(this).closest('.parentDiv').find('.subobservationTabActive').length > 0 ?\n+                'observation' : 'place';\n+\n+            if ($SubTab == 'place') {\n+                var subplace_id = $(this).closest('.parentDiv').find('.subplaceActive').data('subplaceid');\n+                fileInput_place = $(\".place_image\")[0].files[0];\n+                place_data['place_description'] = $(this).closest('.parentDiv').find('.place_description').val();\n+                place_data['child_place_id'] = subplace_id ? subplace_id : '';\n+\n+\n+\n+            } else if ($SubTab == 'observation') {\n+                fileInput_observation = $(\".observation_image\")[0].files[0];\n+                place_data['observation_description'] = $(this).closest('.parentDiv').find(\n+                    '.observation_description').val();\n+                var dataList = [];\n+                $(this).closest('.parentDiv').find('.feelingActive').each(function() {\n+                    var observationId = $(this).closest('[data-observation_id]').data('observation_id');\n+                    var subobservationId = $(this).closest('[data-subobservation_id]').data(\n+                        'subobservation_id');\n+                    var feelingId = $(this).data('feeling_id');\n+\n+                    dataList.push({\n+                        observation_id: observationId,\n+                        child_observation_id: subobservationId,\n+                        feeling_id: feelingId\n+                    });\n+                });\n+                place_data['observations'] = dataList;\n+\n+            }\n+            // console.log(place_data);\n+            submitDetailData(place_data);\n+\n+        });\n+\n+\n+\n+\n+\n+        $('body').on('click', '.noPlace', function() {\n+\n+            set_empty();\n+\n+\n+            place_data['place_detail_id'] = $(this).data('id');\n+            place_data['update'] = 'place';\n+            $('.openPlaceModel').click();\n+            setTimeout(() => {\n+                var hrefValue = $('.tabNewLink').attr('href');\n+                $('.tabNewLink').attr('href', hrefValue + '/' + $(this).data('id'));\n+            }, 200);\n+        });\n+\n+        $('body').on('click', '.noObservation', function() {\n+\n+            set_empty();\n+\n+            place_data['place_detail_id'] = $(this).data('id');\n+            place_data['update'] = 'observation';\n+\n+            $('.OpenObservationModel').click();\n+            setTimeout(() => {\n+                var hrefValue = $('.tabNewLink').attr('href');\n+                $('.tabNewLink').attr('href', hrefValue + '/' + $(this).data('id'));\n+            }, 200);\n+        });\n+\n+        function set_empty() {\n+            place_data['place_id'] = '';\n+            place_data['place_detail_id'] = '';\n+            place_data['child_place_id'] = '';\n+            place_data['observations'] = '';\n+            place_data['place_description'] = '';\n+            place_data['observation_description'] = '';\n+            place_data['tab'] = 'place';\n+            place_data['update'] = '';\n+        }\n+\n+\n+\n+        var totalswal = 0;\n+\n+        function submitDetailData(place_data) {\n+\n+\n+\n+            place_data['update'] = place_data.tab;\n+\n+            const formData = new FormData();\n+            if (fileInput_place) {\n+                formData.append('place_image', fileInput_place);\n+            }\n+            if (fileInput_observation) {\n+                formData.append('observation_image', fileInput_observation);\n+            }\n+\n+            formData.append('place_data', JSON.stringify(place_data));\n+\n+            $.ajaxSetup({\n+                headers: {\n+                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n+                }\n+            });\n+\n+\n+            $.ajax({\n+                type: 'POST',\n+                url: \"/map/add/place\",\n+                data: formData,\n+                contentType: false,\n+                processData: false,\n+                success: function(data) {\n+                    var reverse_tab = data.tab == 'place' ? 'observation' : 'place';\n+                    if (data.status == 'success') {\n+\n+                        if (totalswal >= 1) {\n+                            window.location.href = '/';\n+                        } else {\n+                            totalswal = totalswal + 1;\n+                            place_data['place_detail_id'] = data.place_detail_id;\n+                            swal({\n+                                title: \"Success!\",\n+                                text: data.tab.charAt(0).toUpperCase() + data.tab.slice(1) + \" \" + data\n+                                    .msg + \" Do you want to add \" + reverse_tab + \" tag?\",\n+                                icon: \"success\",\n+                                buttons: [\"Close\", \"Continue\"],\n+                            }).then((userConfirmed) => {\n+                                if (userConfirmed) {\n+                                    if (reverse_tab == 'place') {\n+                                        $('.openPlaceModel').click();\n+                                    } else {\n+                                        $('.OpenObservationModel').click();\n+                                    }\n+                                } else {\n+                                    window.location.href = '/';\n+                                    // $('.closeAddProcess').click();\n+                                }\n+                            });\n+                        }\n+\n+\n+                    }\n+\n+                }\n+\n+            });\n+\n+        }\n+\n+        function setlike(id, e) {\n+\n+            if ($(e).find('i').hasClass('nolike')) {\n+                temp_likes.push(id);\n+                temp_dislikes = temp_dislikes.filter(function(value, index, arr) {\n+                    return value != id;\n+                });\n+            } else {\n+                temp_likes = temp_likes.filter(function(value, index, arr) {\n+                    return value != id;\n+                });\n+                temp_dislikes.push(id);\n+            }\n+\n+\n+            $.ajaxSetup({\n+                headers: {\n+                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n+                }\n+            });\n+            $.ajax({\n+                url: '/set-like',\n+                type: 'POST',\n+                data: {\n+                    id: id\n+                }\n+            });\n+        }\n+\n+        function saveDescription(data, id) {\n+            $.ajaxSetup({\n+                headers: {\n+                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n+                }\n+            });\n+            $.ajax({\n+                url: '/save-des',\n+                type: 'POST',\n+                data: {\n+                    data: data,\n+                    id: id\n+                }\n+            });\n+        }\n+\n+        function saveComment(e) {\n+            const data = $(e).parent().find('.feedback').val();\n+            const id = $(e).parent().find('.feedback').data('id');\n+\n+            $(e).parent().find('.hideCommentBox').click();\n+\n+            temp_comment['_' + id] = data;\n+\n+            $.ajaxSetup({\n+                headers: {\n+                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n+                }\n+            });\n+            $.ajax({\n+                url: '/save-comment',\n+                type: 'POST',\n+                data: {\n+                    data: data,\n+                    id: id\n+                }\n+            });\n+        }\n+\n+        $(document).ready(function() {\n+\n+            if (edit_id && edit_id != 0) {\n+                $('.openPlaceModel').click();\n+                // $('.OpenObservationModel').click();\n+            }\n+        });\n+    </script>\n+@endsection\n"
                },
                {
                    "date": 1701284007512,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,1490 @@\n+@php\n+    $locale = session()->get('locale');\n+    if ($locale == null) {\n+        $locale = 'en';\n+    }\n+@endphp\n+@extends('layouts.app')\n+\n+@section('main')\n+    <div data-barba=\"container\">\n+        <div class=\"flex flex-col mx-auto\">\n+            <div class=\"\">\n+                <div class=\"relative\">\n+\n+\n+                    @if (backpack_auth()->user()->id)\n+                        <div class=\"fixed right-0 z-20 flex items-center justify-center p-4 rounded-full cursor-pointer top-4\"\n+                            id=\"openPopup_profile\">\n+                            <img class=\"object-cover border-2 rounded-full border-site h-14 w-14\"\n+                                src=\"/storage/uploads/avatar/{{ backpack_auth()->user()->avatar }}\" alt=\"\">\n+                        </div>\n+                    @endif\n+\n+                    <div onclick=\"mylocation()\"\n+                        class=\"fixed z-20 flex items-center justify-center p-4 bg-transparent rounded-full cursor-pointer h-14 w-20 bottom-[6.8rem] left-4\">\n+                        <img src=\"{{ asset('img/location.png') }}\" class=\"w-20 h-12\" alt=\"\">\n+                    </div>\n+                    <a href=\"/filter\"\n+                        class=\"fixed z-20 flex items-center justify-center p-1 text-xl bg-white border-2 border-black rounded-full h-14 w-14 bottom-28 right-4\">\n+                        <div class=\"\"> <img src=\"{{ asset('img/eye.png') }}\" class=\"w-8 h-6\" alt=\"\"></div>\n+                    </a>\n+\n+                    <div class=\"flex justify-center items-center\">\n+                        <span class=\"fixed z-[30] top-10 mr-20 text-center\">\n+                            Explore the map to view the activities of other users.\n+                        </span>\n+                    </div>\n+\n+\n+                    <div id=\"map\" class=\"absolute w-[100vw] z-10 h-[90vh]\"></div>\n+                </div>\n+\n+                <div x-data=\"{ modelOpen: false, showMore: false, hidetab: 'no', tab: 'place', searchQuery: '' }\">\n+                    <div\n+                        class=\"fixed bottom-0 z-50 w-full pt-3 pb-8 text-xl font-semibold text-center shadow-xl rounded-t-3xl bg-gray-50 \">\n+\n+                        <div class=\"flex items-center justify-center\">\n+                            <div class=\"py-0.5 w-14 mb-3 rounded-full px-4 bg-black\">\n+\n+                            </div>\n+\n+                        </div>\n+\n+\n+                        <div class=\"flex\">\n+                            <div class=\"absolute left-16 bottom-[18px] \">\n+                                <div class=\"pl-4 py-3 pr-2.5 bg-[#ffa726] border-2 border-white rounded-full h-14 w-14\">\n+                                    <span class=\"w-10 h-14\"><img src=\"{{ asset('img/search.png') }}\" class=\"w-9 h-7\"\n+                                            alt=\"\"></span>\n+                                </div>\n+\n+                            </div>\n+                            <div class=\"absolute left-6 bottom-[18px] \">\n+                                <div class=\"p-3 border-2 border-white rounded-full bg-site h-14 w-14\">\n+                                    <img src=\"{{ asset('new_img/image.png') }}\" class=\"w-7 h-7\" alt=\"\">\n+                                </div>\n+\n+                            </div>\n+                        </div>\n+\n+                        <div class=\"w-full pt-4 addToMap\" @click=\"tab ='place'; modelOpen =true; searchQuery=''\">\n+                            <span\n+                                class=\"border-2 border-site w-full px-12 py-4 text-white bg-[#2d9bf0] rounded-3xl cursor-pointer\">\n+                                Add to Pin\n+                            </span>\n+\n+                        </div>\n+\n+\n+                        <div class=\"absolute right-5 bottom-[25px] \">\n+                            <div class=\"p-1 rounded-full bg-site w-9\">\n+                                <span class=\"italic font-bold text-white\">\n+                                    i\n+                                </span>\n+                            </div>\n+                        </div>\n+\n+                    </div>\n+\n+\n+                    <div class=\"parentDiv\" x-data=\"{ height: 'auto' }\">f\n+                        <button class=\"hidden OpenObservationModel\"\n+                            @click=\"modelOpen=true; showMore = true; hidetab = 'place'; tab='observation'; height = '100vh';\"></button>\n+                        <button class=\"hidden openPlaceModel\"\n+                            @click=\"modelOpen=true; showMore = true; hidetab = 'observation'; tab='place'; height = '100vh';\"></button>\n+\n+                        <div x-cloak x-show=\"modelOpen \" class=\"fixed bottom-0 z-50 overflow-y-auto\"\n+                            aria-labelledby=\"modal-title\" role=\"dialog\" aria-modal=\"true\">\n+                            <div class=\"flex items-end justify-center text-center\">\n+                                <div x-cloak @click=\"modelOpen = false; hidetab = 'no'\" x-show=\"modelOpen\"\n+                                    class=\"fixed inset-0 transition-opacity bg-gray-500 closeAddProcess bg-opacity-40\"\n+                                    aria-hidden=\"true\">\n+                                </div>\n+\n+                                <div x-cloak x-show=\"modelOpen\"\n+                                    x-transition:enter=\"transition ease-out duration-300 transform\"\n+                                    x-transition:enter-start=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n+                                    x-transition:enter-end=\"opacity-100 translate-y-0 sm:scale-100\" {{-- x-transition:leave=\"transition ease-in duration-200 transform\" --}}\n+                                    class=\"transition-height z-50 w-screen pb-16 transition-all transform bg-white h-[50%] shadow-xl mt-60 rounded-t-3xl\"\n+                                    :style=\"'height: ' + height\" :class=\"{ 'overflow-auto': showMore }\">\n+\n+                                    <div class=\"p-6 lg:p-12\">\n+\n+                                        @if ($edit_id)\n+                                            <a href=\"/\" class=\"block mb-4 closeAddProcess\" class=\"mb-4\">\n+                                                <img src=\"{{ asset('img/icons/arrow.png') }}\" class=\"arrow\">\n+                                            </a>\n+                                        @else\n+                                            <div class=\"mb-4 closeAddProcess\"\n+                                                @click=\"modelOpen=false; showMore = false; hidetab = 'no'; height = 'auto';\"\n+                                                x-show=\"showMore\" class=\"mb-4\">\n+                                                <img src=\"{{ asset('img/icons/arrow.png') }}\" class=\"arrow\">\n+                                            </div>\n+                                        @endif\n+\n+\n+\n+\n+\n+                                        <div class=\"flex items-center gap-4 justity-between\">\n+                                            <input type=\"text\" class=\"w-full px-2 py-2 bg-white rounded-full\"\n+                                                placeholder=\"Choose tags or add new city layers\" name=\"searchInput\"\n+                                                x-model=\"searchQuery\" @keyup=\"showMore = true; height = '100vh'\">\n+\n+                                            <a :href=\"tab === 'place' ?\n+                                                '/add-new/place{{ $edit_id ? '/' . urlencode($edit_id) : '' }}' :\n+                                                '/add-new/observation{{ $edit_id ? '/' . urlencode($edit_id) : '' }}'\"\n+                                                class=\"p-2 transition-all border-2 rounded-full tabNewLink\"\n+                                                :class=\"tab == 'place' ? 'bg-[#2d9bf0] border-[#2d9bf0]' :\n+                                                    'bg-[#ffa726] border-[#ffa726]'\">\n+                                                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\"\n+                                                    stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-6 h-6 text-white\">\n+                                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\"\n+                                                        d=\"M12 6v12m6-6H6\" />\n+                                                </svg>\n+                                            </a>\n+\n+                                        </div>\n+\n+                                        <div class=\"mt-2\">\n+                                            Drop a pin to share observations, opinions and ideas.\n+                                        </div>\n+\n+\n+\n+\n+\n+                                        <div class=\"flex items-center justify-center mt-12 homeTabs\">\n+                                            <div class=\"-mr-1 cursor-pointer\" x-show=\"hidetab!='place'\"\n+                                                @click=\"tab='place'\">\n+                                                <div class=\"flex flex-col w-[84px] justify-center items-center\">\n+                                                    <div class=\"bg-[#2d9bf0] border-2 border-white rounded-full \"\n+                                                        :class=\"tab == 'place' || tab == 'place1' ?\n+                                                            'bg-[#2d9bf0] z-10 p-[26px] placeTabActive' :\n+                                                            'bg-[#2d9bf0]/70 p-[40px]'\">\n+                                                        <img src=\"{{ asset('new_img/image.png') }}\" class=\"w-7 h-7\"\n+                                                            :class=\"tab == 'place' || tab == 'place1' ? 'block' : 'hidden'\"\n+                                                            id=\"place\" alt=\"\">\n+                                                    </div>\n+                                                    <div class=\"text-sm font-semibold text-center\"\n+                                                        :class=\"tab == 'place' ? 'text-black' : 'text-black/50'\">\n+                                                        Browse Places\n+                                                    </div>\n+                                                </div>\n+                                            </div>\n+                                            <div class=\"-ml-1 cursor-pointer\" x-show=\"hidetab!='observation'\"\n+                                                @click=\"tab='observation'\">\n+                                                <div class=\"flex flex-col w-[75px] justify-center items-center\">\n+\n+                                                    <div class=\"flex items-center justify-center border-2 border-white rounded-full \"\n+                                                        :class=\"tab == 'observation' || tab == 'observation1' ?\n+                                                            'bg-[#ffa726] z-10 p-[20px] observationTabActive' :\n+                                                            'bg-[#ffa726]/70 p-[40px]'\">\n+                                                        <div class=\"flex items-center justify-center w-10 h-10 text-2xl\"\n+                                                            :class=\"tab == 'observation' || tab == 'observation1' ? 'block' :\n+                                                                'hidden'\"\n+                                                            id=\"observation\" alt=\"\">🔍</div>\n+                                                    </div>\n+\n+                                                    <div class=\"text-sm font-semibold text-center \"\n+                                                        :class=\"tab == 'observation' ? 'text-black' : 'text-black/50'\">\n+                                                        Browse Observation\n+                                                    </div>\n+                                                </div>\n+                                            </div>\n+                                        </div>\n+\n+                                        <div x-data=\"{ active: '{{ isset($edited_place->placeDetail->place_id) ? 'PL_' . $edited_place->placeDetail->place_id : '' }}' }\">\n+\n+                                            <div class=\"flex items-start justify-center gap-10 mt-6 mb-6 italic font-semibold all-places\"\n+                                                x-show=\"tab=='place'\">\n+\n+                                                <div class=\"grid grid-cols-3 gap-10 italic font-semibold\"\n+                                                    id=\"searchResults2Pls\">\n+\n+\n+                                                    @foreach ($allPlaces as $key => $place)\n+                                                        <div x-show=\"(showMore || {{ $key }} < 2) && (searchQuery === '' || '{{ strtolower($place->name) }}'.includes(searchQuery.toLowerCase()))\"\n+                                                            class=\"flex flex-col items-center cursor-pointer\"\n+                                                            @click=\"active='PL_{{ $place->id }}'\">\n+                                                            <div data-place=\"{{ json_encode(['id' => $place->id, 'name' => $place->name, 'child' => $place->subplaces]) }}\"\n+                                                                class=\"w-[76px] h-[76px] rounded-full bg-[#2d9bf0]\"\n+                                                                :class=\"active == 'PL_{{ $place->id }}' ?\n+                                                                    'border-4 border-[#12CDD4] placeActive' : ''\">\n+                                                                <div\n+                                                                    class=\"flex items-center justify-center h-full align-item-center\">\n+                                                                    <img src=\"{{ asset('new_img/image.png') }}\"\n+                                                                        class=\"w-7 h-7\" />\n+                                                                </div>\n+                                                            </div>\n+                                                            <span\n+                                                                class=\"mt-4 font-normal text-black\">{{ $place->name }}</span>\n+                                                        </div>\n+                                                    @endforeach\n+\n+                                                    <div x-show=\"!showMore\" class=\"cursor-pointer\">\n+                                                        <button @click=\"showMore = true; height = '100vh'\">\n+                                                            <div class=\"rounded-full border-site border-4 p-[22px]\">\n+                                                                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\"\n+                                                                    viewBox=\"0 0 24 24\" stroke-width=\"3\"\n+                                                                    stroke=\"currentColor\"\n+                                                                    class=\"w-6 h-6 font-bold color-site\">\n+                                                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\"\n+                                                                        d=\"M12 6v12m6-6H6\" />\n+                                                                </svg>\n+                                                            </div>\n+                                                            <div class=\"mt-4 font-normal text-black\">See more</div>\n+                                                        </button>\n+                                                    </div>\n+                                                </div>\n+                                            </div>\n+                                        </div>\n+                                        <div class=\"\" x-data=\"{ active: '' }\">\n+                                            <div class=\"flex items-center justify-center gap-10 mt-6 mb-6 italic font-semibold\"\n+                                                x-show=\"tab=='observation'\">\n+                                                <div class=\"grid grid-cols-3 gap-10 italic font-semibold\"\n+                                                    id=\"searchResults2Obs\">\n+\n+                                                    @foreach ($allObservations as $key => $observation)\n+                                                        <div x-data=\"{ active: '{{ $edited_place && $edited_place->observationsDetail->contains('observation_id', $observation->id) ? 'OB_' . $observation->id : '' }}' }\"\n+                                                            x-show=\"(showMore || {{ $key }} < 2) && (searchQuery === '' || '{{ strtolower($observation->name) }}'.includes(searchQuery.toLowerCase()))\"\n+                                                            class=\"flex flex-col items-center cursor-pointer\"\n+                                                            @click=\"active = !active ? 'OB_{{ $observation->id }}' : false\">\n+\n+                                                            <div data-observations=\"{{ json_encode(['id' => $observation->id, 'name' => $observation->name, 'child' => $observation->subobservs]) }}\"\n+                                                                class=\"w-[76px] h-[76px] rounded-full bg-[#ffa726]\"\n+                                                                :class=\"active == 'OB_{{ $observation->id }}' ?\n+                                                                    'border-4 border-[#12CDD4] observationActive' : ''\">\n+                                                                <div\n+                                                                    class=\"flex items-center justify-center h-full align-item-center\">\n+                                                                    <img src=\"{{ asset('new_img/sad.png') }}\"\n+                                                                        alt=\"\" class=\"w-8 h-8 -mr-1\">\n+                                                                    <img src=\"{{ asset('new_img/happy.png') }}\"\n+                                                                        alt=\"\" class=\"w-8 h-8 -ml-1\">\n+                                                                </div>\n+                                                            </div>\n+                                                            <span\n+                                                                class=\"mt-4 font-normal text-black\">{{ $observation->name }}</span>\n+                                                        </div>\n+                                                    @endforeach\n+\n+\n+\n+                                                    <div x-show=\"!showMore\"\n+                                                        class=\"flex flex-col items-center justify-center cursor-pointer\">\n+                                                        <button @click=\"showMore = true; height = '100vh'\" type=\"button\">\n+                                                            <div class=\"rounded-full border-[#ffa726] border-4  p-[22px]\">\n+                                                                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\"\n+                                                                    viewBox=\"0 0 24 24\" stroke-width=\"3\"\n+                                                                    stroke=\"currentColor\"\n+                                                                    class=\"w-6 h-6 font-bold text-[#ffa726]\">\n+                                                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\"\n+                                                                        d=\"M12 6v12m6-6H6\" />\n+                                                                </svg>\n+\n+                                                            </div>\n+                                                            <div class=\"mt-4 font-normal text-black\">See more</div>\n+                                                        </button>\n+\n+                                                    </div>\n+\n+                                                </div>\n+\n+\n+\n+                                            </div>\n+                                        </div>\n+\n+\n+                                    </div>\n+\n+                                </div>\n+                            </div>\n+                        </div>\n+                        <div x-cloak x-show=\"modelOpen\" class=\"fixed bottom-0 z-50 w-full py-4 bg-white\">\n+                            <div class=\"flex items-center justify-center\">\n+                                <div\n+                                    class=\"submitData border-2 border-site flex cursor-pointer items-center justify-center gap-2 px-8 py-3 text-lg font-extrabold text-white bg-[#2d9bf0] rounded-3xl hover:shadow  hover:bg-[#268ede] transition-all\">\n+                                    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\"\n+                                        stroke-width=\"3\" stroke=\"currentColor\" class=\"w-6 h-6\">\n+                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\"\n+                                            d=\"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z\" />\n+                                    </svg>\n+                                    Add new\n+                                </div>\n+                            </div>\n+                        </div>\n+                    </div>\n+\n+\n+\n+\n+\n+\n+\n+\n+                </div>\n+\n+\n+                <div class=\"parentDiv\" x-data=\"{ subModelOpen: false, subtab: '' }\" x-cloak x-show=\"subModelOpen\">\n+\n+                    <button class=\"hidden subModeltrigerPlace\" @click=\"subModelOpen=true;subtab='place'\"></button>\n+\n+                    <button class=\"hidden subModeltrigerObservation\"\n+                        @click=\"subModelOpen=true;subtab='observation'\"></button>\n+\n+\n+                    <div x-data=\"{ subactive: '{{ isset($edited_place->placeDetail->place_child_id) ? 'SPL_' . $edited_place->placeDetail->place_child_id : '' }}' }\"\n+                        class=\"fixed h-screen overflow-auto bottom-0 bg-white z-[60] w-full pb-8 text-xl font-semibold text-center shadow-xl\">\n+\n+                        <div class=\"p-6 lg:p-12\">\n+\n+                            <div @click=\"subModelOpen=false;subactive='';subtab=''\"\n+                                class=\"mb-4 OpenObservationModel openPlaceModel\">\n+                                <img src=\"{{ asset('img/icons/arrow.png') }}\" class=\"arrow\">\n+                            </div>\n+\n+\n+                            <div class=\"flex items-center justify-center mt-12 homeTabs\">\n+                                <div class=\"-mr-1 cursor-pointer\" x-show=\"subtab=='place'\">\n+                                    <div class=\"flex flex-col w-[84px] justify-center items-center\">\n+                                        <div class=\"bg-[#2d9bf0] border-2 border-white rounded-full\"\n+                                            :class=\"subtab == 'place' ?\n+                                                'bg-[#2d9bf0] z-10 p-[26px] subplaceTabActive' :\n+                                                'bg-[#2d9bf0]/70 p-[40px]'\">\n+                                            <img src=\"{{ asset('new_img/image.png') }}\" class=\"w-7 h-7\"\n+                                                :class=\"subtab == 'place' ? 'block' : 'hidden'\" alt=\"\">\n+                                        </div>\n+\n+                                    </div>\n+                                </div>\n+                                <div class=\"-ml-1 cursor-pointer\" x-show=\"subtab=='observation'\">\n+                                    <div class=\"flex flex-col w-[75px] justify-center items-center\">\n+\n+                                        <div class=\"flex items-center justify-center border-2 border-white rounded-full\"\n+                                            :class=\"subtab == 'observation' ?\n+                                                'bg-[#ffa726] z-10 p-[20px] subobservationTabActive' :\n+                                                'bg-[#ffa726]/70 p-[40px]'\">\n+                                            <div class=\"flex items-center justify-center w-10 h-10 text-2xl\"\n+                                                :class=\"subtab == 'observation' ? 'block' :\n+                                                    'hidden'\">\n+                                                <div class=\"flex items-center justify-center h-full align-item-center\">\n+                                                    <img src=\"{{ asset('new_img/sad.png') }}\" alt=\"\"\n+                                                        class=\"w-8 h-8 -mr-1\"> <img\n+                                                        src=\"{{ asset('new_img/happy.png') }}\" alt=\"\"\n+                                                        class=\"w-8 h-8 -ml-1\">\n+                                                </div>\n+                                            </div>\n+                                        </div>\n+\n+\n+                                    </div>\n+                                </div>\n+                            </div>\n+\n+                            <div>\n+                                <div x-show=\"subtab=='place'\" class=\"flex flex-col items-center justify-center mt-12\">\n+                                    <div class=\"mb-10 placeparent\"></div>\n+\n+                                    <div class=\"grid grid-cols-3 gap-10 italic font-semibold subPlacesItems\">\n+\n+                                    </div>\n+                                    <div class=\"mt-4 text-center font-normal\">\n+                                        Tap \"submit\" to pin this place to the map and share it with other users.\n+                                        Provide more details by adding a description, and uploading a photo.\n+\n+                                    </div>\n+                                    <div class=\"flex items-center justify-between w-2/3 pb-12 pb-16 pt-28\">\n+                                        <label class=\"flex flex-col items-center gap-1 cursor-pointer\" for=\"image-upload\">\n+                                            <input id=\"image-upload\" type=\"file\" class=\"hidden place_image\"\n+                                                accept=\".jpg, .png\">\n+                                            <img src=\"{{ asset('img/cam-2.PNG') }}\" alt=\"\" class=\"w-10 h-9\">\n+                                            <div class=\"text-sm\">Upload image</div>\n+                                        </label>\n+\n+                                        <div class=\"relative\" x-data=\"{ placeText: false }\">\n+                                            <div @click=\"placeText = !placeText\"\n+                                                class=\"flex flex-col items-center gap-1 cursor-pointer\">\n+                                                <img src=\"{{ asset('img/msg.PNG') }}\" alt=\"\" class=\"w-10 h-9\">\n+                                                <div class=\"text-sm\">Add description</div>\n+                                            </div>\n+                                            <textarea class=\"font-normal place_description absolute px-2 py-2 bg-white rounded-xl w-[300px] right-0\"\n+                                                x-show=\"placeText\">{{ $edited_place && $edited_place->place_description ? $edited_place->place_description : '' }}</textarea>\n+                                        </div>\n+\n+                                    </div>\n+                                </div>\n+\n+                                <div x-show=\"subtab=='observation'\" class=\"flex flex-col items-center justify-center\">\n+                                    <div class=\"grid gap-10 mt-12 italic font-semibold grid-cols subObservationItems\">\n+\n+\n+\n+\n+                                    </div>\n+\n+\n+\n+                                    <div class=\"mt-4 text-center font-normal\">\n+                                        Tap \"submit\" to pin this observation to the map and share it with other users.\n+                                        Provide more details through rating, adding a description, and uploading a photo.\n+\n+                                    </div>\n+\n+\n+                                    <div class=\"flex items-center justify-between w-2/3 pt-20 pb-16 mb-12\">\n+                                        <label for=\"obser-image-upload\"\n+                                            class=\"flex flex-col items-center gap-1 cursor-pointer\">\n+                                            <input id=\"obser-image-upload\" type=\"file\"\n+                                                class=\"hidden observation_image\" accept=\".jpg, .png\">\n+                                            <img src=\"{{ asset('img/cam.PNG') }}\" alt=\"\" class=\"w-10 h-9\">\n+                                            <div class=\"text-sm\">Upload image</div>\n+                                        </label>\n+\n+\n+\n+                                        <div class=\"relative\" x-data=\"{ observationText: false }\">\n+                                            <div @click=\"observationText = !observationText\"\n+                                                class=\"flex flex-col items-center gap-1 cursor-pointer\">\n+                                                <img src=\"{{ asset('img/msg-2.PNG') }}\" alt=\"\" class=\"w-10 h-9\">\n+                                                <div class=\"text-sm\">Add description</div>\n+                                            </div>\n+                                            <textarea class=\"font-normal observation_description absolute px-2 py-2 bg-white rounded-xl w-[300px] right-0\"\n+                                                x-show=\"observationText\">{{ $edited_place && $edited_place->obsevation_description ? $edited_place->obsevation_description : '' }}</textarea>\n+                                        </div>\n+\n+                                    </div>\n+\n+                                </div>\n+                            </div>\n+\n+\n+                        </div>\n+\n+                    </div>\n+\n+\n+                    <div class=\"fixed w-full bottom-0 z-[60] bg-white py-4\">\n+                        <div class=\"flex items-center justify-center gap-6\">\n+                            <div @click=\"subModelOpen=false;\"\n+                                class=\"flex items-center justify-center gap-2 px-8 py-3 text-lg font-extrabold transition-all bg-white border-2 cursor-pointer border-site color-site rounded-3xl\">\n+                                Close\n+                            </div>\n+\n+                            <div\n+                                class=\"submitDataAll flex cursor-pointer items-center border-2 border-site justify-center gap-2 px-8 py-3 text-lg font-extrabold text-white bg-[#2d9bf0] rounded-3xl  hover:bg-[#268ede] transition-all\">\n+                                Submit\n+                            </div>\n+\n+                        </div>\n+                    </div>\n+\n+\n+                </div>\n+\n+\n+            </div>\n+        </div>\n+    </div>\n+\n+\n+    <div id=\"popup_profile\"\n+        class=\"p-6 lg:p-12 w-full h-screen lg:w-4/12 fixed bg-white shadow-md ml-[-2px] overflow-y-auto right-0 hidden z-50 transform translate-x-full transition-transform duration-300\">\n+        <a onclick=\"close_pop_profile()\">\n+            <img src=\"{{ asset('img/icons/arrow.png') }}\" class=\"arrow\">\n+\n+        </a>\n+        <div class=\"p-4\">\n+\n+            <div class=\"top\">\n+                <div class=\"topo\">\n+\n+                    <label for=\"image\" class=\"cursor-pointer new\">\n+                        <img class=\"object-cover w-24 h-24 border-blue-500 rounded-full border-7 nimage mimage\"\n+                            src=\"/storage/uploads/avatar/{{ backpack_auth()->user()->avatar }}\" alt=\"\">\n+\n+                    </label>\n+                </div>\n+                <div class=\"tops\">\n+                    <div class=\"toptaxt\">Hello \"{{ backpack_auth()->user()->name }}\"!</div>\n+                    <a href=\"/profile\" class=\"vieprofile\">View Profile</a>\n+                </div>\n+\n+\n+            </div>\n+            <br />\n+            <br />\n+            <div class=\"list\">\n+                <a href=\"/\" class=\"lbox\">\n+                    <div\n+                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n+                        +</div>\n+                    <div class=\"ltax\">Add to map</div>\n+                </a>\n+                <a href=\"/dashboard\" class=\"lbox\">\n+                    <div\n+                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n+                        ▄</div>\n+                    <div class=\"ltax\">Dashboard</div>\n+                </a>\n+                <a href=\"/community-achievements\" class=\"lbox\">\n+                    <div\n+                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n+                        ⌃</div>\n+                    <div class=\"ltax\">Community achievements</div>\n+                </a>\n+                <a href=\"/about-us\" class=\"lbox\">\n+                    <div\n+                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n+                        ?</div>\n+                    <div class=\"ltax\">About City Layers</div>\n+                </a>\n+                <a href=\"/contact-us\" class=\"lbox\">\n+                    <div\n+                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n+                        •</div>\n+\n+                    <div class=\"ltax\">Term & contact</div>\n+                </a>\n+                <a href=\"/privacy-policy\" class=\"lbox\">\n+                    <div\n+                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n+                        !</div>\n+\n+                    <div class=\"ltax\">Privacy Policy and Terms of Service</div>\n+                </a>\n+                <a href=\"/impressum-accessibility\" class=\"lbox\">\n+                    <div\n+                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n+                        i</div>\n+                    <div class=\"ltax\">Impressum & accessibility</div>\n+                </a>\n+                <a href=\"/admin/logout\" class=\"lbox\">\n+                    <div\n+                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n+                        i</div>\n+                    <div class=\"ltax\">Sign out</div>\n+                </a>\n+            </div>\n+            <br />\n+            <div class=\"belo\">\n+                <div class=\"mapping\">Maps are public and visible to all users. Your username will be shown along with your\n+                    pins and added layers.</div>\n+                <div class=\"cursor-pointer closebt\" onclick=\"close_pop_profile()\">Close</div>\n+            </div>\n+        </div>\n+    </div>\n+\n+    <script>\n+        const openPopupButton = document.getElementById('openPopup_profile');\n+        const popup = document.getElementById('popup_profile');\n+\n+        openPopupButton.addEventListener('click', () => {\n+            popup.style.transform = 'translateX(0)';\n+            popup.style.display = 'block';\n+        });\n+\n+        function close_pop_profile() {\n+\n+\n+            popup.style.transform = 'translateX(100%)';\n+            setTimeout(() => {\n+                popup.style.display = 'none';\n+            }, 300);\n+        }\n+    </script>\n+\n+\n+    <script>\n+        data = {!! json_encode($all_data) !!};\n+\n+        userid = {!! json_encode($userid) !!};\n+\n+        markers = {};\n+        const edit_id = {{ $edit_id ? $edit_id : '0' }};\n+        let marker = null;\n+\n+        let pin = [48.6890, 7.14086];\n+        if (data && data[0] && typeof data[0].latitude !== 'undefined' && typeof data[0].longitude !== 'undefined') {\n+            pin = [data[0].latitude, data[0].longitude];\n+        }\n+        let mymap0 = L.map('map').setView(pin, 6);\n+\n+        // https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png\n+\n+        osmLayer0 = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {\n+            subdomains: 'abcd',\n+            minZoom: 0,\n+            maxZoom: 19,\n+            ext: 'png'\n+        }).addTo(mymap0);\n+        mymap0.zoomControl.remove();\n+        mymap0.addLayer(osmLayer0);\n+        mymap0.touchZoom.enable();\n+        mymap0.scrollWheelZoom.enable();\n+\n+        let place_data = {\n+            place_id: '',\n+            child_place_id: '',\n+            observations: '',\n+            place_description: '',\n+            observation_description: '',\n+            latitude: '',\n+            longitude: '',\n+            tab: 'place',\n+        };\n+\n+\n+        var temp_des = [];\n+        var temp_comment = [];\n+        var temp_likes = [];\n+        var temp_dislikes = [];\n+\n+\n+        var currentPosIcon = L.icon({\n+            iconUrl: '/new_img/current-pos.svg', // Replace with the path to your icon image\n+            iconSize: [62, 62], // Adjust the icon size as needed\n+            iconAnchor: [16, 16], // Adjust the anchor point of the icon\n+            popupAnchor: [0, -16] // Adjust the popup anchor for the icon\n+        });\n+        var currentPosIcon = L.divIcon({\n+            className: 'transparent-icon',\n+            iconSize: [64, 64], // Adjust the size of the icon including the border\n+            iconAnchor: [32, 32], // Adjust the anchor point of the icon\n+            html: '<div class=\"border-2 rounded-full border-site\"><img src=\"/new_img/current-pos.svg\" /></div>'\n+        });\n+\n+\n+        var placeIcon = L.divIcon({\n+            className: 'transparent-icon',\n+            html: `<div class=\"rounded-full bg-[#2d9bf0] border-2 border-white flex justify-center items-center p-4 w-[64px] h-[64px]\">\n+                    <img src=\"{{ asset('new_img/image.png') }}\" class=\"w-full h-full\" />\n+                </div>`\n+        });\n+        var bothIcon = L.divIcon({\n+            className: 'transparent-icon',\n+            html: `<div class=\"rounded-full bg-[#2d9bf0] border-2 border-white flex justify-center items-center w-[64px] h-[64px]\">\n+                        <div class=\"flex items-center justify-center h-full align-item-center\">\n+                            <img src=\"{{ asset('new_img/sad.png') }}\" alt=\"\" class=\"w-6 h-6 -mr-2\">\n+                            <img src=\"{{ asset('new_img/image.png') }}\" class=\"z-20 w-6 h-6\" />\n+                            <img src=\"{{ asset('new_img/happy.png') }}\" alt=\"\" class=\"w-6 h-6 -ml-2\">\n+                        </div>\n+                </div>`\n+        });\n+        var observationIcon = L.divIcon({\n+            className: 'transparent-icon',\n+            html: `<div class=\"rounded-full bg-[#ffa726] border-2 border-white flex justify-center items-center p-4 w-[64px] h-[64px]\">\n+                    <div class=\"flex\">\n+                     <img src=\"{{ asset('new_img/sad.png') }}\" alt=\"\" class=\"-mr-1 w-7 h-7\">\n+                     <img src=\"{{ asset('new_img/happy.png') }}\" alt=\"\" class=\"-ml-1 w-7 h-7\">\n+                    </div>\n+                 </div>`\n+        });\n+\n+\n+\n+        if (navigator.geolocation) {\n+\n+            //wait 3 seconds to get position\n+            getposition(success, fail)\n+\n+        } else {\n+            alert(\"Geolocation is not supported by this browser.\");\n+        }\n+\n+\n+        function getposition(success, fail) {\n+\n+            var is_echo = false;\n+            if (navigator && navigator.geolocation) {\n+                navigator.geolocation.getCurrentPosition(\n+                    function(pos) {\n+                        if (is_echo) {\n+                            return;\n+                        }\n+                        is_echo = true;\n+\n+                        place_data['latitude'] = pos.coords.latitude;\n+                        place_data['longitude'] = pos.coords.longitude;\n+\n+                        success(pos.coords.latitude, pos.coords.longitude);\n+                    },\n+                    function() {\n+                        if (is_echo) {\n+                            return;\n+                        }\n+                        is_echo = true;\n+                        fail();\n+                    }\n+                );\n+            } else {\n+                fail();\n+            }\n+\n+        }\n+\n+\n+\n+\n+        function success(lat, lng) {\n+            mymap0.setView([lat, lng], 10);\n+\n+            L.marker([lat, lng], {\n+                icon: currentPosIcon\n+            }).addTo(mymap0);\n+        }\n+\n+        function fail() {\n+            alert(\"location failed\");\n+        }\n+\n+\n+\n+        function generateObservationHTML(observationDetail, place) {\n+            var obsrName = '';\n+            var addicon = '';\n+            if (observationDetail.observation.name) {\n+                obsrName = (observationDetail.observation ? observationDetail.observation.name : '') +\n+                    (observationDetail.observation && observationDetail.observation_child ?\n+                        '<span class=\"text-xs font-light\"> → ' + observationDetail.observation_child.name + '</span>' : '');\n+            } else {\n+                obsrName = 'No Observation';\n+                if (place.user_id == userid) {\n+                    addicon = `\n+                    <div data-id=\"${place.id}\" class=\"cursor-pointer border-2 transition-all rounded-full bg-[#2d9bf0] border-white w-6 h-6 mt-1 noObservation\">\n+                        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"text-white\">\n+                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 6v12m6-6H6\"></path>\n+                        </svg>\n+                    </div>\n+                    `;\n+                }\n+            }\n+\n+\n+            return `\n+            <div class=\"flex items-center justify-start gap-3 -mb-4 overflow-hidden\">\n+                <div class=\"flex flex-col items-center justify-center\">\n+                    <div class=\"rounded-full bg-[#ffa726] border-4 border-white w-[68px] h-[68px]\">\n+                        <img src=\"${observationDetail.feeling.image}\" alt=\"\">\n+                    </div>\n+                </div>\n+                <div class=\"flex gap-4 mt-4\">\n+                    <div @click=\"viewo=!viewo\" class=\"text-center cursor-pointer\">\n+                        <img src=\"{{ asset('img/cam.PNG') }}\" alt=\"\" class=\"h-6 w-7\">\n+                        <div class=\"font-light text-white font-sm\">view</div>\n+                    </div>\n+                    <span class=\"text-lg italic font-extrabold text-white whitespace-nowrap ` + (observationDetail\n+                .observation.id ? 'w-screen' : '') + `\">` + obsrName + `</span>\n+                    ` + addicon + `\n+                </div>\n+            </div>\n+            `;\n+        }\n+\n+        let count = 0;\n+        const likedPlaces = {!! json_encode($likedPlaces) !!};\n+\n+        const edited_place = {!! json_encode($edited_place) !!};\n+\n+\n+        for (let i = 0; i < data.length; i++) {\n+\n+            count = count + 1;\n+            place = data[i];\n+\n+\n+\n+            placename = 'No Place';\n+\n+            var addicon = '';\n+\n+            if (place.user_id == userid) {\n+                addicon = `\n+                    <div data-id=\"${place.id}\" class=\"cursor-pointer border-2 transition-all rounded-full bg-[#2d9bf0] border-white w-6 h-6 mt-1 noPlace\">\n+                        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"text-white\">\n+                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 6v12m6-6H6\"></path>\n+                        </svg>\n+                    </div>\n+                    `;\n+            }\n+\n+            if (place.place_detail) {\n+\n+                placename = (place.place_detail.place ? place.place_detail.place.name : '') +\n+                    (place.place_detail.place && place.place_detail.place_child ? '<span class=\"text-xs font-light\"> → ' +\n+                        place.place_detail.place_child.name + '</span>' : '');\n+\n+\n+                addicon = '';\n+            }\n+\n+\n+            const isUserOwner = place.user_id === userid;\n+            const userdescription = place.description !== null ? place.description : '';\n+            // const comment = place.place_comment.comment !== null ? place.place_comment.comment : '';\n+            const comment = place.place_comment?.comment || '';\n+\n+\n+            var textarea = `\n+            <div class=\"flex flex-col items-end w-full mt-4 mb-6\">\n+                <div class=\"px-3 py-2 h-[60px] border-0 focus:outline-none focus:border-0 focus:ring-0 bg-[#2d9bf0] border-0 italic text-white placeholder-white leading-2 text-sm w-10/12\">\n+                ${userdescription}\n+                </div>\n+            </div>\n+            `;\n+\n+            if (isUserOwner) {\n+                textarea = `\n+                <div class=\"flex flex-col items-end w-full mt-4 mb-6\">\n+                <textarea type=\"text\" data-id=\"${place.id}\" id=\"myTextArea\" class=\"h-[60px] border-0 focus:outline-none focus:border-0 focus:ring-0 bg-[#2d9bf0] border-0 italic text-white placeholder-white leading-2 text-sm w-10/12\" placeholder=\"Place for a comment max 120 characters\">${userdescription}</textarea>\n+                </div>\n+            `;\n+            }\n+\n+\n+\n+\n+            username = place.user.name;\n+\n+\n+\n+\n+            const givenDate = new Date(place.created_at); // Replace with your given date\n+            const options = {\n+                year: 'numeric',\n+                month: '2-digit',\n+                day: '2-digit'\n+            };\n+            const formattedDate = givenDate.toLocaleDateString('en-US', options);\n+            // pics = place.image0;\n+            placelatitude = place.latitude;\n+            placelongitude = place.longitude;\n+            var obsrvTotal = Object.keys(place.observations_detail).length;\n+\n+\n+            if ((place.place_detail) && obsrvTotal == 0) {\n+                icon2 = placeIcon;\n+            }\n+            if ((place.place_detail) && obsrvTotal > 0) {\n+                icon2 = bothIcon;\n+            }\n+            if ((place.place_detail) == null && obsrvTotal > 0) {\n+                icon2 = observationIcon;\n+            }\n+\n+\n+\n+\n+            var observationsList = '';\n+\n+            if (obsrvTotal > 0) {\n+                place.observations_detail.forEach(observationDetail => {\n+                    observationsList += generateObservationHTML(observationDetail);\n+                }, '');\n+            } else {\n+                observationsList += generateObservationHTML({\n+                    observation: 'null',\n+                    observation_child: null,\n+\n+                    feeling: {\n+                        image: ''\n+                    }\n+                }, place);\n+            }\n+\n+            var like = false;\n+            if (likedPlaces.includes(place.id)) {\n+                like = true;\n+            }\n+\n+\n+            markerx = L.marker([placelatitude, placelongitude], {\n+                icon: icon2\n+            }).addTo(mymap0).bindPopup(\n+\n+\n+                `<div class=\"bg-[#2d9bf0] p-0 w-full\" x-data=\"{ viewp: false,viewo: false }\">\n+\n+                    <div class=\"flex items-center justify-start gap-3 -mb-4 overflow-hidden\">\n+                        <div class=\"flex flex-col items-center justify-center\">\n+                            <div class=\"rounded-full bg-[#2d9bf0] border-4 border-white p-3 w-[68px] h-[68px]\">\n+                                <img class=\"w-full h-full\" src=\"{{ asset('new_img/image.png') }}\" />\n+                            </div>\n+                        </div>\n+                        <div class=\"flex gap-4 mt-4\">\n+                            <div class=\"text-center\">\n+                                <img src=\"{{ asset('img/cam-2.PNG') }}\" alt=\"\" class=\"h-6 w-7\">\n+                                <div @click=\"viewp=!viewp\" class=\"font-light text-white font-sm\">view</div>\n+                            </div>\n+                            <span class=\"text-lg italic font-extrabold text-white\">\n+                            ` + placename + `\n+                            </span>\n+                            ` + addicon + `\n+\n+\n+                        </div>\n+                    </div>\n+\n+                    ` + observationsList + `\n+\n+                    ` + textarea + `\n+\n+\n+\n+                    <div x-data=\"activeliked(${place.id},${like})\" class=\"absolute bottom-[-5px] w-full left-0 px-[10px]\">\n+                        <div class=\"flex items-center justify-between italic font-light text-white\">\n+                            <div class=\"flex items-center w-2/5 gap-10 likecomment\">\n+                                <div @click=\"comment${place.id}=!comment${place.id}\" class=\"cursor-pointer\"><img src=\"{{ asset('img/msg.PNG') }}\" class=\"h-9 mt-[8px]\"></div>\n+\n+                                <div onclick=\"setlike(${place.id},this)\" @click=\"like${place.id}=!like${place.id}\" class=\"cursor-pointer bg-[#0078d9] text-center text px-2 rounded\">\n+                                    <i class=\"fa fa-heart\"\n+                                    :class=\"like${place.id} ? 'fa-heart text-[#ffc543] liked' : 'fa-heart-o nolike'\"\n+                                    ></i></div>\n+                            </div>\n+                            <div class=\"w-3/5\">Added by ` + username + ` on ` + formattedDate +\n+                `</div>\n+                        </div>\n+\n+                        <div class=\"absolute left-0 w-full\" x-show=\"comment${place.id}\">\n+                            <textarea type=\"text\" data-id=\"${place.id}\" class=\"feedback w-full rounded-xl h-[60px] focus:outline-none focus:border-0 focus:ring-0 bg-[#2d9bf0] border-0 italic text-white placeholder-white leading-2 text-sm w-10/12\" placeholder=\"Put your feedback\">` +\n+                comment + `</textarea>\n+                            <button onclick=\"saveComment(this)\" class=\"font-bold border-2 border-site px-2 py-1 text-white bg-[#2d9bf0] rounded-3xl cursor-pointer float-right\">Save</button>\n+                            <div @click=\"comment${place.id}=false\" class=\"hideCommentBox\"></div>\n+                        </div>\n+                    </div>\n+\n+                    <div x-show=\"viewp\" class=\"fixed top-0 w-full height-[30vh] bg-white rounded\">\n+                  \n+                        <img src=\"storage/uploads/place/${place.place_image}\"  class=\"w-full h-full\" />\n+                    \n+                    </div>\n+                     <div x-show=\"viewo\" class=\"fixed top-0 w-full height-[30vh] bg-white rounded\">\n+                  \n+                        <img src=\"storage/uploads/observation/${place.obsevation_image}\"  class=\"w-full h-full\" />\n+                    \n+                    </div>\n+                </div>\n+\n+\n+             \n+                \n+                \n+                `\n+\n+\n+\n+            );\n+\n+            markerx.on('popupopen', (event) => {\n+                const _id = event.popup._source.placeDetailID;\n+                if (_id && temp_des['_' + _id]) {\n+                    $('body #myTextArea').text(`${temp_des['_'+_id]}`);\n+                }\n+                if (_id && temp_comment['_' + _id]) {\n+                    $('body .feedback').text(`${temp_comment['_'+_id]}`);\n+                }\n+                var typingTimer;\n+                var delay = 1000;\n+\n+                function handleTypingStopped() {\n+                    const data = $('body #myTextArea').val();\n+                    const id = $('body #myTextArea').data('id');\n+\n+                    if (data && id) {\n+                        temp_des['_' + id] = data;\n+                        saveDescription(data, id);\n+                        $('body #myTextArea').blur();\n+                    }\n+                }\n+                $('body #myTextArea').on('input', function() {\n+                    clearTimeout(typingTimer);\n+                    typingTimer = setTimeout(handleTypingStopped, delay);\n+                });\n+\n+\n+\n+            });\n+            markerx.placeDetailID = place.id;\n+            markers[place.id] = markerx;\n+        }\n+\n+        function mylocation() {\n+            getmyposition(success, fail);\n+        }\n+\n+        function activeliked(id, like) {\n+\n+            if (temp_likes.includes(id)) {\n+                like = true;\n+            }\n+            if (temp_dislikes.includes(id)) {\n+                like = false;\n+            }\n+            return {\n+                [`like${id}`]: like,\n+                [`comment${id}`]: false\n+            };\n+        }\n+\n+\n+\n+\n+\n+\n+\n+        function getmyposition(success, fail) {\n+\n+            var is_echo = false;\n+            if (navigator && navigator.geolocation) {\n+                navigator.geolocation.getCurrentPosition(\n+                    function(pos) {\n+\n+                        if (is_echo) {\n+                            return;\n+                        }\n+                        is_echo = true;\n+\n+                        success(pos.coords.latitude, pos.coords.longitude, false);\n+                    },\n+                    function() {\n+                        if (is_echo) {\n+                            return;\n+                        }\n+                        is_echo = true;\n+                        fail();\n+                    }\n+                );\n+            } else {\n+                fail();\n+            }\n+        }\n+\n+        function success(lat, lng, withmarket = true) {\n+            mymap0.flyTo([lat, lng], 19);\n+            if (withmarket) {\n+                L.marker([lat, lng], {\n+                    icon: currentPosIcon\n+                }).addTo(mymap0);\n+            }\n+\n+\n+        }\n+\n+        function fail() {\n+            alert(\"location failed\");\n+        }\n+\n+        function zoom() {\n+            myzoom(success, fail);\n+        }\n+\n+        function myzoom(success, fail) {\n+            var is_echo = false;\n+            if (navigator && navigator.geolocation) {\n+                navigator.geolocation.getCurrentPosition(\n+                    function(pos) {\n+                        if (is_echo) {\n+                            return;\n+                        }\n+                        is_echo = true;\n+                        success(pos.coords.latitude, pos.coords.longitude);\n+                    },\n+                    function() {\n+                        if (is_echo) {\n+                            return;\n+                        }\n+                        is_echo = true;\n+                        fail();\n+                    }\n+                );\n+            } else {\n+                fail();\n+            }\n+        }\n+\n+\n+\n+\n+\n+\n+\n+        $('body').on('click', '.addToMap', function() {\n+            set_empty();\n+\n+\n+        });\n+        $('body').on('click', '.submitData', function() {\n+\n+\n+            $('.subPlacesItems').html('');\n+            $('.subObservationItems').html('');\n+\n+            var place_detail = $(this).closest('.parentDiv').find('.placeActive').data('place');\n+\n+            var observations_detail = [];\n+            $(this).closest('.parentDiv').find('.observationActive').each(function() {\n+                var data = $(this).data('observations');\n+                observations_detail.push(data);\n+            });\n+\n+\n+            var $homeTab = $(this).closest('.parentDiv').find('.observationTabActive').length > 0 ? 'observation' :\n+                'place';\n+            place_data['tab'] = $homeTab;\n+            if ($homeTab == 'place' && place_detail.id) {\n+                place_data['place_id'] = place_detail.id;\n+\n+                if (place_detail.child.length >= 0) {\n+                    $('.placeparent').text(place_detail.name);\n+                    var allHtml = '';\n+                    place_detail.child.forEach(place => {\n+                        allHtml += `\n+                        <div class=\"flex flex-col items-center cursor-pointer\" @click=\"subactive='SPL_${place.id}'\">\n+                                            <div data-subplaceid=\"${place.id}\" class=\"SPL_${place.id} w-[76px] h-[76px] rounded-full bg-[#2d9bf0]\"\n+                                            :class=\"subactive == 'SPL_${place.id}' ? 'border-4 border-[#12CDD4] subplaceActive' : ''\">\n+                                                <div class=\"flex items-center justify-center h-full align-item-center\">\n+                                                    <img src=\"{{ asset('new_img/image.png') }}\" class=\"w-7 h-7\" />\n+                                                </div>\n+                                            </div>\n+                                            <span class=\"mt-4 text-base font-normal text-black\">${place.name}</span>\n+                                        </div>\n+                        `;\n+                    });\n+                    $('.subPlacesItems').html(allHtml);\n+\n+                    $('.subModeltrigerPlace').click();\n+\n+                    if (edited_place && edited_place.place_detail.place_child_id) {\n+                        setTimeout(() => {\n+                            $('.SPL_' + edited_place.place_detail.place_child_id).click();\n+                        }, 200);\n+                    }\n+\n+                } else {\n+                    submitDetailData(place_data);\n+                }\n+\n+\n+            } else if ($homeTab == 'observation') {\n+                var allHtml = '';\n+\n+\n+                observations_detail.forEach(function(observation) {\n+\n+\n+                    allHtml +=\n+                        `<div data-observation_id=\"${observation.id}\"><div class=\"mb-4\">${observation.name}</div>`;\n+\n+\n+\n+                    if (observation.child.length === 0) {\n+                        allHtml += `\n+                            <div data-subobservation_id=\"\" class=\"flex items-center justify-between mb-10\">\n+                               ${getFeelingHTML(observation)}\n+                            </div>\n+                        `;\n+                    } else {\n+                        observation.child.forEach(observ => {\n+                            allHtml += `\n+                            <div data-subobservation_id=\"${observ.id}\" class=\"flex items-center justify-between gap-2 mb-10 lg:gap-20\">\n+                                <div class=\"flex flex-col items-center w-[160px]\">\n+                                    <div class=\"w-[76px] h-[76px] rounded-full bg-[#ffa726]\">\n+                                        <div class=\"flex items-center justify-center h-full align-item-center\">\n+                                            <img src=\"{{ asset('new_img/sad.png') }}\" alt=\"\"\n+                                                            class=\"w-8 h-8 -mr-1\"> <img\n+                                                            src=\"{{ asset('new_img/happy.png') }}\" alt=\"\"\n+                                                            class=\"w-8 h-8 -ml-1\">\n+                                        </div>\n+                                    </div>\n+                                    <span class=\"mt-1 text-base font-normal text-black\">${observ.name}</span>\n+                                </div>\n+\n+                                ${getFeelingHTML(observation,observ)}\n+                            </div>`;\n+                        });\n+                    }\n+\n+                    allHtml += `</div>`;\n+                });\n+\n+                $('.subObservationItems').html(allHtml);\n+\n+\n+\n+                $('.subModeltrigerObservation').click();\n+\n+\n+                setTimeout(() => {\n+                    if (edited_place && edited_place.observations_detail && edited_place.observations_detail\n+                        .length > 0) {\n+                        edited_place.observations_detail.forEach(function(observation) {\n+                            if (observation.observation_child_id) {\n+                                clickClass = 'feel_' + observation.observation_id + '_' +\n+                                    observation.observation_child_id + '_' + observation.feeling_id;\n+                            } else {\n+                                clickClass = 'feel_' + observation.observation_id + '_' +\n+                                    observation.feeling_id;\n+                            }\n+                            $('.' + clickClass).click();\n+                        });\n+                    }\n+                }, 200);\n+\n+            }\n+\n+\n+\n+\n+\n+        });\n+\n+\n+        function getFeelingHTML(observation, child = '') {\n+            return `\n+                                <div x-data=\"{ feelActive${observation.id}: 'feel_${observation.id}_1' }\" class=\"flex flex-wrap items-center justify-center w-full gap-2 italic font-semibold \">\n+                                    @foreach ($feelings as $feeling)\n+                                        <div data-feeling_id=\"{{ $feeling->id }}\"\n+                                            @click=\"feelActive${observation.id}='feel_${observation.id}_{{ $feeling->id }}'\"\n+                                            class=\"feel_${observation.id}${child.id ? '_' + child.id : ''}_{{ $feeling->id }} cursor-pointer rounded-full\"\n+                                            :class=\"feelActive${observation.id} == 'feel_${observation.id}_{{ $feeling->id }}' ? 'border-4 border-[#12CDD4] feelingActive' : ''\"\n+                                            >\n+                                            <img class=\"w-12 h-12 sm:w-16 sm:h-16\" src=\"{{ asset($feeling->image) }}\" alt=\"\">\n+                                        </div>\n+                                    @endforeach\n+                                </div>\n+                    `;\n+        }\n+\n+        var fileInput_place = '';\n+        var fileInput_observation = '';\n+\n+        $('body').on('click', '.submitDataAll', function() {\n+\n+            var $SubTab = $(this).closest('.parentDiv').find('.subobservationTabActive').length > 0 ?\n+                'observation' : 'place';\n+\n+            if ($SubTab == 'place') {\n+                var subplace_id = $(this).closest('.parentDiv').find('.subplaceActive').data('subplaceid');\n+                fileInput_place = $(\".place_image\")[0].files[0];\n+                place_data['place_description'] = $(this).closest('.parentDiv').find('.place_description').val();\n+                place_data['child_place_id'] = subplace_id ? subplace_id : '';\n+\n+\n+\n+            } else if ($SubTab == 'observation') {\n+                fileInput_observation = $(\".observation_image\")[0].files[0];\n+                place_data['observation_description'] = $(this).closest('.parentDiv').find(\n+                    '.observation_description').val();\n+                var dataList = [];\n+                $(this).closest('.parentDiv').find('.feelingActive').each(function() {\n+                    var observationId = $(this).closest('[data-observation_id]').data('observation_id');\n+                    var subobservationId = $(this).closest('[data-subobservation_id]').data(\n+                        'subobservation_id');\n+                    var feelingId = $(this).data('feeling_id');\n+\n+                    dataList.push({\n+                        observation_id: observationId,\n+                        child_observation_id: subobservationId,\n+                        feeling_id: feelingId\n+                    });\n+                });\n+                place_data['observations'] = dataList;\n+\n+            }\n+            // console.log(place_data);\n+            submitDetailData(place_data);\n+\n+        });\n+\n+\n+\n+\n+\n+        $('body').on('click', '.noPlace', function() {\n+\n+            set_empty();\n+\n+\n+            place_data['place_detail_id'] = $(this).data('id');\n+            place_data['update'] = 'place';\n+            $('.openPlaceModel').click();\n+            setTimeout(() => {\n+                var hrefValue = $('.tabNewLink').attr('href');\n+                $('.tabNewLink').attr('href', hrefValue + '/' + $(this).data('id'));\n+            }, 200);\n+        });\n+\n+        $('body').on('click', '.noObservation', function() {\n+\n+            set_empty();\n+\n+            place_data['place_detail_id'] = $(this).data('id');\n+            place_data['update'] = 'observation';\n+\n+            $('.OpenObservationModel').click();\n+            setTimeout(() => {\n+                var hrefValue = $('.tabNewLink').attr('href');\n+                $('.tabNewLink').attr('href', hrefValue + '/' + $(this).data('id'));\n+            }, 200);\n+        });\n+\n+        function set_empty() {\n+            place_data['place_id'] = '';\n+            place_data['place_detail_id'] = '';\n+            place_data['child_place_id'] = '';\n+            place_data['observations'] = '';\n+            place_data['place_description'] = '';\n+            place_data['observation_description'] = '';\n+            place_data['tab'] = 'place';\n+            place_data['update'] = '';\n+        }\n+\n+\n+\n+        var totalswal = 0;\n+\n+        function submitDetailData(place_data) {\n+\n+\n+\n+            place_data['update'] = place_data.tab;\n+\n+            const formData = new FormData();\n+            if (fileInput_place) {\n+                formData.append('place_image', fileInput_place);\n+            }\n+            if (fileInput_observation) {\n+                formData.append('observation_image', fileInput_observation);\n+            }\n+\n+            formData.append('place_data', JSON.stringify(place_data));\n+\n+            $.ajaxSetup({\n+                headers: {\n+                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n+                }\n+            });\n+\n+\n+            $.ajax({\n+                type: 'POST',\n+                url: \"/map/add/place\",\n+                data: formData,\n+                contentType: false,\n+                processData: false,\n+                success: function(data) {\n+                    var reverse_tab = data.tab == 'place' ? 'observation' : 'place';\n+                    if (data.status == 'success') {\n+\n+                        if (totalswal >= 1) {\n+                            window.location.href = '/';\n+                        } else {\n+                            totalswal = totalswal + 1;\n+                            place_data['place_detail_id'] = data.place_detail_id;\n+                            swal({\n+                                title: \"Success!\",\n+                                text: data.tab.charAt(0).toUpperCase() + data.tab.slice(1) + \" \" + data\n+                                    .msg + \" Do you want to add \" + reverse_tab + \" tag?\",\n+                                icon: \"success\",\n+                                buttons: [\"Close\", \"Continue\"],\n+                            }).then((userConfirmed) => {\n+                                if (userConfirmed) {\n+                                    if (reverse_tab == 'place') {\n+                                        $('.openPlaceModel').click();\n+                                    } else {\n+                                        $('.OpenObservationModel').click();\n+                                    }\n+                                } else {\n+                                    window.location.href = '/';\n+                                    // $('.closeAddProcess').click();\n+                                }\n+                            });\n+                        }\n+\n+\n+                    }\n+\n+                }\n+\n+            });\n+\n+        }\n+\n+        function setlike(id, e) {\n+\n+            if ($(e).find('i').hasClass('nolike')) {\n+                temp_likes.push(id);\n+                temp_dislikes = temp_dislikes.filter(function(value, index, arr) {\n+                    return value != id;\n+                });\n+            } else {\n+                temp_likes = temp_likes.filter(function(value, index, arr) {\n+                    return value != id;\n+                });\n+                temp_dislikes.push(id);\n+            }\n+\n+\n+            $.ajaxSetup({\n+                headers: {\n+                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n+                }\n+            });\n+            $.ajax({\n+                url: '/set-like',\n+                type: 'POST',\n+                data: {\n+                    id: id\n+                }\n+            });\n+        }\n+\n+        function saveDescription(data, id) {\n+            $.ajaxSetup({\n+                headers: {\n+                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n+                }\n+            });\n+            $.ajax({\n+                url: '/save-des',\n+                type: 'POST',\n+                data: {\n+                    data: data,\n+                    id: id\n+                }\n+            });\n+        }\n+\n+        function saveComment(e) {\n+            const data = $(e).parent().find('.feedback').val();\n+            const id = $(e).parent().find('.feedback').data('id');\n+\n+            $(e).parent().find('.hideCommentBox').click();\n+\n+            temp_comment['_' + id] = data;\n+\n+            $.ajaxSetup({\n+                headers: {\n+                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n+                }\n+            });\n+            $.ajax({\n+                url: '/save-comment',\n+                type: 'POST',\n+                data: {\n+                    data: data,\n+                    id: id\n+                }\n+            });\n+        }\n+\n+        $(document).ready(function() {\n+\n+            if (edit_id && edit_id != 0) {\n+                $('.openPlaceModel').click();\n+                // $('.OpenObservationModel').click();\n+            }\n+        });\n+    </script>\n+@endsection\n"
                },
                {
                    "date": 1701284076628,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -958,1498 +958,9 @@\n                   \n                         <img src=\"storage/uploads/place/${place.place_image}\"  class=\"w-full h-full\" />\n                     \n                     </div>\n-                     <div x-show=\"viewo\" class=\"fixed top-0 w-full height-[30vh] bg-white rounded\">\n-                  \n-                        <img src=\"storage/uploads/observation/${place.obsevation_image}\"  class=\"w-full h-full\" />\n                     \n-                    </div>\n-                </div>\n-\n-\n-             \n-                \n-                \n-                `\n-\n-\n-\n-            );\n-\n-            markerx.on('popupopen', (event) => {\n-                const _id = event.popup._source.placeDetailID;\n-                if (_id && temp_des['_' + _id]) {\n-                    $('body #myTextArea').text(`${temp_des['_'+_id]}`);\n-                }\n-                if (_id && temp_comment['_' + _id]) {\n-                    $('body .feedback').text(`${temp_comment['_'+_id]}`);\n-                }\n-                var typingTimer;\n-                var delay = 1000;\n-\n-                function handleTypingStopped() {\n-                    const data = $('body #myTextArea').val();\n-                    const id = $('body #myTextArea').data('id');\n-\n-                    if (data && id) {\n-                        temp_des['_' + id] = data;\n-                        saveDescription(data, id);\n-                        $('body #myTextArea').blur();\n-                    }\n-                }\n-                $('body #myTextArea').on('input', function() {\n-                    clearTimeout(typingTimer);\n-                    typingTimer = setTimeout(handleTypingStopped, delay);\n-                });\n-\n-\n-\n-            });\n-            markerx.placeDetailID = place.id;\n-            markers[place.id] = markerx;\n-        }\n-\n-        function mylocation() {\n-            getmyposition(success, fail);\n-        }\n-\n-        function activeliked(id, like) {\n-\n-            if (temp_likes.includes(id)) {\n-                like = true;\n-            }\n-            if (temp_dislikes.includes(id)) {\n-                like = false;\n-            }\n-            return {\n-                [`like${id}`]: like,\n-                [`comment${id}`]: false\n-            };\n-        }\n-\n-\n-\n-\n-\n-\n-\n-        function getmyposition(success, fail) {\n-\n-            var is_echo = false;\n-            if (navigator && navigator.geolocation) {\n-                navigator.geolocation.getCurrentPosition(\n-                    function(pos) {\n-\n-                        if (is_echo) {\n-                            return;\n-                        }\n-                        is_echo = true;\n-\n-                        success(pos.coords.latitude, pos.coords.longitude, false);\n-                    },\n-                    function() {\n-                        if (is_echo) {\n-                            return;\n-                        }\n-                        is_echo = true;\n-                        fail();\n-                    }\n-                );\n-            } else {\n-                fail();\n-            }\n-        }\n-\n-        function success(lat, lng, withmarket = true) {\n-            mymap0.flyTo([lat, lng], 19);\n-            if (withmarket) {\n-                L.marker([lat, lng], {\n-                    icon: currentPosIcon\n-                }).addTo(mymap0);\n-            }\n-\n-\n-        }\n-\n-        function fail() {\n-            alert(\"location failed\");\n-        }\n-\n-        function zoom() {\n-            myzoom(success, fail);\n-        }\n-\n-        function myzoom(success, fail) {\n-            var is_echo = false;\n-            if (navigator && navigator.geolocation) {\n-                navigator.geolocation.getCurrentPosition(\n-                    function(pos) {\n-                        if (is_echo) {\n-                            return;\n-                        }\n-                        is_echo = true;\n-                        success(pos.coords.latitude, pos.coords.longitude);\n-                    },\n-                    function() {\n-                        if (is_echo) {\n-                            return;\n-                        }\n-                        is_echo = true;\n-                        fail();\n-                    }\n-                );\n-            } else {\n-                fail();\n-            }\n-        }\n-\n-\n-\n-\n-\n-\n-\n-        $('body').on('click', '.addToMap', function() {\n-            set_empty();\n-\n-\n-        });\n-        $('body').on('click', '.submitData', function() {\n-\n-\n-            $('.subPlacesItems').html('');\n-            $('.subObservationItems').html('');\n-\n-            var place_detail = $(this).closest('.parentDiv').find('.placeActive').data('place');\n-\n-            var observations_detail = [];\n-            $(this).closest('.parentDiv').find('.observationActive').each(function() {\n-                var data = $(this).data('observations');\n-                observations_detail.push(data);\n-            });\n-\n-\n-            var $homeTab = $(this).closest('.parentDiv').find('.observationTabActive').length > 0 ? 'observation' :\n-                'place';\n-            place_data['tab'] = $homeTab;\n-            if ($homeTab == 'place' && place_detail.id) {\n-                place_data['place_id'] = place_detail.id;\n-\n-                if (place_detail.child.length >= 0) {\n-                    $('.placeparent').text(place_detail.name);\n-                    var allHtml = '';\n-                    place_detail.child.forEach(place => {\n-                        allHtml += `\n-                        <div class=\"flex flex-col items-center cursor-pointer\" @click=\"subactive='SPL_${place.id}'\">\n-                                            <div data-subplaceid=\"${place.id}\" class=\"SPL_${place.id} w-[76px] h-[76px] rounded-full bg-[#2d9bf0]\"\n-                                            :class=\"subactive == 'SPL_${place.id}' ? 'border-4 border-[#12CDD4] subplaceActive' : ''\">\n-                                                <div class=\"flex items-center justify-center h-full align-item-center\">\n-                                                    <img src=\"{{ asset('new_img/image.png') }}\" class=\"w-7 h-7\" />\n-                                                </div>\n-                                            </div>\n-                                            <span class=\"mt-4 text-base font-normal text-black\">${place.name}</span>\n-                                        </div>\n-                        `;\n-                    });\n-                    $('.subPlacesItems').html(allHtml);\n-\n-                    $('.subModeltrigerPlace').click();\n-\n-                    if (edited_place && edited_place.place_detail.place_child_id) {\n-                        setTimeout(() => {\n-                            $('.SPL_' + edited_place.place_detail.place_child_id).click();\n-                        }, 200);\n-                    }\n-\n-                } else {\n-                    submitDetailData(place_data);\n-                }\n-\n-\n-            } else if ($homeTab == 'observation') {\n-                var allHtml = '';\n-\n-\n-                observations_detail.forEach(function(observation) {\n-\n-\n-                    allHtml +=\n-                        `<div data-observation_id=\"${observation.id}\"><div class=\"mb-4\">${observation.name}</div>`;\n-\n-\n-\n-                    if (observation.child.length === 0) {\n-                        allHtml += `\n-                            <div data-subobservation_id=\"\" class=\"flex items-center justify-between mb-10\">\n-                               ${getFeelingHTML(observation)}\n-                            </div>\n-                        `;\n-                    } else {\n-                        observation.child.forEach(observ => {\n-                            allHtml += `\n-                            <div data-subobservation_id=\"${observ.id}\" class=\"flex items-center justify-between gap-2 mb-10 lg:gap-20\">\n-                                <div class=\"flex flex-col items-center w-[160px]\">\n-                                    <div class=\"w-[76px] h-[76px] rounded-full bg-[#ffa726]\">\n-                                        <div class=\"flex items-center justify-center h-full align-item-center\">\n-                                            <img src=\"{{ asset('new_img/sad.png') }}\" alt=\"\"\n-                                                            class=\"w-8 h-8 -mr-1\"> <img\n-                                                            src=\"{{ asset('new_img/happy.png') }}\" alt=\"\"\n-                                                            class=\"w-8 h-8 -ml-1\">\n-                                        </div>\n-                                    </div>\n-                                    <span class=\"mt-1 text-base font-normal text-black\">${observ.name}</span>\n-                                </div>\n-\n-                                ${getFeelingHTML(observation,observ)}\n-                            </div>`;\n-                        });\n-                    }\n-\n-                    allHtml += `</div>`;\n-                });\n-\n-                $('.subObservationItems').html(allHtml);\n-\n-\n-\n-                $('.subModeltrigerObservation').click();\n-\n-\n-                setTimeout(() => {\n-                    if (edited_place && edited_place.observations_detail && edited_place.observations_detail\n-                        .length > 0) {\n-                        edited_place.observations_detail.forEach(function(observation) {\n-                            if (observation.observation_child_id) {\n-                                clickClass = 'feel_' + observation.observation_id + '_' +\n-                                    observation.observation_child_id + '_' + observation.feeling_id;\n-                            } else {\n-                                clickClass = 'feel_' + observation.observation_id + '_' +\n-                                    observation.feeling_id;\n-                            }\n-                            $('.' + clickClass).click();\n-                        });\n-                    }\n-                }, 200);\n-\n-            }\n-\n-\n-\n-\n-\n-        });\n-\n-\n-        function getFeelingHTML(observation, child = '') {\n-            return `\n-                                <div x-data=\"{ feelActive${observation.id}: 'feel_${observation.id}_1' }\" class=\"flex flex-wrap items-center justify-center w-full gap-2 italic font-semibold \">\n-                                    @foreach ($feelings as $feeling)\n-                                        <div data-feeling_id=\"{{ $feeling->id }}\"\n-                                            @click=\"feelActive${observation.id}='feel_${observation.id}_{{ $feeling->id }}'\"\n-                                            class=\"feel_${observation.id}${child.id ? '_' + child.id : ''}_{{ $feeling->id }} cursor-pointer rounded-full\"\n-                                            :class=\"feelActive${observation.id} == 'feel_${observation.id}_{{ $feeling->id }}' ? 'border-4 border-[#12CDD4] feelingActive' : ''\"\n-                                            >\n-                                            <img class=\"w-12 h-12 sm:w-16 sm:h-16\" src=\"{{ asset($feeling->image) }}\" alt=\"\">\n-                                        </div>\n-                                    @endforeach\n-                                </div>\n-                    `;\n-        }\n-\n-        var fileInput_place = '';\n-        var fileInput_observation = '';\n-\n-        $('body').on('click', '.submitDataAll', function() {\n-\n-            var $SubTab = $(this).closest('.parentDiv').find('.subobservationTabActive').length > 0 ?\n-                'observation' : 'place';\n-\n-            if ($SubTab == 'place') {\n-                var subplace_id = $(this).closest('.parentDiv').find('.subplaceActive').data('subplaceid');\n-                fileInput_place = $(\".place_image\")[0].files[0];\n-                place_data['place_description'] = $(this).closest('.parentDiv').find('.place_description').val();\n-                place_data['child_place_id'] = subplace_id ? subplace_id : '';\n-\n-\n-\n-            } else if ($SubTab == 'observation') {\n-                fileInput_observation = $(\".observation_image\")[0].files[0];\n-                place_data['observation_description'] = $(this).closest('.parentDiv').find(\n-                    '.observation_description').val();\n-                var dataList = [];\n-                $(this).closest('.parentDiv').find('.feelingActive').each(function() {\n-                    var observationId = $(this).closest('[data-observation_id]').data('observation_id');\n-                    var subobservationId = $(this).closest('[data-subobservation_id]').data(\n-                        'subobservation_id');\n-                    var feelingId = $(this).data('feeling_id');\n-\n-                    dataList.push({\n-                        observation_id: observationId,\n-                        child_observation_id: subobservationId,\n-                        feeling_id: feelingId\n-                    });\n-                });\n-                place_data['observations'] = dataList;\n-\n-            }\n-            // console.log(place_data);\n-            submitDetailData(place_data);\n-\n-        });\n-\n-\n-\n-\n-\n-        $('body').on('click', '.noPlace', function() {\n-\n-            set_empty();\n-\n-\n-            place_data['place_detail_id'] = $(this).data('id');\n-            place_data['update'] = 'place';\n-            $('.openPlaceModel').click();\n-            setTimeout(() => {\n-                var hrefValue = $('.tabNewLink').attr('href');\n-                $('.tabNewLink').attr('href', hrefValue + '/' + $(this).data('id'));\n-            }, 200);\n-        });\n-\n-        $('body').on('click', '.noObservation', function() {\n-\n-            set_empty();\n-\n-            place_data['place_detail_id'] = $(this).data('id');\n-            place_data['update'] = 'observation';\n-\n-            $('.OpenObservationModel').click();\n-            setTimeout(() => {\n-                var hrefValue = $('.tabNewLink').attr('href');\n-                $('.tabNewLink').attr('href', hrefValue + '/' + $(this).data('id'));\n-            }, 200);\n-        });\n-\n-        function set_empty() {\n-            place_data['place_id'] = '';\n-            place_data['place_detail_id'] = '';\n-            place_data['child_place_id'] = '';\n-            place_data['observations'] = '';\n-            place_data['place_description'] = '';\n-            place_data['observation_description'] = '';\n-            place_data['tab'] = 'place';\n-            place_data['update'] = '';\n-        }\n-\n-\n-\n-        var totalswal = 0;\n-\n-        function submitDetailData(place_data) {\n-\n-\n-\n-            place_data['update'] = place_data.tab;\n-\n-            const formData = new FormData();\n-            if (fileInput_place) {\n-                formData.append('place_image', fileInput_place);\n-            }\n-            if (fileInput_observation) {\n-                formData.append('observation_image', fileInput_observation);\n-            }\n-\n-            formData.append('place_data', JSON.stringify(place_data));\n-\n-            $.ajaxSetup({\n-                headers: {\n-                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n-                }\n-            });\n-\n-\n-            $.ajax({\n-                type: 'POST',\n-                url: \"/map/add/place\",\n-                data: formData,\n-                contentType: false,\n-                processData: false,\n-                success: function(data) {\n-                    var reverse_tab = data.tab == 'place' ? 'observation' : 'place';\n-                    if (data.status == 'success') {\n-\n-                        if (totalswal >= 1) {\n-                            window.location.href = '/';\n-                        } else {\n-                            totalswal = totalswal + 1;\n-                            place_data['place_detail_id'] = data.place_detail_id;\n-                            swal({\n-                                title: \"Success!\",\n-                                text: data.tab.charAt(0).toUpperCase() + data.tab.slice(1) + \" \" + data\n-                                    .msg + \" Do you want to add \" + reverse_tab + \" tag?\",\n-                                icon: \"success\",\n-                                buttons: [\"Close\", \"Continue\"],\n-                            }).then((userConfirmed) => {\n-                                if (userConfirmed) {\n-                                    if (reverse_tab == 'place') {\n-                                        $('.openPlaceModel').click();\n-                                    } else {\n-                                        $('.OpenObservationModel').click();\n-                                    }\n-                                } else {\n-                                    window.location.href = '/';\n-                                    // $('.closeAddProcess').click();\n-                                }\n-                            });\n-                        }\n-\n-\n-                    }\n-\n-                }\n-\n-            });\n-\n-        }\n-\n-        function setlike(id, e) {\n-\n-            if ($(e).find('i').hasClass('nolike')) {\n-                temp_likes.push(id);\n-                temp_dislikes = temp_dislikes.filter(function(value, index, arr) {\n-                    return value != id;\n-                });\n-            } else {\n-                temp_likes = temp_likes.filter(function(value, index, arr) {\n-                    return value != id;\n-                });\n-                temp_dislikes.push(id);\n-            }\n-\n-\n-            $.ajaxSetup({\n-                headers: {\n-                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n-                }\n-            });\n-            $.ajax({\n-                url: '/set-like',\n-                type: 'POST',\n-                data: {\n-                    id: id\n-                }\n-            });\n-        }\n-\n-        function saveDescription(data, id) {\n-            $.ajaxSetup({\n-                headers: {\n-                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n-                }\n-            });\n-            $.ajax({\n-                url: '/save-des',\n-                type: 'POST',\n-                data: {\n-                    data: data,\n-                    id: id\n-                }\n-            });\n-        }\n-\n-        function saveComment(e) {\n-            const data = $(e).parent().find('.feedback').val();\n-            const id = $(e).parent().find('.feedback').data('id');\n-\n-            $(e).parent().find('.hideCommentBox').click();\n-\n-            temp_comment['_' + id] = data;\n-\n-            $.ajaxSetup({\n-                headers: {\n-                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n-                }\n-            });\n-            $.ajax({\n-                url: '/save-comment',\n-                type: 'POST',\n-                data: {\n-                    data: data,\n-                    id: id\n-                }\n-            });\n-        }\n-\n-        $(document).ready(function() {\n-\n-            if (edit_id && edit_id != 0) {\n-                $('.openPlaceModel').click();\n-                // $('.OpenObservationModel').click();\n-            }\n-        });\n-    </script>\n-@endsection\n-@php\n-    $locale = session()->get('locale');\n-    if ($locale == null) {\n-        $locale = 'en';\n-    }\n-@endphp\n-@extends('layouts.app')\n-\n-@section('main')\n-    <div data-barba=\"container\">\n-        <div class=\"flex flex-col mx-auto\">\n-            <div class=\"\">\n-                <div class=\"relative\">\n-\n-\n-                    @if (backpack_auth()->user()->id)\n-                        <div class=\"fixed right-0 z-20 flex items-center justify-center p-4 rounded-full cursor-pointer top-4\"\n-                            id=\"openPopup_profile\">\n-                            <img class=\"object-cover border-2 rounded-full border-site h-14 w-14\"\n-                                src=\"/storage/uploads/avatar/{{ backpack_auth()->user()->avatar }}\" alt=\"\">\n-                        </div>\n-                    @endif\n-\n-                    <div onclick=\"mylocation()\"\n-                        class=\"fixed z-20 flex items-center justify-center p-4 bg-transparent rounded-full cursor-pointer h-14 w-20 bottom-[6.8rem] left-4\">\n-                        <img src=\"{{ asset('img/location.png') }}\" class=\"w-20 h-12\" alt=\"\">\n-                    </div>\n-                    <a href=\"/filter\"\n-                        class=\"fixed z-20 flex items-center justify-center p-1 text-xl bg-white border-2 border-black rounded-full h-14 w-14 bottom-28 right-4\">\n-                        <div class=\"\"> <img src=\"{{ asset('img/eye.png') }}\" class=\"w-8 h-6\" alt=\"\"></div>\n-                    </a>\n-\n-                    <div class=\"flex justify-center items-center\">\n-                        <span class=\"fixed z-[30] top-10 mr-20 text-center\">\n-                            Explore the map to view the activities of other users.\n-                        </span>\n-                    </div>\n-\n-\n-                    <div id=\"map\" class=\"absolute w-[100vw] z-10 h-[90vh]\"></div>\n-                </div>\n-\n-                <div x-data=\"{ modelOpen: false, showMore: false, hidetab: 'no', tab: 'place', searchQuery: '' }\">\n-                    <div\n-                        class=\"fixed bottom-0 z-50 w-full pt-3 pb-8 text-xl font-semibold text-center shadow-xl rounded-t-3xl bg-gray-50 \">\n-\n-                        <div class=\"flex items-center justify-center\">\n-                            <div class=\"py-0.5 w-14 mb-3 rounded-full px-4 bg-black\">\n-\n-                            </div>\n-\n-                        </div>\n-\n-\n-                        <div class=\"flex\">\n-                            <div class=\"absolute left-16 bottom-[18px] \">\n-                                <div class=\"pl-4 py-3 pr-2.5 bg-[#ffa726] border-2 border-white rounded-full h-14 w-14\">\n-                                    <span class=\"w-10 h-14\"><img src=\"{{ asset('img/search.png') }}\" class=\"w-9 h-7\"\n-                                            alt=\"\"></span>\n-                                </div>\n-\n-                            </div>\n-                            <div class=\"absolute left-6 bottom-[18px] \">\n-                                <div class=\"p-3 border-2 border-white rounded-full bg-site h-14 w-14\">\n-                                    <img src=\"{{ asset('new_img/image.png') }}\" class=\"w-7 h-7\" alt=\"\">\n-                                </div>\n-\n-                            </div>\n-                        </div>\n-\n-                        <div class=\"w-full pt-4 addToMap\" @click=\"tab ='place'; modelOpen =true; searchQuery=''\">\n-                            <span\n-                                class=\"border-2 border-site w-full px-12 py-4 text-white bg-[#2d9bf0] rounded-3xl cursor-pointer\">\n-                                Add to Pin\n-                            </span>\n-\n-                        </div>\n-\n-\n-                        <div class=\"absolute right-5 bottom-[25px] \">\n-                            <div class=\"p-1 rounded-full bg-site w-9\">\n-                                <span class=\"italic font-bold text-white\">\n-                                    i\n-                                </span>\n-                            </div>\n-                        </div>\n-\n-                    </div>\n-\n-\n-                    <div class=\"parentDiv\" x-data=\"{ height: 'auto' }\">f\n-                        <button class=\"hidden OpenObservationModel\"\n-                            @click=\"modelOpen=true; showMore = true; hidetab = 'place'; tab='observation'; height = '100vh';\"></button>\n-                        <button class=\"hidden openPlaceModel\"\n-                            @click=\"modelOpen=true; showMore = true; hidetab = 'observation'; tab='place'; height = '100vh';\"></button>\n-\n-                        <div x-cloak x-show=\"modelOpen \" class=\"fixed bottom-0 z-50 overflow-y-auto\"\n-                            aria-labelledby=\"modal-title\" role=\"dialog\" aria-modal=\"true\">\n-                            <div class=\"flex items-end justify-center text-center\">\n-                                <div x-cloak @click=\"modelOpen = false; hidetab = 'no'\" x-show=\"modelOpen\"\n-                                    class=\"fixed inset-0 transition-opacity bg-gray-500 closeAddProcess bg-opacity-40\"\n-                                    aria-hidden=\"true\">\n-                                </div>\n-\n-                                <div x-cloak x-show=\"modelOpen\"\n-                                    x-transition:enter=\"transition ease-out duration-300 transform\"\n-                                    x-transition:enter-start=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n-                                    x-transition:enter-end=\"opacity-100 translate-y-0 sm:scale-100\" {{-- x-transition:leave=\"transition ease-in duration-200 transform\" --}}\n-                                    class=\"transition-height z-50 w-screen pb-16 transition-all transform bg-white h-[50%] shadow-xl mt-60 rounded-t-3xl\"\n-                                    :style=\"'height: ' + height\" :class=\"{ 'overflow-auto': showMore }\">\n-\n-                                    <div class=\"p-6 lg:p-12\">\n-\n-                                        @if ($edit_id)\n-                                            <a href=\"/\" class=\"block mb-4 closeAddProcess\" class=\"mb-4\">\n-                                                <img src=\"{{ asset('img/icons/arrow.png') }}\" class=\"arrow\">\n-                                            </a>\n-                                        @else\n-                                            <div class=\"mb-4 closeAddProcess\"\n-                                                @click=\"modelOpen=false; showMore = false; hidetab = 'no'; height = 'auto';\"\n-                                                x-show=\"showMore\" class=\"mb-4\">\n-                                                <img src=\"{{ asset('img/icons/arrow.png') }}\" class=\"arrow\">\n-                                            </div>\n-                                        @endif\n-\n-\n-\n-\n-\n-                                        <div class=\"flex items-center gap-4 justity-between\">\n-                                            <input type=\"text\" class=\"w-full px-2 py-2 bg-white rounded-full\"\n-                                                placeholder=\"Choose tags or add new city layers\" name=\"searchInput\"\n-                                                x-model=\"searchQuery\" @keyup=\"showMore = true; height = '100vh'\">\n-\n-                                            <a :href=\"tab === 'place' ?\n-                                                '/add-new/place{{ $edit_id ? '/' . urlencode($edit_id) : '' }}' :\n-                                                '/add-new/observation{{ $edit_id ? '/' . urlencode($edit_id) : '' }}'\"\n-                                                class=\"p-2 transition-all border-2 rounded-full tabNewLink\"\n-                                                :class=\"tab == 'place' ? 'bg-[#2d9bf0] border-[#2d9bf0]' :\n-                                                    'bg-[#ffa726] border-[#ffa726]'\">\n-                                                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\"\n-                                                    stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-6 h-6 text-white\">\n-                                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\"\n-                                                        d=\"M12 6v12m6-6H6\" />\n-                                                </svg>\n-                                            </a>\n-\n-                                        </div>\n-\n-                                        <div class=\"mt-2\">\n-                                            Drop a pin to share observations, opinions and ideas.\n-                                        </div>\n-\n-\n-\n-\n-\n-                                        <div class=\"flex items-center justify-center mt-12 homeTabs\">\n-                                            <div class=\"-mr-1 cursor-pointer\" x-show=\"hidetab!='place'\"\n-                                                @click=\"tab='place'\">\n-                                                <div class=\"flex flex-col w-[84px] justify-center items-center\">\n-                                                    <div class=\"bg-[#2d9bf0] border-2 border-white rounded-full \"\n-                                                        :class=\"tab == 'place' || tab == 'place1' ?\n-                                                            'bg-[#2d9bf0] z-10 p-[26px] placeTabActive' :\n-                                                            'bg-[#2d9bf0]/70 p-[40px]'\">\n-                                                        <img src=\"{{ asset('new_img/image.png') }}\" class=\"w-7 h-7\"\n-                                                            :class=\"tab == 'place' || tab == 'place1' ? 'block' : 'hidden'\"\n-                                                            id=\"place\" alt=\"\">\n-                                                    </div>\n-                                                    <div class=\"text-sm font-semibold text-center\"\n-                                                        :class=\"tab == 'place' ? 'text-black' : 'text-black/50'\">\n-                                                        Browse Places\n-                                                    </div>\n-                                                </div>\n-                                            </div>\n-                                            <div class=\"-ml-1 cursor-pointer\" x-show=\"hidetab!='observation'\"\n-                                                @click=\"tab='observation'\">\n-                                                <div class=\"flex flex-col w-[75px] justify-center items-center\">\n-\n-                                                    <div class=\"flex items-center justify-center border-2 border-white rounded-full \"\n-                                                        :class=\"tab == 'observation' || tab == 'observation1' ?\n-                                                            'bg-[#ffa726] z-10 p-[20px] observationTabActive' :\n-                                                            'bg-[#ffa726]/70 p-[40px]'\">\n-                                                        <div class=\"flex items-center justify-center w-10 h-10 text-2xl\"\n-                                                            :class=\"tab == 'observation' || tab == 'observation1' ? 'block' :\n-                                                                'hidden'\"\n-                                                            id=\"observation\" alt=\"\">🔍</div>\n-                                                    </div>\n-\n-                                                    <div class=\"text-sm font-semibold text-center \"\n-                                                        :class=\"tab == 'observation' ? 'text-black' : 'text-black/50'\">\n-                                                        Browse Observation\n-                                                    </div>\n-                                                </div>\n-                                            </div>\n-                                        </div>\n-\n-                                        <div x-data=\"{ active: '{{ isset($edited_place->placeDetail->place_id) ? 'PL_' . $edited_place->placeDetail->place_id : '' }}' }\">\n-\n-                                            <div class=\"flex items-start justify-center gap-10 mt-6 mb-6 italic font-semibold all-places\"\n-                                                x-show=\"tab=='place'\">\n-\n-                                                <div class=\"grid grid-cols-3 gap-10 italic font-semibold\"\n-                                                    id=\"searchResults2Pls\">\n-\n-\n-                                                    @foreach ($allPlaces as $key => $place)\n-                                                        <div x-show=\"(showMore || {{ $key }} < 2) && (searchQuery === '' || '{{ strtolower($place->name) }}'.includes(searchQuery.toLowerCase()))\"\n-                                                            class=\"flex flex-col items-center cursor-pointer\"\n-                                                            @click=\"active='PL_{{ $place->id }}'\">\n-                                                            <div data-place=\"{{ json_encode(['id' => $place->id, 'name' => $place->name, 'child' => $place->subplaces]) }}\"\n-                                                                class=\"w-[76px] h-[76px] rounded-full bg-[#2d9bf0]\"\n-                                                                :class=\"active == 'PL_{{ $place->id }}' ?\n-                                                                    'border-4 border-[#12CDD4] placeActive' : ''\">\n-                                                                <div\n-                                                                    class=\"flex items-center justify-center h-full align-item-center\">\n-                                                                    <img src=\"{{ asset('new_img/image.png') }}\"\n-                                                                        class=\"w-7 h-7\" />\n-                                                                </div>\n-                                                            </div>\n-                                                            <span\n-                                                                class=\"mt-4 font-normal text-black\">{{ $place->name }}</span>\n-                                                        </div>\n-                                                    @endforeach\n-\n-                                                    <div x-show=\"!showMore\" class=\"cursor-pointer\">\n-                                                        <button @click=\"showMore = true; height = '100vh'\">\n-                                                            <div class=\"rounded-full border-site border-4 p-[22px]\">\n-                                                                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\"\n-                                                                    viewBox=\"0 0 24 24\" stroke-width=\"3\"\n-                                                                    stroke=\"currentColor\"\n-                                                                    class=\"w-6 h-6 font-bold color-site\">\n-                                                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\"\n-                                                                        d=\"M12 6v12m6-6H6\" />\n-                                                                </svg>\n-                                                            </div>\n-                                                            <div class=\"mt-4 font-normal text-black\">See more</div>\n-                                                        </button>\n-                                                    </div>\n-                                                </div>\n-                                            </div>\n-                                        </div>\n-                                        <div class=\"\" x-data=\"{ active: '' }\">\n-                                            <div class=\"flex items-center justify-center gap-10 mt-6 mb-6 italic font-semibold\"\n-                                                x-show=\"tab=='observation'\">\n-                                                <div class=\"grid grid-cols-3 gap-10 italic font-semibold\"\n-                                                    id=\"searchResults2Obs\">\n-\n-                                                    @foreach ($allObservations as $key => $observation)\n-                                                        <div x-data=\"{ active: '{{ $edited_place && $edited_place->observationsDetail->contains('observation_id', $observation->id) ? 'OB_' . $observation->id : '' }}' }\"\n-                                                            x-show=\"(showMore || {{ $key }} < 2) && (searchQuery === '' || '{{ strtolower($observation->name) }}'.includes(searchQuery.toLowerCase()))\"\n-                                                            class=\"flex flex-col items-center cursor-pointer\"\n-                                                            @click=\"active = !active ? 'OB_{{ $observation->id }}' : false\">\n-\n-                                                            <div data-observations=\"{{ json_encode(['id' => $observation->id, 'name' => $observation->name, 'child' => $observation->subobservs]) }}\"\n-                                                                class=\"w-[76px] h-[76px] rounded-full bg-[#ffa726]\"\n-                                                                :class=\"active == 'OB_{{ $observation->id }}' ?\n-                                                                    'border-4 border-[#12CDD4] observationActive' : ''\">\n-                                                                <div\n-                                                                    class=\"flex items-center justify-center h-full align-item-center\">\n-                                                                    <img src=\"{{ asset('new_img/sad.png') }}\"\n-                                                                        alt=\"\" class=\"w-8 h-8 -mr-1\">\n-                                                                    <img src=\"{{ asset('new_img/happy.png') }}\"\n-                                                                        alt=\"\" class=\"w-8 h-8 -ml-1\">\n-                                                                </div>\n-                                                            </div>\n-                                                            <span\n-                                                                class=\"mt-4 font-normal text-black\">{{ $observation->name }}</span>\n-                                                        </div>\n-                                                    @endforeach\n-\n-\n-\n-                                                    <div x-show=\"!showMore\"\n-                                                        class=\"flex flex-col items-center justify-center cursor-pointer\">\n-                                                        <button @click=\"showMore = true; height = '100vh'\" type=\"button\">\n-                                                            <div class=\"rounded-full border-[#ffa726] border-4  p-[22px]\">\n-                                                                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\"\n-                                                                    viewBox=\"0 0 24 24\" stroke-width=\"3\"\n-                                                                    stroke=\"currentColor\"\n-                                                                    class=\"w-6 h-6 font-bold text-[#ffa726]\">\n-                                                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\"\n-                                                                        d=\"M12 6v12m6-6H6\" />\n-                                                                </svg>\n-\n-                                                            </div>\n-                                                            <div class=\"mt-4 font-normal text-black\">See more</div>\n-                                                        </button>\n-\n-                                                    </div>\n-\n-                                                </div>\n-\n-\n-\n-                                            </div>\n-                                        </div>\n-\n-\n-                                    </div>\n-\n-                                </div>\n-                            </div>\n-                        </div>\n-                        <div x-cloak x-show=\"modelOpen\" class=\"fixed bottom-0 z-50 w-full py-4 bg-white\">\n-                            <div class=\"flex items-center justify-center\">\n-                                <div\n-                                    class=\"submitData border-2 border-site flex cursor-pointer items-center justify-center gap-2 px-8 py-3 text-lg font-extrabold text-white bg-[#2d9bf0] rounded-3xl hover:shadow  hover:bg-[#268ede] transition-all\">\n-                                    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\"\n-                                        stroke-width=\"3\" stroke=\"currentColor\" class=\"w-6 h-6\">\n-                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\"\n-                                            d=\"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z\" />\n-                                    </svg>\n-                                    Add new\n-                                </div>\n-                            </div>\n-                        </div>\n-                    </div>\n-\n-\n-\n-\n-\n-\n-\n-\n-                </div>\n-\n-\n-                <div class=\"parentDiv\" x-data=\"{ subModelOpen: false, subtab: '' }\" x-cloak x-show=\"subModelOpen\">\n-\n-                    <button class=\"hidden subModeltrigerPlace\" @click=\"subModelOpen=true;subtab='place'\"></button>\n-\n-                    <button class=\"hidden subModeltrigerObservation\"\n-                        @click=\"subModelOpen=true;subtab='observation'\"></button>\n-\n-\n-                    <div x-data=\"{ subactive: '{{ isset($edited_place->placeDetail->place_child_id) ? 'SPL_' . $edited_place->placeDetail->place_child_id : '' }}' }\"\n-                        class=\"fixed h-screen overflow-auto bottom-0 bg-white z-[60] w-full pb-8 text-xl font-semibold text-center shadow-xl\">\n-\n-                        <div class=\"p-6 lg:p-12\">\n-\n-                            <div @click=\"subModelOpen=false;subactive='';subtab=''\"\n-                                class=\"mb-4 OpenObservationModel openPlaceModel\">\n-                                <img src=\"{{ asset('img/icons/arrow.png') }}\" class=\"arrow\">\n-                            </div>\n-\n-\n-                            <div class=\"flex items-center justify-center mt-12 homeTabs\">\n-                                <div class=\"-mr-1 cursor-pointer\" x-show=\"subtab=='place'\">\n-                                    <div class=\"flex flex-col w-[84px] justify-center items-center\">\n-                                        <div class=\"bg-[#2d9bf0] border-2 border-white rounded-full\"\n-                                            :class=\"subtab == 'place' ?\n-                                                'bg-[#2d9bf0] z-10 p-[26px] subplaceTabActive' :\n-                                                'bg-[#2d9bf0]/70 p-[40px]'\">\n-                                            <img src=\"{{ asset('new_img/image.png') }}\" class=\"w-7 h-7\"\n-                                                :class=\"subtab == 'place' ? 'block' : 'hidden'\" alt=\"\">\n-                                        </div>\n-\n-                                    </div>\n-                                </div>\n-                                <div class=\"-ml-1 cursor-pointer\" x-show=\"subtab=='observation'\">\n-                                    <div class=\"flex flex-col w-[75px] justify-center items-center\">\n-\n-                                        <div class=\"flex items-center justify-center border-2 border-white rounded-full\"\n-                                            :class=\"subtab == 'observation' ?\n-                                                'bg-[#ffa726] z-10 p-[20px] subobservationTabActive' :\n-                                                'bg-[#ffa726]/70 p-[40px]'\">\n-                                            <div class=\"flex items-center justify-center w-10 h-10 text-2xl\"\n-                                                :class=\"subtab == 'observation' ? 'block' :\n-                                                    'hidden'\">\n-                                                <div class=\"flex items-center justify-center h-full align-item-center\">\n-                                                    <img src=\"{{ asset('new_img/sad.png') }}\" alt=\"\"\n-                                                        class=\"w-8 h-8 -mr-1\"> <img\n-                                                        src=\"{{ asset('new_img/happy.png') }}\" alt=\"\"\n-                                                        class=\"w-8 h-8 -ml-1\">\n-                                                </div>\n-                                            </div>\n-                                        </div>\n-\n-\n-                                    </div>\n-                                </div>\n-                            </div>\n-\n-                            <div>\n-                                <div x-show=\"subtab=='place'\" class=\"flex flex-col items-center justify-center mt-12\">\n-                                    <div class=\"mb-10 placeparent\"></div>\n-\n-                                    <div class=\"grid grid-cols-3 gap-10 italic font-semibold subPlacesItems\">\n-\n-                                    </div>\n-                                    <div class=\"mt-4 text-center font-normal\">\n-                                        Tap \"submit\" to pin this place to the map and share it with other users.\n-                                        Provide more details by adding a description, and uploading a photo.\n-\n-                                    </div>\n-                                    <div class=\"flex items-center justify-between w-2/3 pb-12 pb-16 pt-28\">\n-                                        <label class=\"flex flex-col items-center gap-1 cursor-pointer\" for=\"image-upload\">\n-                                            <input id=\"image-upload\" type=\"file\" class=\"hidden place_image\"\n-                                                accept=\".jpg, .png\">\n-                                            <img src=\"{{ asset('img/cam-2.PNG') }}\" alt=\"\" class=\"w-10 h-9\">\n-                                            <div class=\"text-sm\">Upload image</div>\n-                                        </label>\n-\n-                                        <div class=\"relative\" x-data=\"{ placeText: false }\">\n-                                            <div @click=\"placeText = !placeText\"\n-                                                class=\"flex flex-col items-center gap-1 cursor-pointer\">\n-                                                <img src=\"{{ asset('img/msg.PNG') }}\" alt=\"\" class=\"w-10 h-9\">\n-                                                <div class=\"text-sm\">Add description</div>\n-                                            </div>\n-                                            <textarea class=\"font-normal place_description absolute px-2 py-2 bg-white rounded-xl w-[300px] right-0\"\n-                                                x-show=\"placeText\">{{ $edited_place && $edited_place->place_description ? $edited_place->place_description : '' }}</textarea>\n-                                        </div>\n-\n-                                    </div>\n-                                </div>\n-\n-                                <div x-show=\"subtab=='observation'\" class=\"flex flex-col items-center justify-center\">\n-                                    <div class=\"grid gap-10 mt-12 italic font-semibold grid-cols subObservationItems\">\n-\n-\n-\n-\n-                                    </div>\n-\n-\n-\n-                                    <div class=\"mt-4 text-center font-normal\">\n-                                        Tap \"submit\" to pin this observation to the map and share it with other users.\n-                                        Provide more details through rating, adding a description, and uploading a photo.\n-\n-                                    </div>\n-\n-\n-                                    <div class=\"flex items-center justify-between w-2/3 pt-20 pb-16 mb-12\">\n-                                        <label for=\"obser-image-upload\"\n-                                            class=\"flex flex-col items-center gap-1 cursor-pointer\">\n-                                            <input id=\"obser-image-upload\" type=\"file\"\n-                                                class=\"hidden observation_image\" accept=\".jpg, .png\">\n-                                            <img src=\"{{ asset('img/cam.PNG') }}\" alt=\"\" class=\"w-10 h-9\">\n-                                            <div class=\"text-sm\">Upload image</div>\n-                                        </label>\n-\n-\n-\n-                                        <div class=\"relative\" x-data=\"{ observationText: false }\">\n-                                            <div @click=\"observationText = !observationText\"\n-                                                class=\"flex flex-col items-center gap-1 cursor-pointer\">\n-                                                <img src=\"{{ asset('img/msg-2.PNG') }}\" alt=\"\" class=\"w-10 h-9\">\n-                                                <div class=\"text-sm\">Add description</div>\n-                                            </div>\n-                                            <textarea class=\"font-normal observation_description absolute px-2 py-2 bg-white rounded-xl w-[300px] right-0\"\n-                                                x-show=\"observationText\">{{ $edited_place && $edited_place->obsevation_description ? $edited_place->obsevation_description : '' }}</textarea>\n-                                        </div>\n-\n-                                    </div>\n-\n-                                </div>\n-                            </div>\n-\n-\n-                        </div>\n-\n-                    </div>\n-\n-\n-                    <div class=\"fixed w-full bottom-0 z-[60] bg-white py-4\">\n-                        <div class=\"flex items-center justify-center gap-6\">\n-                            <div @click=\"subModelOpen=false;\"\n-                                class=\"flex items-center justify-center gap-2 px-8 py-3 text-lg font-extrabold transition-all bg-white border-2 cursor-pointer border-site color-site rounded-3xl\">\n-                                Close\n-                            </div>\n-\n-                            <div\n-                                class=\"submitDataAll flex cursor-pointer items-center border-2 border-site justify-center gap-2 px-8 py-3 text-lg font-extrabold text-white bg-[#2d9bf0] rounded-3xl  hover:bg-[#268ede] transition-all\">\n-                                Submit\n-                            </div>\n-\n-                        </div>\n-                    </div>\n-\n-\n-                </div>\n-\n-\n-            </div>\n-        </div>\n-    </div>\n-\n-\n-    <div id=\"popup_profile\"\n-        class=\"p-6 lg:p-12 w-full h-screen lg:w-4/12 fixed bg-white shadow-md ml-[-2px] overflow-y-auto right-0 hidden z-50 transform translate-x-full transition-transform duration-300\">\n-        <a onclick=\"close_pop_profile()\">\n-            <img src=\"{{ asset('img/icons/arrow.png') }}\" class=\"arrow\">\n-\n-        </a>\n-        <div class=\"p-4\">\n-\n-            <div class=\"top\">\n-                <div class=\"topo\">\n-\n-                    <label for=\"image\" class=\"cursor-pointer new\">\n-                        <img class=\"object-cover w-24 h-24 border-blue-500 rounded-full border-7 nimage mimage\"\n-                            src=\"/storage/uploads/avatar/{{ backpack_auth()->user()->avatar }}\" alt=\"\">\n-\n-                    </label>\n-                </div>\n-                <div class=\"tops\">\n-                    <div class=\"toptaxt\">Hello \"{{ backpack_auth()->user()->name }}\"!</div>\n-                    <a href=\"/profile\" class=\"vieprofile\">View Profile</a>\n-                </div>\n-\n-\n-            </div>\n-            <br />\n-            <br />\n-            <div class=\"list\">\n-                <a href=\"/\" class=\"lbox\">\n-                    <div\n-                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n-                        +</div>\n-                    <div class=\"ltax\">Add to map</div>\n-                </a>\n-                <a href=\"/dashboard\" class=\"lbox\">\n-                    <div\n-                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n-                        ▄</div>\n-                    <div class=\"ltax\">Dashboard</div>\n-                </a>\n-                <a href=\"/community-achievements\" class=\"lbox\">\n-                    <div\n-                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n-                        ⌃</div>\n-                    <div class=\"ltax\">Community achievements</div>\n-                </a>\n-                <a href=\"/about-us\" class=\"lbox\">\n-                    <div\n-                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n-                        ?</div>\n-                    <div class=\"ltax\">About City Layers</div>\n-                </a>\n-                <a href=\"/contact-us\" class=\"lbox\">\n-                    <div\n-                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n-                        •</div>\n-\n-                    <div class=\"ltax\">Term & contact</div>\n-                </a>\n-                <a href=\"/privacy-policy\" class=\"lbox\">\n-                    <div\n-                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n-                        !</div>\n-\n-                    <div class=\"ltax\">Privacy Policy and Terms of Service</div>\n-                </a>\n-                <a href=\"/impressum-accessibility\" class=\"lbox\">\n-                    <div\n-                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n-                        i</div>\n-                    <div class=\"ltax\">Impressum & accessibility</div>\n-                </a>\n-                <a href=\"/admin/logout\" class=\"lbox\">\n-                    <div\n-                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n-                        i</div>\n-                    <div class=\"ltax\">Sign out</div>\n-                </a>\n-            </div>\n-            <br />\n-            <div class=\"belo\">\n-                <div class=\"mapping\">Maps are public and visible to all users. Your username will be shown along with your\n-                    pins and added layers.</div>\n-                <div class=\"cursor-pointer closebt\" onclick=\"close_pop_profile()\">Close</div>\n-            </div>\n-        </div>\n-    </div>\n-\n-    <script>\n-        const openPopupButton = document.getElementById('openPopup_profile');\n-        const popup = document.getElementById('popup_profile');\n-\n-        openPopupButton.addEventListener('click', () => {\n-            popup.style.transform = 'translateX(0)';\n-            popup.style.display = 'block';\n-        });\n-\n-        function close_pop_profile() {\n-\n-\n-            popup.style.transform = 'translateX(100%)';\n-            setTimeout(() => {\n-                popup.style.display = 'none';\n-            }, 300);\n-        }\n-    </script>\n-\n-\n-    <script>\n-        data = {!! json_encode($all_data) !!};\n-\n-        userid = {!! json_encode($userid) !!};\n-\n-        markers = {};\n-        const edit_id = {{ $edit_id ? $edit_id : '0' }};\n-        let marker = null;\n-\n-        let pin = [48.6890, 7.14086];\n-        if (data && data[0] && typeof data[0].latitude !== 'undefined' && typeof data[0].longitude !== 'undefined') {\n-            pin = [data[0].latitude, data[0].longitude];\n-        }\n-        let mymap0 = L.map('map').setView(pin, 6);\n-\n-        // https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png\n-\n-        osmLayer0 = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {\n-            subdomains: 'abcd',\n-            minZoom: 0,\n-            maxZoom: 19,\n-            ext: 'png'\n-        }).addTo(mymap0);\n-        mymap0.zoomControl.remove();\n-        mymap0.addLayer(osmLayer0);\n-        mymap0.touchZoom.enable();\n-        mymap0.scrollWheelZoom.enable();\n-\n-        let place_data = {\n-            place_id: '',\n-            child_place_id: '',\n-            observations: '',\n-            place_description: '',\n-            observation_description: '',\n-            latitude: '',\n-            longitude: '',\n-            tab: 'place',\n-        };\n-\n-\n-        var temp_des = [];\n-        var temp_comment = [];\n-        var temp_likes = [];\n-        var temp_dislikes = [];\n-\n-\n-        var currentPosIcon = L.icon({\n-            iconUrl: '/new_img/current-pos.svg', // Replace with the path to your icon image\n-            iconSize: [62, 62], // Adjust the icon size as needed\n-            iconAnchor: [16, 16], // Adjust the anchor point of the icon\n-            popupAnchor: [0, -16] // Adjust the popup anchor for the icon\n-        });\n-        var currentPosIcon = L.divIcon({\n-            className: 'transparent-icon',\n-            iconSize: [64, 64], // Adjust the size of the icon including the border\n-            iconAnchor: [32, 32], // Adjust the anchor point of the icon\n-            html: '<div class=\"border-2 rounded-full border-site\"><img src=\"/new_img/current-pos.svg\" /></div>'\n-        });\n-\n-\n-        var placeIcon = L.divIcon({\n-            className: 'transparent-icon',\n-            html: `<div class=\"rounded-full bg-[#2d9bf0] border-2 border-white flex justify-center items-center p-4 w-[64px] h-[64px]\">\n-                    <img src=\"{{ asset('new_img/image.png') }}\" class=\"w-full h-full\" />\n-                </div>`\n-        });\n-        var bothIcon = L.divIcon({\n-            className: 'transparent-icon',\n-            html: `<div class=\"rounded-full bg-[#2d9bf0] border-2 border-white flex justify-center items-center w-[64px] h-[64px]\">\n-                        <div class=\"flex items-center justify-center h-full align-item-center\">\n-                            <img src=\"{{ asset('new_img/sad.png') }}\" alt=\"\" class=\"w-6 h-6 -mr-2\">\n-                            <img src=\"{{ asset('new_img/image.png') }}\" class=\"z-20 w-6 h-6\" />\n-                            <img src=\"{{ asset('new_img/happy.png') }}\" alt=\"\" class=\"w-6 h-6 -ml-2\">\n-                        </div>\n-                </div>`\n-        });\n-        var observationIcon = L.divIcon({\n-            className: 'transparent-icon',\n-            html: `<div class=\"rounded-full bg-[#ffa726] border-2 border-white flex justify-center items-center p-4 w-[64px] h-[64px]\">\n-                    <div class=\"flex\">\n-                     <img src=\"{{ asset('new_img/sad.png') }}\" alt=\"\" class=\"-mr-1 w-7 h-7\">\n-                     <img src=\"{{ asset('new_img/happy.png') }}\" alt=\"\" class=\"-ml-1 w-7 h-7\">\n-                    </div>\n-                 </div>`\n-        });\n-\n-\n-\n-        if (navigator.geolocation) {\n-\n-            //wait 3 seconds to get position\n-            getposition(success, fail)\n-\n-        } else {\n-            alert(\"Geolocation is not supported by this browser.\");\n-        }\n-\n-\n-        function getposition(success, fail) {\n-\n-            var is_echo = false;\n-            if (navigator && navigator.geolocation) {\n-                navigator.geolocation.getCurrentPosition(\n-                    function(pos) {\n-                        if (is_echo) {\n-                            return;\n-                        }\n-                        is_echo = true;\n-\n-                        place_data['latitude'] = pos.coords.latitude;\n-                        place_data['longitude'] = pos.coords.longitude;\n-\n-                        success(pos.coords.latitude, pos.coords.longitude);\n-                    },\n-                    function() {\n-                        if (is_echo) {\n-                            return;\n-                        }\n-                        is_echo = true;\n-                        fail();\n-                    }\n-                );\n-            } else {\n-                fail();\n-            }\n-\n-        }\n-\n-\n-\n-\n-        function success(lat, lng) {\n-            mymap0.setView([lat, lng], 10);\n-\n-            L.marker([lat, lng], {\n-                icon: currentPosIcon\n-            }).addTo(mymap0);\n-        }\n-\n-        function fail() {\n-            alert(\"location failed\");\n-        }\n-\n-\n-\n-        function generateObservationHTML(observationDetail, place) {\n-            var obsrName = '';\n-            var addicon = '';\n-            if (observationDetail.observation.name) {\n-                obsrName = (observationDetail.observation ? observationDetail.observation.name : '') +\n-                    (observationDetail.observation && observationDetail.observation_child ?\n-                        '<span class=\"text-xs font-light\"> → ' + observationDetail.observation_child.name + '</span>' : '');\n-            } else {\n-                obsrName = 'No Observation';\n-                if (place.user_id == userid) {\n-                    addicon = `\n-                    <div data-id=\"${place.id}\" class=\"cursor-pointer border-2 transition-all rounded-full bg-[#2d9bf0] border-white w-6 h-6 mt-1 noObservation\">\n-                        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"text-white\">\n-                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 6v12m6-6H6\"></path>\n-                        </svg>\n-                    </div>\n-                    `;\n-                }\n-            }\n-\n-\n-            return `\n-            <div class=\"flex items-center justify-start gap-3 -mb-4 overflow-hidden\">\n-                <div class=\"flex flex-col items-center justify-center\">\n-                    <div class=\"rounded-full bg-[#ffa726] border-4 border-white w-[68px] h-[68px]\">\n-                        <img src=\"${observationDetail.feeling.image}\" alt=\"\">\n-                    </div>\n-                </div>\n-                <div class=\"flex gap-4 mt-4\">\n-                    <div class=\"text-center\">\n-                        <img src=\"{{ asset('img/cam.PNG') }}\" alt=\"\" class=\"h-6 w-7\">\n-                        <div @click=\"viewo=!viewo\" class=\"font-light text-white font-sm cursor-pointer\">view</div>\n-                    </div>\n-                    <span class=\"text-lg italic font-extrabold text-white whitespace-nowrap ` + (observationDetail\n-                .observation.id ? 'w-screen' : '') + `\">` + obsrName + `</span>\n-                    ` + addicon + `\n-                </div>\n-            </div>\n-            `;\n-        }\n-\n-        let count = 0;\n-        const likedPlaces = {!! json_encode($likedPlaces) !!};\n-\n-        const edited_place = {!! json_encode($edited_place) !!};\n-\n-\n-        for (let i = 0; i < data.length; i++) {\n-\n-            count = count + 1;\n-            place = data[i];\n-\n-\n-\n-            placename = 'No Place';\n-\n-            var addicon = '';\n-\n-            if (place.user_id == userid) {\n-                addicon = `\n-                    <div data-id=\"${place.id}\" class=\"cursor-pointer border-2 transition-all rounded-full bg-[#2d9bf0] border-white w-6 h-6 mt-1 noPlace\">\n-                        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"text-white\">\n-                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 6v12m6-6H6\"></path>\n-                        </svg>\n-                    </div>\n-                    `;\n-            }\n-\n-            if (place.place_detail) {\n-\n-                placename = (place.place_detail.place ? place.place_detail.place.name : '') +\n-                    (place.place_detail.place && place.place_detail.place_child ? '<span class=\"text-xs font-light\"> → ' +\n-                        place.place_detail.place_child.name + '</span>' : '');\n-\n-\n-                addicon = '';\n-            }\n-\n-\n-            const isUserOwner = place.user_id === userid;\n-            const userdescription = place.description !== null ? place.description : '';\n-            // const comment = place.place_comment.comment !== null ? place.place_comment.comment : '';\n-            const comment = place.place_comment?.comment || '';\n-\n-\n-            var textarea = `\n-            <div class=\"flex flex-col items-end w-full mt-4 mb-6\">\n-                <div class=\"px-3 py-2 h-[60px] border-0 focus:outline-none focus:border-0 focus:ring-0 bg-[#2d9bf0] border-0 italic text-white placeholder-white leading-2 text-sm w-10/12\">\n-                ${userdescription}\n-                </div>\n-            </div>\n-            `;\n-\n-            if (isUserOwner) {\n-                textarea = `\n-                <div class=\"flex flex-col items-end w-full mt-4 mb-6\">\n-                <textarea type=\"text\" data-id=\"${place.id}\" id=\"myTextArea\" class=\"h-[60px] border-0 focus:outline-none focus:border-0 focus:ring-0 bg-[#2d9bf0] border-0 italic text-white placeholder-white leading-2 text-sm w-10/12\" placeholder=\"Place for a comment max 120 characters\">${userdescription}</textarea>\n-                </div>\n-            `;\n-            }\n-\n-\n-\n-\n-            username = place.user.name;\n-\n-\n-\n-\n-            const givenDate = new Date(place.created_at); // Replace with your given date\n-            const options = {\n-                year: 'numeric',\n-                month: '2-digit',\n-                day: '2-digit'\n-            };\n-            const formattedDate = givenDate.toLocaleDateString('en-US', options);\n-            // pics = place.image0;\n-            placelatitude = place.latitude;\n-            placelongitude = place.longitude;\n-            var obsrvTotal = Object.keys(place.observations_detail).length;\n-\n-\n-            if ((place.place_detail) && obsrvTotal == 0) {\n-                icon2 = placeIcon;\n-            }\n-            if ((place.place_detail) && obsrvTotal > 0) {\n-                icon2 = bothIcon;\n-            }\n-            if ((place.place_detail) == null && obsrvTotal > 0) {\n-                icon2 = observationIcon;\n-            }\n-\n-\n-\n-\n-            var observationsList = '';\n-\n-            if (obsrvTotal > 0) {\n-                place.observations_detail.forEach(observationDetail => {\n-                    observationsList += generateObservationHTML(observationDetail);\n-                }, '');\n-            } else {\n-                observationsList += generateObservationHTML({\n-                    observation: 'null',\n-                    observation_child: null,\n-\n-                    feeling: {\n-                        image: ''\n-                    }\n-                }, place);\n-            }\n-\n-            var like = false;\n-            if (likedPlaces.includes(place.id)) {\n-                like = true;\n-            }\n-\n-\n-            markerx = L.marker([placelatitude, placelongitude], {\n-                icon: icon2\n-            }).addTo(mymap0).bindPopup(\n-\n-\n-                `<div class=\"bg-[#2d9bf0] p-0 w-full\" x-data=\"{ viewp: false,viewo: false }\">\n-\n-                    <div class=\"flex items-center justify-start gap-3 -mb-4 overflow-hidden\">\n-                        <div class=\"flex flex-col items-center justify-center\">\n-                            <div class=\"rounded-full bg-[#2d9bf0] border-4 border-white p-3 w-[68px] h-[68px]\">\n-                                <img class=\"w-full h-full\" src=\"{{ asset('new_img/image.png') }}\" />\n-                            </div>\n-                        </div>\n-                        <div class=\"flex gap-4 mt-4\">\n-                            <div class=\"text-center\">\n-                                <img src=\"{{ asset('img/cam-2.PNG') }}\" alt=\"\" class=\"h-6 w-7\">\n-                                <div @click=\"viewp=!viewp\" class=\"font-light text-white font-sm\">view</div>\n-                            </div>\n-                            <span class=\"text-lg italic font-extrabold text-white\">\n-                            ` + placename + `\n-                            </span>\n-                            ` + addicon + `\n-\n-\n-                        </div>\n-                    </div>\n-\n-                    ` + observationsList + `\n-\n-                    ` + textarea + `\n-\n-\n-\n-                    <div x-data=\"activeliked(${place.id},${like})\" class=\"absolute bottom-[-5px] w-full left-0 px-[10px]\">\n-                        <div class=\"flex items-center justify-between italic font-light text-white\">\n-                            <div class=\"flex items-center w-2/5 gap-10 likecomment\">\n-                                <div @click=\"comment${place.id}=!comment${place.id}\" class=\"cursor-pointer\"><img src=\"{{ asset('img/msg.PNG') }}\" class=\"h-9 mt-[8px]\"></div>\n-\n-                                <div onclick=\"setlike(${place.id},this)\" @click=\"like${place.id}=!like${place.id}\" class=\"cursor-pointer bg-[#0078d9] text-center text px-2 rounded\">\n-                                    <i class=\"fa fa-heart\"\n-                                    :class=\"like${place.id} ? 'fa-heart text-[#ffc543] liked' : 'fa-heart-o nolike'\"\n-                                    ></i></div>\n-                            </div>\n-                            <div class=\"w-3/5\">Added by ` + username + ` on ` + formattedDate +\n-                `</div>\n-                        </div>\n-\n-                        <div class=\"absolute left-0 w-full\" x-show=\"comment${place.id}\">\n-                            <textarea type=\"text\" data-id=\"${place.id}\" class=\"feedback w-full rounded-xl h-[60px] focus:outline-none focus:border-0 focus:ring-0 bg-[#2d9bf0] border-0 italic text-white placeholder-white leading-2 text-sm w-10/12\" placeholder=\"Put your feedback\">` +\n-                comment + `</textarea>\n-                            <button onclick=\"saveComment(this)\" class=\"font-bold border-2 border-site px-2 py-1 text-white bg-[#2d9bf0] rounded-3xl cursor-pointer float-right\">Save</button>\n-                            <div @click=\"comment${place.id}=false\" class=\"hideCommentBox\"></div>\n-                        </div>\n-                    </div>\n-\n-                    <div x-show=\"viewp\" class=\"fixed top-0 w-full height-[30vh] bg-white rounded\">\n-                  \n-                        <img src=\"storage/uploads/place/${place.place_image}\"  class=\"w-full h-full\" />\n-                    \n-                    </div>\n                      <div x-show=\"viewo\" class=\"fixed top-0 w-full height-[30vh] bg-white rounded\">\n                   \n                         <img src=\"storage/uploads/observation/${place.obsevation_image}\"  class=\"w-full h-full\" />\n                     \n@@ -2977,1494 +1488,4 @@\n             }\n         });\n     </script>\n @endsection\n-@php\n-    $locale = session()->get('locale');\n-    if ($locale == null) {\n-        $locale = 'en';\n-    }\n-@endphp\n-@extends('layouts.app')\n-\n-@section('main')\n-    <div data-barba=\"container\">\n-        <div class=\"flex flex-col mx-auto\">\n-            <div class=\"\">\n-                <div class=\"relative\">\n-\n-\n-                    @if (backpack_auth()->user()->id)\n-                        <div class=\"fixed right-0 z-20 flex items-center justify-center p-4 rounded-full cursor-pointer top-4\"\n-                            id=\"openPopup_profile\">\n-                            <img class=\"object-cover border-2 rounded-full border-site h-14 w-14\"\n-                                src=\"/storage/uploads/avatar/{{ backpack_auth()->user()->avatar }}\" alt=\"\">\n-                        </div>\n-                    @endif\n-\n-                    <div onclick=\"mylocation()\"\n-                        class=\"fixed z-20 flex items-center justify-center p-4 bg-transparent rounded-full cursor-pointer h-14 w-20 bottom-[6.8rem] left-4\">\n-                        <img src=\"{{ asset('img/location.png') }}\" class=\"w-20 h-12\" alt=\"\">\n-                    </div>\n-                    <a href=\"/filter\"\n-                        class=\"fixed z-20 flex items-center justify-center p-1 text-xl bg-white border-2 border-black rounded-full h-14 w-14 bottom-28 right-4\">\n-                        <div class=\"\"> <img src=\"{{ asset('img/eye.png') }}\" class=\"w-8 h-6\" alt=\"\"></div>\n-                    </a>\n-\n-                    <div class=\"flex justify-center items-center\">\n-                        <span class=\"fixed z-[30] top-10 mr-20 text-center\">\n-                            Explore the map to view the activities of other users.\n-                        </span>\n-                    </div>\n-\n-\n-                    <div id=\"map\" class=\"absolute w-[100vw] z-10 h-[90vh]\"></div>\n-                </div>\n-\n-                <div x-data=\"{ modelOpen: false, showMore: false, hidetab: 'no', tab: 'place', searchQuery: '' }\">\n-                    <div\n-                        class=\"fixed bottom-0 z-50 w-full pt-3 pb-8 text-xl font-semibold text-center shadow-xl rounded-t-3xl bg-gray-50 \">\n-\n-                        <div class=\"flex items-center justify-center\">\n-                            <div class=\"py-0.5 w-14 mb-3 rounded-full px-4 bg-black\">\n-\n-                            </div>\n-\n-                        </div>\n-\n-\n-                        <div class=\"flex\">\n-                            <div class=\"absolute left-16 bottom-[18px] \">\n-                                <div class=\"pl-4 py-3 pr-2.5 bg-[#ffa726] border-2 border-white rounded-full h-14 w-14\">\n-                                    <span class=\"w-10 h-14\"><img src=\"{{ asset('img/search.png') }}\" class=\"w-9 h-7\"\n-                                            alt=\"\"></span>\n-                                </div>\n-\n-                            </div>\n-                            <div class=\"absolute left-6 bottom-[18px] \">\n-                                <div class=\"p-3 border-2 border-white rounded-full bg-site h-14 w-14\">\n-                                    <img src=\"{{ asset('new_img/image.png') }}\" class=\"w-7 h-7\" alt=\"\">\n-                                </div>\n-\n-                            </div>\n-                        </div>\n-\n-                        <div class=\"w-full pt-4 addToMap\" @click=\"tab ='place'; modelOpen =true; searchQuery=''\">\n-                            <span\n-                                class=\"border-2 border-site w-full px-12 py-4 text-white bg-[#2d9bf0] rounded-3xl cursor-pointer\">\n-                                Add to Pin\n-                            </span>\n-\n-                        </div>\n-\n-\n-                        <div class=\"absolute right-5 bottom-[25px] \">\n-                            <div class=\"p-1 rounded-full bg-site w-9\">\n-                                <span class=\"italic font-bold text-white\">\n-                                    i\n-                                </span>\n-                            </div>\n-                        </div>\n-\n-                    </div>\n-\n-\n-                    <div class=\"parentDiv\" x-data=\"{ height: 'auto' }\">f\n-                        <button class=\"hidden OpenObservationModel\"\n-                            @click=\"modelOpen=true; showMore = true; hidetab = 'place'; tab='observation'; height = '100vh';\"></button>\n-                        <button class=\"hidden openPlaceModel\"\n-                            @click=\"modelOpen=true; showMore = true; hidetab = 'observation'; tab='place'; height = '100vh';\"></button>\n-\n-                        <div x-cloak x-show=\"modelOpen \" class=\"fixed bottom-0 z-50 overflow-y-auto\"\n-                            aria-labelledby=\"modal-title\" role=\"dialog\" aria-modal=\"true\">\n-                            <div class=\"flex items-end justify-center text-center\">\n-                                <div x-cloak @click=\"modelOpen = false; hidetab = 'no'\" x-show=\"modelOpen\"\n-                                    class=\"fixed inset-0 transition-opacity bg-gray-500 closeAddProcess bg-opacity-40\"\n-                                    aria-hidden=\"true\">\n-                                </div>\n-\n-                                <div x-cloak x-show=\"modelOpen\"\n-                                    x-transition:enter=\"transition ease-out duration-300 transform\"\n-                                    x-transition:enter-start=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n-                                    x-transition:enter-end=\"opacity-100 translate-y-0 sm:scale-100\" {{-- x-transition:leave=\"transition ease-in duration-200 transform\" --}}\n-                                    class=\"transition-height z-50 w-screen pb-16 transition-all transform bg-white h-[50%] shadow-xl mt-60 rounded-t-3xl\"\n-                                    :style=\"'height: ' + height\" :class=\"{ 'overflow-auto': showMore }\">\n-\n-                                    <div class=\"p-6 lg:p-12\">\n-\n-                                        @if ($edit_id)\n-                                            <a href=\"/\" class=\"block mb-4 closeAddProcess\" class=\"mb-4\">\n-                                                <img src=\"{{ asset('img/icons/arrow.png') }}\" class=\"arrow\">\n-                                            </a>\n-                                        @else\n-                                            <div class=\"mb-4 closeAddProcess\"\n-                                                @click=\"modelOpen=false; showMore = false; hidetab = 'no'; height = 'auto';\"\n-                                                x-show=\"showMore\" class=\"mb-4\">\n-                                                <img src=\"{{ asset('img/icons/arrow.png') }}\" class=\"arrow\">\n-                                            </div>\n-                                        @endif\n-\n-\n-\n-\n-\n-                                        <div class=\"flex items-center gap-4 justity-between\">\n-                                            <input type=\"text\" class=\"w-full px-2 py-2 bg-white rounded-full\"\n-                                                placeholder=\"Choose tags or add new city layers\" name=\"searchInput\"\n-                                                x-model=\"searchQuery\" @keyup=\"showMore = true; height = '100vh'\">\n-\n-                                            <a :href=\"tab === 'place' ?\n-                                                '/add-new/place{{ $edit_id ? '/' . urlencode($edit_id) : '' }}' :\n-                                                '/add-new/observation{{ $edit_id ? '/' . urlencode($edit_id) : '' }}'\"\n-                                                class=\"p-2 transition-all border-2 rounded-full tabNewLink\"\n-                                                :class=\"tab == 'place' ? 'bg-[#2d9bf0] border-[#2d9bf0]' :\n-                                                    'bg-[#ffa726] border-[#ffa726]'\">\n-                                                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\"\n-                                                    stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-6 h-6 text-white\">\n-                                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\"\n-                                                        d=\"M12 6v12m6-6H6\" />\n-                                                </svg>\n-                                            </a>\n-\n-                                        </div>\n-\n-                                        <div class=\"mt-2\">\n-                                            Drop a pin to share observations, opinions and ideas.\n-                                        </div>\n-\n-\n-\n-\n-\n-                                        <div class=\"flex items-center justify-center mt-12 homeTabs\">\n-                                            <div class=\"-mr-1 cursor-pointer\" x-show=\"hidetab!='place'\"\n-                                                @click=\"tab='place'\">\n-                                                <div class=\"flex flex-col w-[84px] justify-center items-center\">\n-                                                    <div class=\"bg-[#2d9bf0] border-2 border-white rounded-full \"\n-                                                        :class=\"tab == 'place' || tab == 'place1' ?\n-                                                            'bg-[#2d9bf0] z-10 p-[26px] placeTabActive' :\n-                                                            'bg-[#2d9bf0]/70 p-[40px]'\">\n-                                                        <img src=\"{{ asset('new_img/image.png') }}\" class=\"w-7 h-7\"\n-                                                            :class=\"tab == 'place' || tab == 'place1' ? 'block' : 'hidden'\"\n-                                                            id=\"place\" alt=\"\">\n-                                                    </div>\n-                                                    <div class=\"text-sm font-semibold text-center\"\n-                                                        :class=\"tab == 'place' ? 'text-black' : 'text-black/50'\">\n-                                                        Browse Places\n-                                                    </div>\n-                                                </div>\n-                                            </div>\n-                                            <div class=\"-ml-1 cursor-pointer\" x-show=\"hidetab!='observation'\"\n-                                                @click=\"tab='observation'\">\n-                                                <div class=\"flex flex-col w-[75px] justify-center items-center\">\n-\n-                                                    <div class=\"flex items-center justify-center border-2 border-white rounded-full \"\n-                                                        :class=\"tab == 'observation' || tab == 'observation1' ?\n-                                                            'bg-[#ffa726] z-10 p-[20px] observationTabActive' :\n-                                                            'bg-[#ffa726]/70 p-[40px]'\">\n-                                                        <div class=\"flex items-center justify-center w-10 h-10 text-2xl\"\n-                                                            :class=\"tab == 'observation' || tab == 'observation1' ? 'block' :\n-                                                                'hidden'\"\n-                                                            id=\"observation\" alt=\"\">🔍</div>\n-                                                    </div>\n-\n-                                                    <div class=\"text-sm font-semibold text-center \"\n-                                                        :class=\"tab == 'observation' ? 'text-black' : 'text-black/50'\">\n-                                                        Browse Observation\n-                                                    </div>\n-                                                </div>\n-                                            </div>\n-                                        </div>\n-\n-                                        <div x-data=\"{ active: '{{ isset($edited_place->placeDetail->place_id) ? 'PL_' . $edited_place->placeDetail->place_id : '' }}' }\">\n-\n-                                            <div class=\"flex items-start justify-center gap-10 mt-6 mb-6 italic font-semibold all-places\"\n-                                                x-show=\"tab=='place'\">\n-\n-                                                <div class=\"grid grid-cols-3 gap-10 italic font-semibold\"\n-                                                    id=\"searchResults2Pls\">\n-\n-\n-                                                    @foreach ($allPlaces as $key => $place)\n-                                                        <div x-show=\"(showMore || {{ $key }} < 2) && (searchQuery === '' || '{{ strtolower($place->name) }}'.includes(searchQuery.toLowerCase()))\"\n-                                                            class=\"flex flex-col items-center cursor-pointer\"\n-                                                            @click=\"active='PL_{{ $place->id }}'\">\n-                                                            <div data-place=\"{{ json_encode(['id' => $place->id, 'name' => $place->name, 'child' => $place->subplaces]) }}\"\n-                                                                class=\"w-[76px] h-[76px] rounded-full bg-[#2d9bf0]\"\n-                                                                :class=\"active == 'PL_{{ $place->id }}' ?\n-                                                                    'border-4 border-[#12CDD4] placeActive' : ''\">\n-                                                                <div\n-                                                                    class=\"flex items-center justify-center h-full align-item-center\">\n-                                                                    <img src=\"{{ asset('new_img/image.png') }}\"\n-                                                                        class=\"w-7 h-7\" />\n-                                                                </div>\n-                                                            </div>\n-                                                            <span\n-                                                                class=\"mt-4 font-normal text-black\">{{ $place->name }}</span>\n-                                                        </div>\n-                                                    @endforeach\n-\n-                                                    <div x-show=\"!showMore\" class=\"cursor-pointer\">\n-                                                        <button @click=\"showMore = true; height = '100vh'\">\n-                                                            <div class=\"rounded-full border-site border-4 p-[22px]\">\n-                                                                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\"\n-                                                                    viewBox=\"0 0 24 24\" stroke-width=\"3\"\n-                                                                    stroke=\"currentColor\"\n-                                                                    class=\"w-6 h-6 font-bold color-site\">\n-                                                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\"\n-                                                                        d=\"M12 6v12m6-6H6\" />\n-                                                                </svg>\n-                                                            </div>\n-                                                            <div class=\"mt-4 font-normal text-black\">See more</div>\n-                                                        </button>\n-                                                    </div>\n-                                                </div>\n-                                            </div>\n-                                        </div>\n-                                        <div class=\"\" x-data=\"{ active: '' }\">\n-                                            <div class=\"flex items-center justify-center gap-10 mt-6 mb-6 italic font-semibold\"\n-                                                x-show=\"tab=='observation'\">\n-                                                <div class=\"grid grid-cols-3 gap-10 italic font-semibold\"\n-                                                    id=\"searchResults2Obs\">\n-\n-                                                    @foreach ($allObservations as $key => $observation)\n-                                                        <div x-data=\"{ active: '{{ $edited_place && $edited_place->observationsDetail->contains('observation_id', $observation->id) ? 'OB_' . $observation->id : '' }}' }\"\n-                                                            x-show=\"(showMore || {{ $key }} < 2) && (searchQuery === '' || '{{ strtolower($observation->name) }}'.includes(searchQuery.toLowerCase()))\"\n-                                                            class=\"flex flex-col items-center cursor-pointer\"\n-                                                            @click=\"active = !active ? 'OB_{{ $observation->id }}' : false\">\n-\n-                                                            <div data-observations=\"{{ json_encode(['id' => $observation->id, 'name' => $observation->name, 'child' => $observation->subobservs]) }}\"\n-                                                                class=\"w-[76px] h-[76px] rounded-full bg-[#ffa726]\"\n-                                                                :class=\"active == 'OB_{{ $observation->id }}' ?\n-                                                                    'border-4 border-[#12CDD4] observationActive' : ''\">\n-                                                                <div\n-                                                                    class=\"flex items-center justify-center h-full align-item-center\">\n-                                                                    <img src=\"{{ asset('new_img/sad.png') }}\"\n-                                                                        alt=\"\" class=\"w-8 h-8 -mr-1\">\n-                                                                    <img src=\"{{ asset('new_img/happy.png') }}\"\n-                                                                        alt=\"\" class=\"w-8 h-8 -ml-1\">\n-                                                                </div>\n-                                                            </div>\n-                                                            <span\n-                                                                class=\"mt-4 font-normal text-black\">{{ $observation->name }}</span>\n-                                                        </div>\n-                                                    @endforeach\n-\n-\n-\n-                                                    <div x-show=\"!showMore\"\n-                                                        class=\"flex flex-col items-center justify-center cursor-pointer\">\n-                                                        <button @click=\"showMore = true; height = '100vh'\" type=\"button\">\n-                                                            <div class=\"rounded-full border-[#ffa726] border-4  p-[22px]\">\n-                                                                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\"\n-                                                                    viewBox=\"0 0 24 24\" stroke-width=\"3\"\n-                                                                    stroke=\"currentColor\"\n-                                                                    class=\"w-6 h-6 font-bold text-[#ffa726]\">\n-                                                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\"\n-                                                                        d=\"M12 6v12m6-6H6\" />\n-                                                                </svg>\n-\n-                                                            </div>\n-                                                            <div class=\"mt-4 font-normal text-black\">See more</div>\n-                                                        </button>\n-\n-                                                    </div>\n-\n-                                                </div>\n-\n-\n-\n-                                            </div>\n-                                        </div>\n-\n-\n-                                    </div>\n-\n-                                </div>\n-                            </div>\n-                        </div>\n-                        <div x-cloak x-show=\"modelOpen\" class=\"fixed bottom-0 z-50 w-full py-4 bg-white\">\n-                            <div class=\"flex items-center justify-center\">\n-                                <div\n-                                    class=\"submitData border-2 border-site flex cursor-pointer items-center justify-center gap-2 px-8 py-3 text-lg font-extrabold text-white bg-[#2d9bf0] rounded-3xl hover:shadow  hover:bg-[#268ede] transition-all\">\n-                                    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\"\n-                                        stroke-width=\"3\" stroke=\"currentColor\" class=\"w-6 h-6\">\n-                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\"\n-                                            d=\"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z\" />\n-                                    </svg>\n-                                    Add new\n-                                </div>\n-                            </div>\n-                        </div>\n-                    </div>\n-\n-\n-\n-\n-\n-\n-\n-\n-                </div>\n-\n-\n-                <div class=\"parentDiv\" x-data=\"{ subModelOpen: false, subtab: '' }\" x-cloak x-show=\"subModelOpen\">\n-\n-                    <button class=\"hidden subModeltrigerPlace\" @click=\"subModelOpen=true;subtab='place'\"></button>\n-\n-                    <button class=\"hidden subModeltrigerObservation\"\n-                        @click=\"subModelOpen=true;subtab='observation'\"></button>\n-\n-\n-                    <div x-data=\"{ subactive: '{{ isset($edited_place->placeDetail->place_child_id) ? 'SPL_' . $edited_place->placeDetail->place_child_id : '' }}' }\"\n-                        class=\"fixed h-screen overflow-auto bottom-0 bg-white z-[60] w-full pb-8 text-xl font-semibold text-center shadow-xl\">\n-\n-                        <div class=\"p-6 lg:p-12\">\n-\n-                            <div @click=\"subModelOpen=false;subactive='';subtab=''\"\n-                                class=\"mb-4 OpenObservationModel openPlaceModel\">\n-                                <img src=\"{{ asset('img/icons/arrow.png') }}\" class=\"arrow\">\n-                            </div>\n-\n-\n-                            <div class=\"flex items-center justify-center mt-12 homeTabs\">\n-                                <div class=\"-mr-1 cursor-pointer\" x-show=\"subtab=='place'\">\n-                                    <div class=\"flex flex-col w-[84px] justify-center items-center\">\n-                                        <div class=\"bg-[#2d9bf0] border-2 border-white rounded-full\"\n-                                            :class=\"subtab == 'place' ?\n-                                                'bg-[#2d9bf0] z-10 p-[26px] subplaceTabActive' :\n-                                                'bg-[#2d9bf0]/70 p-[40px]'\">\n-                                            <img src=\"{{ asset('new_img/image.png') }}\" class=\"w-7 h-7\"\n-                                                :class=\"subtab == 'place' ? 'block' : 'hidden'\" alt=\"\">\n-                                        </div>\n-\n-                                    </div>\n-                                </div>\n-                                <div class=\"-ml-1 cursor-pointer\" x-show=\"subtab=='observation'\">\n-                                    <div class=\"flex flex-col w-[75px] justify-center items-center\">\n-\n-                                        <div class=\"flex items-center justify-center border-2 border-white rounded-full\"\n-                                            :class=\"subtab == 'observation' ?\n-                                                'bg-[#ffa726] z-10 p-[20px] subobservationTabActive' :\n-                                                'bg-[#ffa726]/70 p-[40px]'\">\n-                                            <div class=\"flex items-center justify-center w-10 h-10 text-2xl\"\n-                                                :class=\"subtab == 'observation' ? 'block' :\n-                                                    'hidden'\">\n-                                                <div class=\"flex items-center justify-center h-full align-item-center\">\n-                                                    <img src=\"{{ asset('new_img/sad.png') }}\" alt=\"\"\n-                                                        class=\"w-8 h-8 -mr-1\"> <img\n-                                                        src=\"{{ asset('new_img/happy.png') }}\" alt=\"\"\n-                                                        class=\"w-8 h-8 -ml-1\">\n-                                                </div>\n-                                            </div>\n-                                        </div>\n-\n-\n-                                    </div>\n-                                </div>\n-                            </div>\n-\n-                            <div>\n-                                <div x-show=\"subtab=='place'\" class=\"flex flex-col items-center justify-center mt-12\">\n-                                    <div class=\"mb-10 placeparent\"></div>\n-\n-                                    <div class=\"grid grid-cols-3 gap-10 italic font-semibold subPlacesItems\">\n-\n-                                    </div>\n-                                    <div class=\"mt-4 text-center font-normal\">\n-                                        Tap \"submit\" to pin this place to the map and share it with other users.\n-                                        Provide more details by adding a description, and uploading a photo.\n-\n-                                    </div>\n-                                    <div class=\"flex items-center justify-between w-2/3 pb-12 pb-16 pt-28\">\n-                                        <label class=\"flex flex-col items-center gap-1 cursor-pointer\" for=\"image-upload\">\n-                                            <input id=\"image-upload\" type=\"file\" class=\"hidden place_image\"\n-                                                accept=\".jpg, .png\">\n-                                            <img src=\"{{ asset('img/cam-2.PNG') }}\" alt=\"\" class=\"w-10 h-9\">\n-                                            <div class=\"text-sm\">Upload image</div>\n-                                        </label>\n-\n-                                        <div class=\"relative\" x-data=\"{ placeText: false }\">\n-                                            <div @click=\"placeText = !placeText\"\n-                                                class=\"flex flex-col items-center gap-1 cursor-pointer\">\n-                                                <img src=\"{{ asset('img/msg.PNG') }}\" alt=\"\" class=\"w-10 h-9\">\n-                                                <div class=\"text-sm\">Add description</div>\n-                                            </div>\n-                                            <textarea class=\"font-normal place_description absolute px-2 py-2 bg-white rounded-xl w-[300px] right-0\"\n-                                                x-show=\"placeText\">{{ $edited_place && $edited_place->place_description ? $edited_place->place_description : '' }}</textarea>\n-                                        </div>\n-\n-                                    </div>\n-                                </div>\n-\n-                                <div x-show=\"subtab=='observation'\" class=\"flex flex-col items-center justify-center\">\n-                                    <div class=\"grid gap-10 mt-12 italic font-semibold grid-cols subObservationItems\">\n-\n-\n-\n-\n-                                    </div>\n-\n-\n-\n-                                    <div class=\"mt-4 text-center font-normal\">\n-                                        Tap \"submit\" to pin this observation to the map and share it with other users.\n-                                        Provide more details through rating, adding a description, and uploading a photo.\n-\n-                                    </div>\n-\n-\n-                                    <div class=\"flex items-center justify-between w-2/3 pt-20 pb-16 mb-12\">\n-                                        <label for=\"obser-image-upload\"\n-                                            class=\"flex flex-col items-center gap-1 cursor-pointer\">\n-                                            <input id=\"obser-image-upload\" type=\"file\"\n-                                                class=\"hidden observation_image\" accept=\".jpg, .png\">\n-                                            <img src=\"{{ asset('img/cam.PNG') }}\" alt=\"\" class=\"w-10 h-9\">\n-                                            <div class=\"text-sm\">Upload image</div>\n-                                        </label>\n-\n-\n-\n-                                        <div class=\"relative\" x-data=\"{ observationText: false }\">\n-                                            <div @click=\"observationText = !observationText\"\n-                                                class=\"flex flex-col items-center gap-1 cursor-pointer\">\n-                                                <img src=\"{{ asset('img/msg-2.PNG') }}\" alt=\"\" class=\"w-10 h-9\">\n-                                                <div class=\"text-sm\">Add description</div>\n-                                            </div>\n-                                            <textarea class=\"font-normal observation_description absolute px-2 py-2 bg-white rounded-xl w-[300px] right-0\"\n-                                                x-show=\"observationText\">{{ $edited_place && $edited_place->obsevation_description ? $edited_place->obsevation_description : '' }}</textarea>\n-                                        </div>\n-\n-                                    </div>\n-\n-                                </div>\n-                            </div>\n-\n-\n-                        </div>\n-\n-                    </div>\n-\n-\n-                    <div class=\"fixed w-full bottom-0 z-[60] bg-white py-4\">\n-                        <div class=\"flex items-center justify-center gap-6\">\n-                            <div @click=\"subModelOpen=false;\"\n-                                class=\"flex items-center justify-center gap-2 px-8 py-3 text-lg font-extrabold transition-all bg-white border-2 cursor-pointer border-site color-site rounded-3xl\">\n-                                Close\n-                            </div>\n-\n-                            <div\n-                                class=\"submitDataAll flex cursor-pointer items-center border-2 border-site justify-center gap-2 px-8 py-3 text-lg font-extrabold text-white bg-[#2d9bf0] rounded-3xl  hover:bg-[#268ede] transition-all\">\n-                                Submit\n-                            </div>\n-\n-                        </div>\n-                    </div>\n-\n-\n-                </div>\n-\n-\n-            </div>\n-        </div>\n-    </div>\n-\n-\n-    <div id=\"popup_profile\"\n-        class=\"p-6 lg:p-12 w-full h-screen lg:w-4/12 fixed bg-white shadow-md ml-[-2px] overflow-y-auto right-0 hidden z-50 transform translate-x-full transition-transform duration-300\">\n-        <a onclick=\"close_pop_profile()\">\n-            <img src=\"{{ asset('img/icons/arrow.png') }}\" class=\"arrow\">\n-\n-        </a>\n-        <div class=\"p-4\">\n-\n-            <div class=\"top\">\n-                <div class=\"topo\">\n-\n-                    <label for=\"image\" class=\"cursor-pointer new\">\n-                        <img class=\"object-cover w-24 h-24 border-blue-500 rounded-full border-7 nimage mimage\"\n-                            src=\"/storage/uploads/avatar/{{ backpack_auth()->user()->avatar }}\" alt=\"\">\n-\n-                    </label>\n-                </div>\n-                <div class=\"tops\">\n-                    <div class=\"toptaxt\">Hello \"{{ backpack_auth()->user()->name }}\"!</div>\n-                    <a href=\"/profile\" class=\"vieprofile\">View Profile</a>\n-                </div>\n-\n-\n-            </div>\n-            <br />\n-            <br />\n-            <div class=\"list\">\n-                <a href=\"/\" class=\"lbox\">\n-                    <div\n-                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n-                        +</div>\n-                    <div class=\"ltax\">Add to map</div>\n-                </a>\n-                <a href=\"/dashboard\" class=\"lbox\">\n-                    <div\n-                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n-                        ▄</div>\n-                    <div class=\"ltax\">Dashboard</div>\n-                </a>\n-                <a href=\"/community-achievements\" class=\"lbox\">\n-                    <div\n-                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n-                        ⌃</div>\n-                    <div class=\"ltax\">Community achievements</div>\n-                </a>\n-                <a href=\"/about-us\" class=\"lbox\">\n-                    <div\n-                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n-                        ?</div>\n-                    <div class=\"ltax\">About City Layers</div>\n-                </a>\n-                <a href=\"/contact-us\" class=\"lbox\">\n-                    <div\n-                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n-                        •</div>\n-\n-                    <div class=\"ltax\">Term & contact</div>\n-                </a>\n-                <a href=\"/privacy-policy\" class=\"lbox\">\n-                    <div\n-                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n-                        !</div>\n-\n-                    <div class=\"ltax\">Privacy Policy and Terms of Service</div>\n-                </a>\n-                <a href=\"/impressum-accessibility\" class=\"lbox\">\n-                    <div\n-                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n-                        i</div>\n-                    <div class=\"ltax\">Impressum & accessibility</div>\n-                </a>\n-                <a href=\"/admin/logout\" class=\"lbox\">\n-                    <div\n-                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n-                        i</div>\n-                    <div class=\"ltax\">Sign out</div>\n-                </a>\n-            </div>\n-            <br />\n-            <div class=\"belo\">\n-                <div class=\"mapping\">Maps are public and visible to all users. Your username will be shown along with your\n-                    pins and added layers.</div>\n-                <div class=\"cursor-pointer closebt\" onclick=\"close_pop_profile()\">Close</div>\n-            </div>\n-        </div>\n-    </div>\n-\n-    <script>\n-        const openPopupButton = document.getElementById('openPopup_profile');\n-        const popup = document.getElementById('popup_profile');\n-\n-        openPopupButton.addEventListener('click', () => {\n-            popup.style.transform = 'translateX(0)';\n-            popup.style.display = 'block';\n-        });\n-\n-        function close_pop_profile() {\n-\n-\n-            popup.style.transform = 'translateX(100%)';\n-            setTimeout(() => {\n-                popup.style.display = 'none';\n-            }, 300);\n-        }\n-    </script>\n-\n-\n-    <script>\n-        data = {!! json_encode($all_data) !!};\n-\n-        userid = {!! json_encode($userid) !!};\n-\n-        markers = {};\n-        const edit_id = {{ $edit_id ? $edit_id : '0' }};\n-        let marker = null;\n-\n-        let pin = [48.6890, 7.14086];\n-        if (data && data[0] && typeof data[0].latitude !== 'undefined' && typeof data[0].longitude !== 'undefined') {\n-            pin = [data[0].latitude, data[0].longitude];\n-        }\n-        let mymap0 = L.map('map').setView(pin, 6);\n-\n-        // https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png\n-\n-        osmLayer0 = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {\n-            subdomains: 'abcd',\n-            minZoom: 0,\n-            maxZoom: 19,\n-            ext: 'png'\n-        }).addTo(mymap0);\n-        mymap0.zoomControl.remove();\n-        mymap0.addLayer(osmLayer0);\n-        mymap0.touchZoom.enable();\n-        mymap0.scrollWheelZoom.enable();\n-\n-        let place_data = {\n-            place_id: '',\n-            child_place_id: '',\n-            observations: '',\n-            place_description: '',\n-            observation_description: '',\n-            latitude: '',\n-            longitude: '',\n-            tab: 'place',\n-        };\n-\n-\n-        var temp_des = [];\n-        var temp_comment = [];\n-        var temp_likes = [];\n-        var temp_dislikes = [];\n-\n-\n-        var currentPosIcon = L.icon({\n-            iconUrl: '/new_img/current-pos.svg', // Replace with the path to your icon image\n-            iconSize: [62, 62], // Adjust the icon size as needed\n-            iconAnchor: [16, 16], // Adjust the anchor point of the icon\n-            popupAnchor: [0, -16] // Adjust the popup anchor for the icon\n-        });\n-        var currentPosIcon = L.divIcon({\n-            className: 'transparent-icon',\n-            iconSize: [64, 64], // Adjust the size of the icon including the border\n-            iconAnchor: [32, 32], // Adjust the anchor point of the icon\n-            html: '<div class=\"border-2 rounded-full border-site\"><img src=\"/new_img/current-pos.svg\" /></div>'\n-        });\n-\n-\n-        var placeIcon = L.divIcon({\n-            className: 'transparent-icon',\n-            html: `<div class=\"rounded-full bg-[#2d9bf0] border-2 border-white flex justify-center items-center p-4 w-[64px] h-[64px]\">\n-                    <img src=\"{{ asset('new_img/image.png') }}\" class=\"w-full h-full\" />\n-                </div>`\n-        });\n-        var bothIcon = L.divIcon({\n-            className: 'transparent-icon',\n-            html: `<div class=\"rounded-full bg-[#2d9bf0] border-2 border-white flex justify-center items-center w-[64px] h-[64px]\">\n-                        <div class=\"flex items-center justify-center h-full align-item-center\">\n-                            <img src=\"{{ asset('new_img/sad.png') }}\" alt=\"\" class=\"w-6 h-6 -mr-2\">\n-                            <img src=\"{{ asset('new_img/image.png') }}\" class=\"z-20 w-6 h-6\" />\n-                            <img src=\"{{ asset('new_img/happy.png') }}\" alt=\"\" class=\"w-6 h-6 -ml-2\">\n-                        </div>\n-                </div>`\n-        });\n-        var observationIcon = L.divIcon({\n-            className: 'transparent-icon',\n-            html: `<div class=\"rounded-full bg-[#ffa726] border-2 border-white flex justify-center items-center p-4 w-[64px] h-[64px]\">\n-                    <div class=\"flex\">\n-                     <img src=\"{{ asset('new_img/sad.png') }}\" alt=\"\" class=\"-mr-1 w-7 h-7\">\n-                     <img src=\"{{ asset('new_img/happy.png') }}\" alt=\"\" class=\"-ml-1 w-7 h-7\">\n-                    </div>\n-                 </div>`\n-        });\n-\n-\n-\n-        if (navigator.geolocation) {\n-\n-            //wait 3 seconds to get position\n-            getposition(success, fail)\n-\n-        } else {\n-            alert(\"Geolocation is not supported by this browser.\");\n-        }\n-\n-\n-        function getposition(success, fail) {\n-\n-            var is_echo = false;\n-            if (navigator && navigator.geolocation) {\n-                navigator.geolocation.getCurrentPosition(\n-                    function(pos) {\n-                        if (is_echo) {\n-                            return;\n-                        }\n-                        is_echo = true;\n-\n-                        place_data['latitude'] = pos.coords.latitude;\n-                        place_data['longitude'] = pos.coords.longitude;\n-\n-                        success(pos.coords.latitude, pos.coords.longitude);\n-                    },\n-                    function() {\n-                        if (is_echo) {\n-                            return;\n-                        }\n-                        is_echo = true;\n-                        fail();\n-                    }\n-                );\n-            } else {\n-                fail();\n-            }\n-\n-        }\n-\n-\n-\n-\n-        function success(lat, lng) {\n-            mymap0.setView([lat, lng], 10);\n-\n-            L.marker([lat, lng], {\n-                icon: currentPosIcon\n-            }).addTo(mymap0);\n-        }\n-\n-        function fail() {\n-            alert(\"location failed\");\n-        }\n-\n-\n-\n-        function generateObservationHTML(observationDetail, place) {\n-            var obsrName = '';\n-            var addicon = '';\n-            if (observationDetail.observation.name) {\n-                obsrName = (observationDetail.observation ? observationDetail.observation.name : '') +\n-                    (observationDetail.observation && observationDetail.observation_child ?\n-                        '<span class=\"text-xs font-light\"> → ' + observationDetail.observation_child.name + '</span>' : '');\n-            } else {\n-                obsrName = 'No Observation';\n-                if (place.user_id == userid) {\n-                    addicon = `\n-                    <div data-id=\"${place.id}\" class=\"cursor-pointer border-2 transition-all rounded-full bg-[#2d9bf0] border-white w-6 h-6 mt-1 noObservation\">\n-                        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"text-white\">\n-                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 6v12m6-6H6\"></path>\n-                        </svg>\n-                    </div>\n-                    `;\n-                }\n-            }\n-\n-\n-            return `\n-            <div class=\"flex items-center justify-start gap-3 -mb-4 overflow-hidden\">\n-                <div class=\"flex flex-col items-center justify-center\">\n-                    <div class=\"rounded-full bg-[#ffa726] border-4 border-white w-[68px] h-[68px]\">\n-                        <img src=\"${observationDetail.feeling.image}\" alt=\"\">\n-                    </div>\n-                </div>\n-                <div class=\"flex gap-4 mt-4\">\n-                    <div class=\"text-center\">\n-                        <img src=\"{{ asset('img/cam.PNG') }}\" alt=\"\" class=\"h-6 w-7\">\n-                        <div @click=\"viewo=!viewo\" class=\"font-light text-white font-sm\">view</div>\n-                    </div>\n-                    <span class=\"text-lg italic font-extrabold text-white whitespace-nowrap ` + (observationDetail\n-                .observation.id ? 'w-screen' : '') + `\">` + obsrName + `</span>\n-                    ` + addicon + `\n-                </div>\n-            </div>\n-            `;\n-        }\n-\n-        let count = 0;\n-        const likedPlaces = {!! json_encode($likedPlaces) !!};\n-\n-        const edited_place = {!! json_encode($edited_place) !!};\n-\n-\n-        for (let i = 0; i < data.length; i++) {\n-\n-            count = count + 1;\n-            place = data[i];\n-\n-\n-\n-            placename = 'No Place';\n-\n-            var addicon = '';\n-\n-            if (place.user_id == userid) {\n-                addicon = `\n-                    <div data-id=\"${place.id}\" class=\"cursor-pointer border-2 transition-all rounded-full bg-[#2d9bf0] border-white w-6 h-6 mt-1 noPlace\">\n-                        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"text-white\">\n-                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 6v12m6-6H6\"></path>\n-                        </svg>\n-                    </div>\n-                    `;\n-            }\n-\n-            if (place.place_detail) {\n-\n-                placename = (place.place_detail.place ? place.place_detail.place.name : '') +\n-                    (place.place_detail.place && place.place_detail.place_child ? '<span class=\"text-xs font-light\"> → ' +\n-                        place.place_detail.place_child.name + '</span>' : '');\n-\n-\n-                addicon = '';\n-            }\n-\n-\n-            const isUserOwner = place.user_id === userid;\n-            const userdescription = place.description !== null ? place.description : '';\n-            // const comment = place.place_comment.comment !== null ? place.place_comment.comment : '';\n-            const comment = place.place_comment?.comment || '';\n-\n-\n-            var textarea = `\n-            <div class=\"flex flex-col items-end w-full mt-4 mb-6\">\n-                <div class=\"px-3 py-2 h-[60px] border-0 focus:outline-none focus:border-0 focus:ring-0 bg-[#2d9bf0] border-0 italic text-white placeholder-white leading-2 text-sm w-10/12\">\n-                ${userdescription}\n-                </div>\n-            </div>\n-            `;\n-\n-            if (isUserOwner) {\n-                textarea = `\n-                <div class=\"flex flex-col items-end w-full mt-4 mb-6\">\n-                <textarea type=\"text\" data-id=\"${place.id}\" id=\"myTextArea\" class=\"h-[60px] border-0 focus:outline-none focus:border-0 focus:ring-0 bg-[#2d9bf0] border-0 italic text-white placeholder-white leading-2 text-sm w-10/12\" placeholder=\"Place for a comment max 120 characters\">${userdescription}</textarea>\n-                </div>\n-            `;\n-            }\n-\n-\n-\n-\n-            username = place.user.name;\n-\n-\n-\n-\n-            const givenDate = new Date(place.created_at); // Replace with your given date\n-            const options = {\n-                year: 'numeric',\n-                month: '2-digit',\n-                day: '2-digit'\n-            };\n-            const formattedDate = givenDate.toLocaleDateString('en-US', options);\n-            // pics = place.image0;\n-            placelatitude = place.latitude;\n-            placelongitude = place.longitude;\n-            var obsrvTotal = Object.keys(place.observations_detail).length;\n-\n-\n-            if ((place.place_detail) && obsrvTotal == 0) {\n-                icon2 = placeIcon;\n-            }\n-            if ((place.place_detail) && obsrvTotal > 0) {\n-                icon2 = bothIcon;\n-            }\n-            if ((place.place_detail) == null && obsrvTotal > 0) {\n-                icon2 = observationIcon;\n-            }\n-\n-\n-\n-\n-            var observationsList = '';\n-\n-            if (obsrvTotal > 0) {\n-                place.observations_detail.forEach(observationDetail => {\n-                    observationsList += generateObservationHTML(observationDetail);\n-                }, '');\n-            } else {\n-                observationsList += generateObservationHTML({\n-                    observation: 'null',\n-                    observation_child: null,\n-\n-                    feeling: {\n-                        image: ''\n-                    }\n-                }, place);\n-            }\n-\n-            var like = false;\n-            if (likedPlaces.includes(place.id)) {\n-                like = true;\n-            }\n-\n-\n-            markerx = L.marker([placelatitude, placelongitude], {\n-                icon: icon2\n-            }).addTo(mymap0).bindPopup(\n-\n-\n-                `<div class=\"bg-[#2d9bf0] p-0 w-full\" x-data=\"{ viewp: false,viewo: false }\">\n-\n-                    <div class=\"flex items-center justify-start gap-3 -mb-4 overflow-hidden\">\n-                        <div class=\"flex flex-col items-center justify-center\">\n-                            <div class=\"rounded-full bg-[#2d9bf0] border-4 border-white p-3 w-[68px] h-[68px]\">\n-                                <img class=\"w-full h-full\" src=\"{{ asset('new_img/image.png') }}\" />\n-                            </div>\n-                        </div>\n-                        <div class=\"flex gap-4 mt-4\">\n-                            <div class=\"text-center\">\n-                                <img src=\"{{ asset('img/cam-2.PNG') }}\" alt=\"\" class=\"h-6 w-7\">\n-                                <div @click=\"viewp=!viewp\" class=\"font-light text-white font-sm\">view</div>\n-                            </div>\n-                            <span class=\"text-lg italic font-extrabold text-white\">\n-                            ` + placename + `\n-                            </span>\n-                            ` + addicon + `\n-\n-\n-                        </div>\n-                    </div>\n-\n-                    ` + observationsList + `\n-\n-                    ` + textarea + `\n-\n-\n-\n-                    <div x-data=\"activeliked(${place.id},${like})\" class=\"absolute bottom-[-5px] w-full left-0 px-[10px]\">\n-                        <div class=\"flex items-center justify-between italic font-light text-white\">\n-                            <div class=\"flex items-center w-2/5 gap-10 likecomment\">\n-                                <div @click=\"comment${place.id}=!comment${place.id}\" class=\"cursor-pointer\"><img src=\"{{ asset('img/msg.PNG') }}\" class=\"h-9 mt-[8px]\"></div>\n-\n-                                <div onclick=\"setlike(${place.id},this)\" @click=\"like${place.id}=!like${place.id}\" class=\"cursor-pointer bg-[#0078d9] text-center text px-2 rounded\">\n-                                    <i class=\"fa fa-heart\"\n-                                    :class=\"like${place.id} ? 'fa-heart text-[#ffc543] liked' : 'fa-heart-o nolike'\"\n-                                    ></i></div>\n-                            </div>\n-                            <div class=\"w-3/5\">Added by ` + username + ` on ` + formattedDate +\n-                `</div>\n-                        </div>\n-\n-                        <div class=\"absolute left-0 w-full\" x-show=\"comment${place.id}\">\n-                            <textarea type=\"text\" data-id=\"${place.id}\" class=\"feedback w-full rounded-xl h-[60px] focus:outline-none focus:border-0 focus:ring-0 bg-[#2d9bf0] border-0 italic text-white placeholder-white leading-2 text-sm w-10/12\" placeholder=\"Put your feedback\">` +\n-                comment + `</textarea>\n-                            <button onclick=\"saveComment(this)\" class=\"font-bold border-2 border-site px-2 py-1 text-white bg-[#2d9bf0] rounded-3xl cursor-pointer float-right\">Save</button>\n-                            <div @click=\"comment${place.id}=false\" class=\"hideCommentBox\"></div>\n-                        </div>\n-                    </div>\n-\n-                    <div x-show=\"viewp\" class=\"fixed top-0 w-full height-[30vh] bg-white rounded\">\n-                  \n-                        <img src=\"storage/uploads/place/${place.place_image}\"  class=\"w-full h-full\" />\n-                    \n-                    </div>\n-                     <div x-show=\"viewo\" class=\"fixed top-0 w-full height-[30vh] bg-white rounded\">\n-                  \n-                        <img src=\"storage/uploads/observation/${place.obsevation_image}\"  class=\"w-full h-full\" />\n-                    \n-                    </div>\n-                </div>\n-\n-\n-             \n-                \n-                \n-                `\n-\n-\n-\n-            );\n-\n-            markerx.on('popupopen', (event) => {\n-                const _id = event.popup._source.placeDetailID;\n-                if (_id && temp_des['_' + _id]) {\n-                    $('body #myTextArea').text(`${temp_des['_'+_id]}`);\n-                }\n-                if (_id && temp_comment['_' + _id]) {\n-                    $('body .feedback').text(`${temp_comment['_'+_id]}`);\n-                }\n-                var typingTimer;\n-                var delay = 1000;\n-\n-                function handleTypingStopped() {\n-                    const data = $('body #myTextArea').val();\n-                    const id = $('body #myTextArea').data('id');\n-\n-                    if (data && id) {\n-                        temp_des['_' + id] = data;\n-                        saveDescription(data, id);\n-                        $('body #myTextArea').blur();\n-                    }\n-                }\n-                $('body #myTextArea').on('input', function() {\n-                    clearTimeout(typingTimer);\n-                    typingTimer = setTimeout(handleTypingStopped, delay);\n-                });\n-\n-\n-\n-            });\n-            markerx.placeDetailID = place.id;\n-            markers[place.id] = markerx;\n-        }\n-\n-        function mylocation() {\n-            getmyposition(success, fail);\n-        }\n-\n-        function activeliked(id, like) {\n-\n-            if (temp_likes.includes(id)) {\n-                like = true;\n-            }\n-            if (temp_dislikes.includes(id)) {\n-                like = false;\n-            }\n-            return {\n-                [`like${id}`]: like,\n-                [`comment${id}`]: false\n-            };\n-        }\n-\n-\n-\n-\n-\n-\n-\n-        function getmyposition(success, fail) {\n-\n-            var is_echo = false;\n-            if (navigator && navigator.geolocation) {\n-                navigator.geolocation.getCurrentPosition(\n-                    function(pos) {\n-\n-                        if (is_echo) {\n-                            return;\n-                        }\n-                        is_echo = true;\n-\n-                        success(pos.coords.latitude, pos.coords.longitude, false);\n-                    },\n-                    function() {\n-                        if (is_echo) {\n-                            return;\n-                        }\n-                        is_echo = true;\n-                        fail();\n-                    }\n-                );\n-            } else {\n-                fail();\n-            }\n-        }\n-\n-        function success(lat, lng, withmarket = true) {\n-            mymap0.flyTo([lat, lng], 19);\n-            if (withmarket) {\n-                L.marker([lat, lng], {\n-                    icon: currentPosIcon\n-                }).addTo(mymap0);\n-            }\n-\n-\n-        }\n-\n-        function fail() {\n-            alert(\"location failed\");\n-        }\n-\n-        function zoom() {\n-            myzoom(success, fail);\n-        }\n-\n-        function myzoom(success, fail) {\n-            var is_echo = false;\n-            if (navigator && navigator.geolocation) {\n-                navigator.geolocation.getCurrentPosition(\n-                    function(pos) {\n-                        if (is_echo) {\n-                            return;\n-                        }\n-                        is_echo = true;\n-                        success(pos.coords.latitude, pos.coords.longitude);\n-                    },\n-                    function() {\n-                        if (is_echo) {\n-                            return;\n-                        }\n-                        is_echo = true;\n-                        fail();\n-                    }\n-                );\n-            } else {\n-                fail();\n-            }\n-        }\n-\n-\n-\n-\n-\n-\n-\n-        $('body').on('click', '.addToMap', function() {\n-            set_empty();\n-\n-\n-        });\n-        $('body').on('click', '.submitData', function() {\n-\n-\n-            $('.subPlacesItems').html('');\n-            $('.subObservationItems').html('');\n-\n-            var place_detail = $(this).closest('.parentDiv').find('.placeActive').data('place');\n-\n-            var observations_detail = [];\n-            $(this).closest('.parentDiv').find('.observationActive').each(function() {\n-                var data = $(this).data('observations');\n-                observations_detail.push(data);\n-            });\n-\n-\n-            var $homeTab = $(this).closest('.parentDiv').find('.observationTabActive').length > 0 ? 'observation' :\n-                'place';\n-            place_data['tab'] = $homeTab;\n-            if ($homeTab == 'place' && place_detail.id) {\n-                place_data['place_id'] = place_detail.id;\n-\n-                if (place_detail.child.length >= 0) {\n-                    $('.placeparent').text(place_detail.name);\n-                    var allHtml = '';\n-                    place_detail.child.forEach(place => {\n-                        allHtml += `\n-                        <div class=\"flex flex-col items-center cursor-pointer\" @click=\"subactive='SPL_${place.id}'\">\n-                                            <div data-subplaceid=\"${place.id}\" class=\"SPL_${place.id} w-[76px] h-[76px] rounded-full bg-[#2d9bf0]\"\n-                                            :class=\"subactive == 'SPL_${place.id}' ? 'border-4 border-[#12CDD4] subplaceActive' : ''\">\n-                                                <div class=\"flex items-center justify-center h-full align-item-center\">\n-                                                    <img src=\"{{ asset('new_img/image.png') }}\" class=\"w-7 h-7\" />\n-                                                </div>\n-                                            </div>\n-                                            <span class=\"mt-4 text-base font-normal text-black\">${place.name}</span>\n-                                        </div>\n-                        `;\n-                    });\n-                    $('.subPlacesItems').html(allHtml);\n-\n-                    $('.subModeltrigerPlace').click();\n-\n-                    if (edited_place && edited_place.place_detail.place_child_id) {\n-                        setTimeout(() => {\n-                            $('.SPL_' + edited_place.place_detail.place_child_id).click();\n-                        }, 200);\n-                    }\n-\n-                } else {\n-                    submitDetailData(place_data);\n-                }\n-\n-\n-            } else if ($homeTab == 'observation') {\n-                var allHtml = '';\n-\n-\n-                observations_detail.forEach(function(observation) {\n-\n-\n-                    allHtml +=\n-                        `<div data-observation_id=\"${observation.id}\"><div class=\"mb-4\">${observation.name}</div>`;\n-\n-\n-\n-                    if (observation.child.length === 0) {\n-                        allHtml += `\n-                            <div data-subobservation_id=\"\" class=\"flex items-center justify-between mb-10\">\n-                               ${getFeelingHTML(observation)}\n-                            </div>\n-                        `;\n-                    } else {\n-                        observation.child.forEach(observ => {\n-                            allHtml += `\n-                            <div data-subobservation_id=\"${observ.id}\" class=\"flex items-center justify-between gap-2 mb-10 lg:gap-20\">\n-                                <div class=\"flex flex-col items-center w-[160px]\">\n-                                    <div class=\"w-[76px] h-[76px] rounded-full bg-[#ffa726]\">\n-                                        <div class=\"flex items-center justify-center h-full align-item-center\">\n-                                            <img src=\"{{ asset('new_img/sad.png') }}\" alt=\"\"\n-                                                            class=\"w-8 h-8 -mr-1\"> <img\n-                                                            src=\"{{ asset('new_img/happy.png') }}\" alt=\"\"\n-                                                            class=\"w-8 h-8 -ml-1\">\n-                                        </div>\n-                                    </div>\n-                                    <span class=\"mt-1 text-base font-normal text-black\">${observ.name}</span>\n-                                </div>\n-\n-                                ${getFeelingHTML(observation,observ)}\n-                            </div>`;\n-                        });\n-                    }\n-\n-                    allHtml += `</div>`;\n-                });\n-\n-                $('.subObservationItems').html(allHtml);\n-\n-\n-\n-                $('.subModeltrigerObservation').click();\n-\n-\n-                setTimeout(() => {\n-                    if (edited_place && edited_place.observations_detail && edited_place.observations_detail\n-                        .length > 0) {\n-                        edited_place.observations_detail.forEach(function(observation) {\n-                            if (observation.observation_child_id) {\n-                                clickClass = 'feel_' + observation.observation_id + '_' +\n-                                    observation.observation_child_id + '_' + observation.feeling_id;\n-                            } else {\n-                                clickClass = 'feel_' + observation.observation_id + '_' +\n-                                    observation.feeling_id;\n-                            }\n-                            $('.' + clickClass).click();\n-                        });\n-                    }\n-                }, 200);\n-\n-            }\n-\n-\n-\n-\n-\n-        });\n-\n-\n-        function getFeelingHTML(observation, child = '') {\n-            return `\n-                                <div x-data=\"{ feelActive${observation.id}: 'feel_${observation.id}_1' }\" class=\"flex flex-wrap items-center justify-center w-full gap-2 italic font-semibold \">\n-                                    @foreach ($feelings as $feeling)\n-                                        <div data-feeling_id=\"{{ $feeling->id }}\"\n-                                            @click=\"feelActive${observation.id}='feel_${observation.id}_{{ $feeling->id }}'\"\n-                                            class=\"feel_${observation.id}${child.id ? '_' + child.id : ''}_{{ $feeling->id }} cursor-pointer rounded-full\"\n-                                            :class=\"feelActive${observation.id} == 'feel_${observation.id}_{{ $feeling->id }}' ? 'border-4 border-[#12CDD4] feelingActive' : ''\"\n-                                            >\n-                                            <img class=\"w-12 h-12 sm:w-16 sm:h-16\" src=\"{{ asset($feeling->image) }}\" alt=\"\">\n-                                        </div>\n-                                    @endforeach\n-                                </div>\n-                    `;\n-        }\n-\n-        var fileInput_place = '';\n-        var fileInput_observation = '';\n-\n-        $('body').on('click', '.submitDataAll', function() {\n-\n-            var $SubTab = $(this).closest('.parentDiv').find('.subobservationTabActive').length > 0 ?\n-                'observation' : 'place';\n-\n-            if ($SubTab == 'place') {\n-                var subplace_id = $(this).closest('.parentDiv').find('.subplaceActive').data('subplaceid');\n-                fileInput_place = $(\".place_image\")[0].files[0];\n-                place_data['place_description'] = $(this).closest('.parentDiv').find('.place_description').val();\n-                place_data['child_place_id'] = subplace_id ? subplace_id : '';\n-\n-\n-\n-            } else if ($SubTab == 'observation') {\n-                fileInput_observation = $(\".observation_image\")[0].files[0];\n-                place_data['observation_description'] = $(this).closest('.parentDiv').find(\n-                    '.observation_description').val();\n-                var dataList = [];\n-                $(this).closest('.parentDiv').find('.feelingActive').each(function() {\n-                    var observationId = $(this).closest('[data-observation_id]').data('observation_id');\n-                    var subobservationId = $(this).closest('[data-subobservation_id]').data(\n-                        'subobservation_id');\n-                    var feelingId = $(this).data('feeling_id');\n-\n-                    dataList.push({\n-                        observation_id: observationId,\n-                        child_observation_id: subobservationId,\n-                        feeling_id: feelingId\n-                    });\n-                });\n-                place_data['observations'] = dataList;\n-\n-            }\n-            // console.log(place_data);\n-            submitDetailData(place_data);\n-\n-        });\n-\n-\n-\n-\n-\n-        $('body').on('click', '.noPlace', function() {\n-\n-            set_empty();\n-\n-\n-            place_data['place_detail_id'] = $(this).data('id');\n-            place_data['update'] = 'place';\n-            $('.openPlaceModel').click();\n-            setTimeout(() => {\n-                var hrefValue = $('.tabNewLink').attr('href');\n-                $('.tabNewLink').attr('href', hrefValue + '/' + $(this).data('id'));\n-            }, 200);\n-        });\n-\n-        $('body').on('click', '.noObservation', function() {\n-\n-            set_empty();\n-\n-            place_data['place_detail_id'] = $(this).data('id');\n-            place_data['update'] = 'observation';\n-\n-            $('.OpenObservationModel').click();\n-            setTimeout(() => {\n-                var hrefValue = $('.tabNewLink').attr('href');\n-                $('.tabNewLink').attr('href', hrefValue + '/' + $(this).data('id'));\n-            }, 200);\n-        });\n-\n-        function set_empty() {\n-            place_data['place_id'] = '';\n-            place_data['place_detail_id'] = '';\n-            place_data['child_place_id'] = '';\n-            place_data['observations'] = '';\n-            place_data['place_description'] = '';\n-            place_data['observation_description'] = '';\n-            place_data['tab'] = 'place';\n-            place_data['update'] = '';\n-        }\n-\n-\n-\n-        var totalswal = 0;\n-\n-        function submitDetailData(place_data) {\n-\n-\n-\n-            place_data['update'] = place_data.tab;\n-\n-            const formData = new FormData();\n-            if (fileInput_place) {\n-                formData.append('place_image', fileInput_place);\n-            }\n-            if (fileInput_observation) {\n-                formData.append('observation_image', fileInput_observation);\n-            }\n-\n-            formData.append('place_data', JSON.stringify(place_data));\n-\n-            $.ajaxSetup({\n-                headers: {\n-                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n-                }\n-            });\n-\n-\n-            $.ajax({\n-                type: 'POST',\n-                url: \"/map/add/place\",\n-                data: formData,\n-                contentType: false,\n-                processData: false,\n-                success: function(data) {\n-                    var reverse_tab = data.tab == 'place' ? 'observation' : 'place';\n-                    if (data.status == 'success') {\n-\n-                        if (totalswal >= 1) {\n-                            window.location.href = '/';\n-                        } else {\n-                            totalswal = totalswal + 1;\n-                            place_data['place_detail_id'] = data.place_detail_id;\n-                            swal({\n-                                title: \"Success!\",\n-                                text: data.tab.charAt(0).toUpperCase() + data.tab.slice(1) + \" \" + data\n-                                    .msg + \" Do you want to add \" + reverse_tab + \" tag?\",\n-                                icon: \"success\",\n-                                buttons: [\"Close\", \"Continue\"],\n-                            }).then((userConfirmed) => {\n-                                if (userConfirmed) {\n-                                    if (reverse_tab == 'place') {\n-                                        $('.openPlaceModel').click();\n-                                    } else {\n-                                        $('.OpenObservationModel').click();\n-                                    }\n-                                } else {\n-                                    window.location.href = '/';\n-                                    // $('.closeAddProcess').click();\n-                                }\n-                            });\n-                        }\n-\n-\n-                    }\n-\n-                }\n-\n-            });\n-\n-        }\n-\n-        function setlike(id, e) {\n-\n-            if ($(e).find('i').hasClass('nolike')) {\n-                temp_likes.push(id);\n-                temp_dislikes = temp_dislikes.filter(function(value, index, arr) {\n-                    return value != id;\n-                });\n-            } else {\n-                temp_likes = temp_likes.filter(function(value, index, arr) {\n-                    return value != id;\n-                });\n-                temp_dislikes.push(id);\n-            }\n-\n-\n-            $.ajaxSetup({\n-                headers: {\n-                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n-                }\n-            });\n-            $.ajax({\n-                url: '/set-like',\n-                type: 'POST',\n-                data: {\n-                    id: id\n-                }\n-            });\n-        }\n-\n-        function saveDescription(data, id) {\n-            $.ajaxSetup({\n-                headers: {\n-                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n-                }\n-            });\n-            $.ajax({\n-                url: '/save-des',\n-                type: 'POST',\n-                data: {\n-                    data: data,\n-                    id: id\n-                }\n-            });\n-        }\n-\n-        function saveComment(e) {\n-            const data = $(e).parent().find('.feedback').val();\n-            const id = $(e).parent().find('.feedback').data('id');\n-\n-            $(e).parent().find('.hideCommentBox').click();\n-\n-            temp_comment['_' + id] = data;\n-\n-            $.ajaxSetup({\n-                headers: {\n-                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n-                }\n-            });\n-            $.ajax({\n-                url: '/save-comment',\n-                type: 'POST',\n-                data: {\n-                    data: data,\n-                    id: id\n-                }\n-            });\n-        }\n-\n-        $(document).ready(function() {\n-\n-            if (edit_id && edit_id != 0) {\n-                $('.openPlaceModel').click();\n-                // $('.OpenObservationModel').click();\n-            }\n-        });\n-    </script>\n-@endsection\n"
                },
                {
                    "date": 1701284335620,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1390,8 +1390,14 @@\n                                 icon: \"success\",\n                                 buttons: [\"Close\", \"Continue\"],\n                             }).then((userConfirmed) => {\n                                 if (userConfirmed) {\n+\n+                                    setTimeout(() => {\n+                                        var hrefValue = $('.tabNewLink').attr('href');\n+                                        $('.tabNewLink').attr('href', hrefValue + '?only=true');\n+                                    }, 200);\n+\n                                     if (reverse_tab == 'place') {\n                                         $('.openPlaceModel').click();\n                                     } else {\n                                         $('.OpenObservationModel').click();\n"
                }
            ],
            "date": 1701283805987,
            "name": "Commit-0",
            "content": "@php\n    $locale = session()->get('locale');\n    if ($locale == null) {\n        $locale = 'en';\n    }\n@endphp\n@extends('layouts.app')\n\n@section('main')\n    <div data-barba=\"container\">\n        <div class=\"flex flex-col mx-auto\">\n            <div class=\"\">\n                <div class=\"relative\">\n\n\n                    @if (backpack_auth()->user()->id)\n                        <div class=\"fixed right-0 z-20 flex items-center justify-center p-4 rounded-full cursor-pointer top-4\"\n                            id=\"openPopup_profile\">\n                            <img class=\"object-cover border-2 rounded-full border-site h-14 w-14\"\n                                src=\"/storage/uploads/avatar/{{ backpack_auth()->user()->avatar }}\" alt=\"\">\n                        </div>\n                    @endif\n\n                    <div onclick=\"mylocation()\"\n                        class=\"fixed z-20 flex items-center justify-center p-4 bg-transparent rounded-full cursor-pointer h-14 w-20 bottom-[6.8rem] left-4\">\n                        <img src=\"{{ asset('img/location.png') }}\" class=\"w-20 h-12\" alt=\"\">\n                    </div>\n                    <a href=\"/filter\"\n                        class=\"fixed z-20 flex items-center justify-center p-1 text-xl bg-white border-2 border-black rounded-full h-14 w-14 bottom-28 right-4\">\n                        <div class=\"\"> <img src=\"{{ asset('img/eye.png') }}\" class=\"w-8 h-6\" alt=\"\"></div>\n                    </a>\n\n                    <div class=\"flex justify-center items-center\">\n                        <span class=\"fixed z-[30] top-10 mr-20 text-center\">\n                            Explore the map to view the activities of other users.\n                        </span>\n                    </div>\n\n\n                    <div id=\"map\" class=\"absolute w-[100vw] z-10 h-[90vh]\"></div>\n                </div>\n\n                <div x-data=\"{ modelOpen: false, showMore: false, hidetab: 'no', tab: 'place', searchQuery: '' }\">\n                    <div\n                        class=\"fixed bottom-0 z-50 w-full pt-3 pb-8 text-xl font-semibold text-center shadow-xl rounded-t-3xl bg-gray-50 \">\n\n                        <div class=\"flex items-center justify-center\">\n                            <div class=\"py-0.5 w-14 mb-3 rounded-full px-4 bg-black\">\n\n                            </div>\n\n                        </div>\n\n\n                        <div class=\"flex\">\n                            <div class=\"absolute left-16 bottom-[18px] \">\n                                <div class=\"pl-4 py-3 pr-2.5 bg-[#ffa726] border-2 border-white rounded-full h-14 w-14\">\n                                    <span class=\"w-10 h-14\"><img src=\"{{ asset('img/search.png') }}\" class=\"w-9 h-7\"\n                                            alt=\"\"></span>\n                                </div>\n\n                            </div>\n                            <div class=\"absolute left-6 bottom-[18px] \">\n                                <div class=\"p-3 border-2 border-white rounded-full bg-site h-14 w-14\">\n                                    <img src=\"{{ asset('new_img/image.png') }}\" class=\"w-7 h-7\" alt=\"\">\n                                </div>\n\n                            </div>\n                        </div>\n\n                        <div class=\"w-full pt-4 addToMap\" @click=\"tab ='place'; modelOpen =true; searchQuery=''\">\n                            <span\n                                class=\"border-2 border-site w-full px-12 py-4 text-white bg-[#2d9bf0] rounded-3xl cursor-pointer\">\n                                Add to Pin\n                            </span>\n\n                        </div>\n\n\n                        <div class=\"absolute right-5 bottom-[25px] \">\n                            <div class=\"p-1 rounded-full bg-site w-9\">\n                                <span class=\"italic font-bold text-white\">\n                                    i\n                                </span>\n                            </div>\n                        </div>\n\n                    </div>\n\n\n                    <div class=\"parentDiv\" x-data=\"{ height: 'auto' }\">f\n                        <button class=\"hidden OpenObservationModel\"\n                            @click=\"modelOpen=true; showMore = true; hidetab = 'place'; tab='observation'; height = '100vh';\"></button>\n                        <button class=\"hidden openPlaceModel\"\n                            @click=\"modelOpen=true; showMore = true; hidetab = 'observation'; tab='place'; height = '100vh';\"></button>\n\n                        <div x-cloak x-show=\"modelOpen \" class=\"fixed bottom-0 z-50 overflow-y-auto\"\n                            aria-labelledby=\"modal-title\" role=\"dialog\" aria-modal=\"true\">\n                            <div class=\"flex items-end justify-center text-center\">\n                                <div x-cloak @click=\"modelOpen = false; hidetab = 'no'\" x-show=\"modelOpen\"\n                                    class=\"fixed inset-0 transition-opacity bg-gray-500 closeAddProcess bg-opacity-40\"\n                                    aria-hidden=\"true\">\n                                </div>\n\n                                <div x-cloak x-show=\"modelOpen\"\n                                    x-transition:enter=\"transition ease-out duration-300 transform\"\n                                    x-transition:enter-start=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n                                    x-transition:enter-end=\"opacity-100 translate-y-0 sm:scale-100\" {{-- x-transition:leave=\"transition ease-in duration-200 transform\" --}}\n                                    class=\"transition-height z-50 w-screen pb-16 transition-all transform bg-white h-[50%] shadow-xl mt-60 rounded-t-3xl\"\n                                    :style=\"'height: ' + height\" :class=\"{ 'overflow-auto': showMore }\">\n\n                                    <div class=\"p-6 lg:p-12\">\n\n                                        @if ($edit_id)\n                                            <a href=\"/\" class=\"block mb-4 closeAddProcess\" class=\"mb-4\">\n                                                <img src=\"{{ asset('img/icons/arrow.png') }}\" class=\"arrow\">\n                                            </a>\n                                        @else\n                                            <div class=\"mb-4 closeAddProcess\"\n                                                @click=\"modelOpen=false; showMore = false; hidetab = 'no'; height = 'auto';\"\n                                                x-show=\"showMore\" class=\"mb-4\">\n                                                <img src=\"{{ asset('img/icons/arrow.png') }}\" class=\"arrow\">\n                                            </div>\n                                        @endif\n\n\n\n\n\n                                        <div class=\"flex items-center gap-4 justity-between\">\n                                            <input type=\"text\" class=\"w-full px-2 py-2 bg-white rounded-full\"\n                                                placeholder=\"Choose tags or add new city layers\" name=\"searchInput\"\n                                                x-model=\"searchQuery\" @keyup=\"showMore = true; height = '100vh'\">\n\n                                            <a :href=\"tab === 'place' ?\n                                                '/add-new/place{{ $edit_id ? '/' . urlencode($edit_id) : '' }}' :\n                                                '/add-new/observation{{ $edit_id ? '/' . urlencode($edit_id) : '' }}'\"\n                                                class=\"p-2 transition-all border-2 rounded-full tabNewLink\"\n                                                :class=\"tab == 'place' ? 'bg-[#2d9bf0] border-[#2d9bf0]' :\n                                                    'bg-[#ffa726] border-[#ffa726]'\">\n                                                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\"\n                                                    stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-6 h-6 text-white\">\n                                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\"\n                                                        d=\"M12 6v12m6-6H6\" />\n                                                </svg>\n                                            </a>\n\n                                        </div>\n\n                                        <div class=\"mt-2\">\n                                            Drop a pin to share observations, opinions and ideas.\n                                        </div>\n\n\n\n\n\n                                        <div class=\"flex items-center justify-center mt-12 homeTabs\">\n                                            <div class=\"-mr-1 cursor-pointer\" x-show=\"hidetab!='place'\"\n                                                @click=\"tab='place'\">\n                                                <div class=\"flex flex-col w-[84px] justify-center items-center\">\n                                                    <div class=\"bg-[#2d9bf0] border-2 border-white rounded-full \"\n                                                        :class=\"tab == 'place' || tab == 'place1' ?\n                                                            'bg-[#2d9bf0] z-10 p-[26px] placeTabActive' :\n                                                            'bg-[#2d9bf0]/70 p-[40px]'\">\n                                                        <img src=\"{{ asset('new_img/image.png') }}\" class=\"w-7 h-7\"\n                                                            :class=\"tab == 'place' || tab == 'place1' ? 'block' : 'hidden'\"\n                                                            id=\"place\" alt=\"\">\n                                                    </div>\n                                                    <div class=\"text-sm font-semibold text-center\"\n                                                        :class=\"tab == 'place' ? 'text-black' : 'text-black/50'\">\n                                                        Browse Places\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <div class=\"-ml-1 cursor-pointer\" x-show=\"hidetab!='observation'\"\n                                                @click=\"tab='observation'\">\n                                                <div class=\"flex flex-col w-[75px] justify-center items-center\">\n\n                                                    <div class=\"flex items-center justify-center border-2 border-white rounded-full \"\n                                                        :class=\"tab == 'observation' || tab == 'observation1' ?\n                                                            'bg-[#ffa726] z-10 p-[20px] observationTabActive' :\n                                                            'bg-[#ffa726]/70 p-[40px]'\">\n                                                        <div class=\"flex items-center justify-center w-10 h-10 text-2xl\"\n                                                            :class=\"tab == 'observation' || tab == 'observation1' ? 'block' :\n                                                                'hidden'\"\n                                                            id=\"observation\" alt=\"\">🔍</div>\n                                                    </div>\n\n                                                    <div class=\"text-sm font-semibold text-center \"\n                                                        :class=\"tab == 'observation' ? 'text-black' : 'text-black/50'\">\n                                                        Browse Observation\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n\n                                        <div x-data=\"{ active: '{{ isset($edited_place->placeDetail->place_id) ? 'PL_' . $edited_place->placeDetail->place_id : '' }}' }\">\n\n                                            <div class=\"flex items-start justify-center gap-10 mt-6 mb-6 italic font-semibold all-places\"\n                                                x-show=\"tab=='place'\">\n\n                                                <div class=\"grid grid-cols-3 gap-10 italic font-semibold\"\n                                                    id=\"searchResults2Pls\">\n\n\n                                                    @foreach ($allPlaces as $key => $place)\n                                                        <div x-show=\"(showMore || {{ $key }} < 2) && (searchQuery === '' || '{{ strtolower($place->name) }}'.includes(searchQuery.toLowerCase()))\"\n                                                            class=\"flex flex-col items-center cursor-pointer\"\n                                                            @click=\"active='PL_{{ $place->id }}'\">\n                                                            <div data-place=\"{{ json_encode(['id' => $place->id, 'name' => $place->name, 'child' => $place->subplaces]) }}\"\n                                                                class=\"w-[76px] h-[76px] rounded-full bg-[#2d9bf0]\"\n                                                                :class=\"active == 'PL_{{ $place->id }}' ?\n                                                                    'border-4 border-[#12CDD4] placeActive' : ''\">\n                                                                <div\n                                                                    class=\"flex items-center justify-center h-full align-item-center\">\n                                                                    <img src=\"{{ asset('new_img/image.png') }}\"\n                                                                        class=\"w-7 h-7\" />\n                                                                </div>\n                                                            </div>\n                                                            <span\n                                                                class=\"mt-4 font-normal text-black\">{{ $place->name }}</span>\n                                                        </div>\n                                                    @endforeach\n\n                                                    <div x-show=\"!showMore\" class=\"cursor-pointer\">\n                                                        <button @click=\"showMore = true; height = '100vh'\">\n                                                            <div class=\"rounded-full border-site border-4 p-[22px]\">\n                                                                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\"\n                                                                    viewBox=\"0 0 24 24\" stroke-width=\"3\"\n                                                                    stroke=\"currentColor\"\n                                                                    class=\"w-6 h-6 font-bold color-site\">\n                                                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\"\n                                                                        d=\"M12 6v12m6-6H6\" />\n                                                                </svg>\n                                                            </div>\n                                                            <div class=\"mt-4 font-normal text-black\">See more</div>\n                                                        </button>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div class=\"\" x-data=\"{ active: '' }\">\n                                            <div class=\"flex items-center justify-center gap-10 mt-6 mb-6 italic font-semibold\"\n                                                x-show=\"tab=='observation'\">\n                                                <div class=\"grid grid-cols-3 gap-10 italic font-semibold\"\n                                                    id=\"searchResults2Obs\">\n\n                                                    @foreach ($allObservations as $key => $observation)\n                                                        <div x-data=\"{ active: '{{ $edited_place && $edited_place->observationsDetail->contains('observation_id', $observation->id) ? 'OB_' . $observation->id : '' }}' }\"\n                                                            x-show=\"(showMore || {{ $key }} < 2) && (searchQuery === '' || '{{ strtolower($observation->name) }}'.includes(searchQuery.toLowerCase()))\"\n                                                            class=\"flex flex-col items-center cursor-pointer\"\n                                                            @click=\"active = !active ? 'OB_{{ $observation->id }}' : false\">\n\n                                                            <div data-observations=\"{{ json_encode(['id' => $observation->id, 'name' => $observation->name, 'child' => $observation->subobservs]) }}\"\n                                                                class=\"w-[76px] h-[76px] rounded-full bg-[#ffa726]\"\n                                                                :class=\"active == 'OB_{{ $observation->id }}' ?\n                                                                    'border-4 border-[#12CDD4] observationActive' : ''\">\n                                                                <div\n                                                                    class=\"flex items-center justify-center h-full align-item-center\">\n                                                                    <img src=\"{{ asset('new_img/sad.png') }}\"\n                                                                        alt=\"\" class=\"w-8 h-8 -mr-1\">\n                                                                    <img src=\"{{ asset('new_img/happy.png') }}\"\n                                                                        alt=\"\" class=\"w-8 h-8 -ml-1\">\n                                                                </div>\n                                                            </div>\n                                                            <span\n                                                                class=\"mt-4 font-normal text-black\">{{ $observation->name }}</span>\n                                                        </div>\n                                                    @endforeach\n\n\n\n                                                    <div x-show=\"!showMore\"\n                                                        class=\"flex flex-col items-center justify-center cursor-pointer\">\n                                                        <button @click=\"showMore = true; height = '100vh'\" type=\"button\">\n                                                            <div class=\"rounded-full border-[#ffa726] border-4  p-[22px]\">\n                                                                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\"\n                                                                    viewBox=\"0 0 24 24\" stroke-width=\"3\"\n                                                                    stroke=\"currentColor\"\n                                                                    class=\"w-6 h-6 font-bold text-[#ffa726]\">\n                                                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\"\n                                                                        d=\"M12 6v12m6-6H6\" />\n                                                                </svg>\n\n                                                            </div>\n                                                            <div class=\"mt-4 font-normal text-black\">See more</div>\n                                                        </button>\n\n                                                    </div>\n\n                                                </div>\n\n\n\n                                            </div>\n                                        </div>\n\n\n                                    </div>\n\n                                </div>\n                            </div>\n                        </div>\n                        <div x-cloak x-show=\"modelOpen\" class=\"fixed bottom-0 z-50 w-full py-4 bg-white\">\n                            <div class=\"flex items-center justify-center\">\n                                <div\n                                    class=\"submitData border-2 border-site flex cursor-pointer items-center justify-center gap-2 px-8 py-3 text-lg font-extrabold text-white bg-[#2d9bf0] rounded-3xl hover:shadow  hover:bg-[#268ede] transition-all\">\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\"\n                                        stroke-width=\"3\" stroke=\"currentColor\" class=\"w-6 h-6\">\n                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\"\n                                            d=\"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                                    </svg>\n                                    Add new\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n\n\n\n\n\n\n\n                </div>\n\n\n                <div class=\"parentDiv\" x-data=\"{ subModelOpen: false, subtab: '' }\" x-cloak x-show=\"subModelOpen\">\n\n                    <button class=\"hidden subModeltrigerPlace\" @click=\"subModelOpen=true;subtab='place'\"></button>\n\n                    <button class=\"hidden subModeltrigerObservation\"\n                        @click=\"subModelOpen=true;subtab='observation'\"></button>\n\n\n                    <div x-data=\"{ subactive: '{{ isset($edited_place->placeDetail->place_child_id) ? 'SPL_' . $edited_place->placeDetail->place_child_id : '' }}' }\"\n                        class=\"fixed h-screen overflow-auto bottom-0 bg-white z-[60] w-full pb-8 text-xl font-semibold text-center shadow-xl\">\n\n                        <div class=\"p-6 lg:p-12\">\n\n                            <div @click=\"subModelOpen=false;subactive='';subtab=''\"\n                                class=\"mb-4 OpenObservationModel openPlaceModel\">\n                                <img src=\"{{ asset('img/icons/arrow.png') }}\" class=\"arrow\">\n                            </div>\n\n\n                            <div class=\"flex items-center justify-center mt-12 homeTabs\">\n                                <div class=\"-mr-1 cursor-pointer\" x-show=\"subtab=='place'\">\n                                    <div class=\"flex flex-col w-[84px] justify-center items-center\">\n                                        <div class=\"bg-[#2d9bf0] border-2 border-white rounded-full\"\n                                            :class=\"subtab == 'place' ?\n                                                'bg-[#2d9bf0] z-10 p-[26px] subplaceTabActive' :\n                                                'bg-[#2d9bf0]/70 p-[40px]'\">\n                                            <img src=\"{{ asset('new_img/image.png') }}\" class=\"w-7 h-7\"\n                                                :class=\"subtab == 'place' ? 'block' : 'hidden'\" alt=\"\">\n                                        </div>\n\n                                    </div>\n                                </div>\n                                <div class=\"-ml-1 cursor-pointer\" x-show=\"subtab=='observation'\">\n                                    <div class=\"flex flex-col w-[75px] justify-center items-center\">\n\n                                        <div class=\"flex items-center justify-center border-2 border-white rounded-full\"\n                                            :class=\"subtab == 'observation' ?\n                                                'bg-[#ffa726] z-10 p-[20px] subobservationTabActive' :\n                                                'bg-[#ffa726]/70 p-[40px]'\">\n                                            <div class=\"flex items-center justify-center w-10 h-10 text-2xl\"\n                                                :class=\"subtab == 'observation' ? 'block' :\n                                                    'hidden'\">\n                                                <div class=\"flex items-center justify-center h-full align-item-center\">\n                                                    <img src=\"{{ asset('new_img/sad.png') }}\" alt=\"\"\n                                                        class=\"w-8 h-8 -mr-1\"> <img\n                                                        src=\"{{ asset('new_img/happy.png') }}\" alt=\"\"\n                                                        class=\"w-8 h-8 -ml-1\">\n                                                </div>\n                                            </div>\n                                        </div>\n\n\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div>\n                                <div x-show=\"subtab=='place'\" class=\"flex flex-col items-center justify-center mt-12\">\n                                    <div class=\"mb-10 placeparent\"></div>\n\n                                    <div class=\"grid grid-cols-3 gap-10 italic font-semibold subPlacesItems\">\n\n                                    </div>\n                                    <div class=\"mt-4 text-center font-normal\">\n                                        Tap \"submit\" to pin this place to the map and share it with other users.\n                                        Provide more details by adding a description, and uploading a photo.\n\n                                    </div>\n                                    <div class=\"flex items-center justify-between w-2/3 pb-12 pb-16 pt-28\">\n                                        <label class=\"flex flex-col items-center gap-1 cursor-pointer\" for=\"image-upload\">\n                                            <input id=\"image-upload\" type=\"file\" class=\"hidden place_image\"\n                                                accept=\".jpg, .png\">\n                                            <img src=\"{{ asset('img/cam-2.PNG') }}\" alt=\"\" class=\"w-10 h-9\">\n                                            <div class=\"text-sm\">Upload image</div>\n                                        </label>\n\n                                        <div class=\"relative\" x-data=\"{ placeText: false }\">\n                                            <div @click=\"placeText = !placeText\"\n                                                class=\"flex flex-col items-center gap-1 cursor-pointer\">\n                                                <img src=\"{{ asset('img/msg.PNG') }}\" alt=\"\" class=\"w-10 h-9\">\n                                                <div class=\"text-sm\">Add description</div>\n                                            </div>\n                                            <textarea class=\"font-normal place_description absolute px-2 py-2 bg-white rounded-xl w-[300px] right-0\"\n                                                x-show=\"placeText\">{{ $edited_place && $edited_place->place_description ? $edited_place->place_description : '' }}</textarea>\n                                        </div>\n\n                                    </div>\n                                </div>\n\n                                <div x-show=\"subtab=='observation'\" class=\"flex flex-col items-center justify-center\">\n                                    <div class=\"grid gap-10 mt-12 italic font-semibold grid-cols subObservationItems\">\n\n\n\n\n                                    </div>\n\n\n\n                                    <div class=\"mt-4 text-center font-normal\">\n                                        Tap \"submit\" to pin this observation to the map and share it with other users.\n                                        Provide more details through rating, adding a description, and uploading a photo.\n\n                                    </div>\n\n\n                                    <div class=\"flex items-center justify-between w-2/3 pt-20 pb-16 mb-12\">\n                                        <label for=\"obser-image-upload\"\n                                            class=\"flex flex-col items-center gap-1 cursor-pointer\">\n                                            <input id=\"obser-image-upload\" type=\"file\"\n                                                class=\"hidden observation_image\" accept=\".jpg, .png\">\n                                            <img src=\"{{ asset('img/cam.PNG') }}\" alt=\"\" class=\"w-10 h-9\">\n                                            <div class=\"text-sm\">Upload image</div>\n                                        </label>\n\n\n\n                                        <div class=\"relative\" x-data=\"{ observationText: false }\">\n                                            <div @click=\"observationText = !observationText\"\n                                                class=\"flex flex-col items-center gap-1 cursor-pointer\">\n                                                <img src=\"{{ asset('img/msg-2.PNG') }}\" alt=\"\" class=\"w-10 h-9\">\n                                                <div class=\"text-sm\">Add description</div>\n                                            </div>\n                                            <textarea class=\"font-normal observation_description absolute px-2 py-2 bg-white rounded-xl w-[300px] right-0\"\n                                                x-show=\"observationText\">{{ $edited_place && $edited_place->obsevation_description ? $edited_place->obsevation_description : '' }}</textarea>\n                                        </div>\n\n                                    </div>\n\n                                </div>\n                            </div>\n\n\n                        </div>\n\n                    </div>\n\n\n                    <div class=\"fixed w-full bottom-0 z-[60] bg-white py-4\">\n                        <div class=\"flex items-center justify-center gap-6\">\n                            <div @click=\"subModelOpen=false;\"\n                                class=\"flex items-center justify-center gap-2 px-8 py-3 text-lg font-extrabold transition-all bg-white border-2 cursor-pointer border-site color-site rounded-3xl\">\n                                Close\n                            </div>\n\n                            <div\n                                class=\"submitDataAll flex cursor-pointer items-center border-2 border-site justify-center gap-2 px-8 py-3 text-lg font-extrabold text-white bg-[#2d9bf0] rounded-3xl  hover:bg-[#268ede] transition-all\">\n                                Submit\n                            </div>\n\n                        </div>\n                    </div>\n\n\n                </div>\n\n\n            </div>\n        </div>\n    </div>\n\n\n    <div id=\"popup_profile\"\n        class=\"p-6 lg:p-12 w-full h-screen lg:w-4/12 fixed bg-white shadow-md ml-[-2px] overflow-y-auto right-0 hidden z-50 transform translate-x-full transition-transform duration-300\">\n        <a onclick=\"close_pop_profile()\">\n            <img src=\"{{ asset('img/icons/arrow.png') }}\" class=\"arrow\">\n\n        </a>\n        <div class=\"p-4\">\n\n            <div class=\"top\">\n                <div class=\"topo\">\n\n                    <label for=\"image\" class=\"cursor-pointer new\">\n                        <img class=\"object-cover w-24 h-24 border-blue-500 rounded-full border-7 nimage mimage\"\n                            src=\"/storage/uploads/avatar/{{ backpack_auth()->user()->avatar }}\" alt=\"\">\n\n                    </label>\n                </div>\n                <div class=\"tops\">\n                    <div class=\"toptaxt\">Hello \"{{ backpack_auth()->user()->name }}\"!</div>\n                    <a href=\"/profile\" class=\"vieprofile\">View Profile</a>\n                </div>\n\n\n            </div>\n            <br />\n            <br />\n            <div class=\"list\">\n                <a href=\"/\" class=\"lbox\">\n                    <div\n                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n                        +</div>\n                    <div class=\"ltax\">Add to map</div>\n                </a>\n                <a href=\"/dashboard\" class=\"lbox\">\n                    <div\n                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n                        ▄</div>\n                    <div class=\"ltax\">Dashboard</div>\n                </a>\n                <a href=\"/community-achievements\" class=\"lbox\">\n                    <div\n                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n                        ⌃</div>\n                    <div class=\"ltax\">Community achievements</div>\n                </a>\n                <a href=\"/about-us\" class=\"lbox\">\n                    <div\n                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n                        ?</div>\n                    <div class=\"ltax\">About City Layers</div>\n                </a>\n                <a href=\"/contact-us\" class=\"lbox\">\n                    <div\n                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n                        •</div>\n\n                    <div class=\"ltax\">Term & contact</div>\n                </a>\n                <a href=\"/privacy-policy\" class=\"lbox\">\n                    <div\n                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n                        !</div>\n\n                    <div class=\"ltax\">Privacy Policy and Terms of Service</div>\n                </a>\n                <a href=\"/impressum-accessibility\" class=\"lbox\">\n                    <div\n                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n                        i</div>\n                    <div class=\"ltax\">Impressum & accessibility</div>\n                </a>\n                <a href=\"/admin/logout\" class=\"lbox\">\n                    <div\n                        class=\"flex justify-center items-center w-7 h-7 border-[3px] font-bold text-base border-black rounded-full text-center\">\n                        i</div>\n                    <div class=\"ltax\">Sign out</div>\n                </a>\n            </div>\n            <br />\n            <div class=\"belo\">\n                <div class=\"mapping\">Maps are public and visible to all users. Your username will be shown along with your\n                    pins and added layers.</div>\n                <div class=\"cursor-pointer closebt\" onclick=\"close_pop_profile()\">Close</div>\n            </div>\n        </div>\n    </div>\n\n    <script>\n        const openPopupButton = document.getElementById('openPopup_profile');\n        const popup = document.getElementById('popup_profile');\n\n        openPopupButton.addEventListener('click', () => {\n            popup.style.transform = 'translateX(0)';\n            popup.style.display = 'block';\n        });\n\n        function close_pop_profile() {\n\n\n            popup.style.transform = 'translateX(100%)';\n            setTimeout(() => {\n                popup.style.display = 'none';\n            }, 300);\n        }\n    </script>\n\n\n    <script>\n        data = {!! json_encode($all_data) !!};\n\n        userid = {!! json_encode($userid) !!};\n\n        markers = {};\n        const edit_id = {{ $edit_id ? $edit_id : '0' }};\n        let marker = null;\n\n        let pin = [48.6890, 7.14086];\n        if (data && data[0] && typeof data[0].latitude !== 'undefined' && typeof data[0].longitude !== 'undefined') {\n            pin = [data[0].latitude, data[0].longitude];\n        }\n        let mymap0 = L.map('map').setView(pin, 6);\n\n        // https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png\n\n        osmLayer0 = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {\n            subdomains: 'abcd',\n            minZoom: 0,\n            maxZoom: 19,\n            ext: 'png'\n        }).addTo(mymap0);\n        mymap0.zoomControl.remove();\n        mymap0.addLayer(osmLayer0);\n        mymap0.touchZoom.enable();\n        mymap0.scrollWheelZoom.enable();\n\n        let place_data = {\n            place_id: '',\n            child_place_id: '',\n            observations: '',\n            place_description: '',\n            observation_description: '',\n            latitude: '',\n            longitude: '',\n            tab: 'place',\n        };\n\n\n        var temp_des = [];\n        var temp_comment = [];\n        var temp_likes = [];\n        var temp_dislikes = [];\n\n\n        var currentPosIcon = L.icon({\n            iconUrl: '/new_img/current-pos.svg', // Replace with the path to your icon image\n            iconSize: [62, 62], // Adjust the icon size as needed\n            iconAnchor: [16, 16], // Adjust the anchor point of the icon\n            popupAnchor: [0, -16] // Adjust the popup anchor for the icon\n        });\n        var currentPosIcon = L.divIcon({\n            className: 'transparent-icon',\n            iconSize: [64, 64], // Adjust the size of the icon including the border\n            iconAnchor: [32, 32], // Adjust the anchor point of the icon\n            html: '<div class=\"border-2 rounded-full border-site\"><img src=\"/new_img/current-pos.svg\" /></div>'\n        });\n\n\n        var placeIcon = L.divIcon({\n            className: 'transparent-icon',\n            html: `<div class=\"rounded-full bg-[#2d9bf0] border-2 border-white flex justify-center items-center p-4 w-[64px] h-[64px]\">\n                    <img src=\"{{ asset('new_img/image.png') }}\" class=\"w-full h-full\" />\n                </div>`\n        });\n        var bothIcon = L.divIcon({\n            className: 'transparent-icon',\n            html: `<div class=\"rounded-full bg-[#2d9bf0] border-2 border-white flex justify-center items-center w-[64px] h-[64px]\">\n                        <div class=\"flex items-center justify-center h-full align-item-center\">\n                            <img src=\"{{ asset('new_img/sad.png') }}\" alt=\"\" class=\"w-6 h-6 -mr-2\">\n                            <img src=\"{{ asset('new_img/image.png') }}\" class=\"z-20 w-6 h-6\" />\n                            <img src=\"{{ asset('new_img/happy.png') }}\" alt=\"\" class=\"w-6 h-6 -ml-2\">\n                        </div>\n                </div>`\n        });\n        var observationIcon = L.divIcon({\n            className: 'transparent-icon',\n            html: `<div class=\"rounded-full bg-[#ffa726] border-2 border-white flex justify-center items-center p-4 w-[64px] h-[64px]\">\n                    <div class=\"flex\">\n                     <img src=\"{{ asset('new_img/sad.png') }}\" alt=\"\" class=\"-mr-1 w-7 h-7\">\n                     <img src=\"{{ asset('new_img/happy.png') }}\" alt=\"\" class=\"-ml-1 w-7 h-7\">\n                    </div>\n                 </div>`\n        });\n\n\n\n        if (navigator.geolocation) {\n\n            //wait 3 seconds to get position\n            getposition(success, fail)\n\n        } else {\n            alert(\"Geolocation is not supported by this browser.\");\n        }\n\n\n        function getposition(success, fail) {\n\n            var is_echo = false;\n            if (navigator && navigator.geolocation) {\n                navigator.geolocation.getCurrentPosition(\n                    function(pos) {\n                        if (is_echo) {\n                            return;\n                        }\n                        is_echo = true;\n\n                        place_data['latitude'] = pos.coords.latitude;\n                        place_data['longitude'] = pos.coords.longitude;\n\n                        success(pos.coords.latitude, pos.coords.longitude);\n                    },\n                    function() {\n                        if (is_echo) {\n                            return;\n                        }\n                        is_echo = true;\n                        fail();\n                    }\n                );\n            } else {\n                fail();\n            }\n\n        }\n\n\n\n\n        function success(lat, lng) {\n            mymap0.setView([lat, lng], 10);\n\n            L.marker([lat, lng], {\n                icon: currentPosIcon\n            }).addTo(mymap0);\n        }\n\n        function fail() {\n            alert(\"location failed\");\n        }\n\n\n\n        function generateObservationHTML(observationDetail, place) {\n            var obsrName = '';\n            var addicon = '';\n            if (observationDetail.observation.name) {\n                obsrName = (observationDetail.observation ? observationDetail.observation.name : '') +\n                    (observationDetail.observation && observationDetail.observation_child ?\n                        '<span class=\"text-xs font-light\"> → ' + observationDetail.observation_child.name + '</span>' : '');\n            } else {\n                obsrName = 'No Observation';\n                if (place.user_id == userid) {\n                    addicon = `\n                    <div data-id=\"${place.id}\" class=\"cursor-pointer border-2 transition-all rounded-full bg-[#2d9bf0] border-white w-6 h-6 mt-1 noObservation\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"text-white\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 6v12m6-6H6\"></path>\n                        </svg>\n                    </div>\n                    `;\n                }\n            }\n\n\n            return `\n            <div class=\"flex items-center justify-start gap-3 -mb-4 overflow-hidden\">\n                <div class=\"flex flex-col items-center justify-center\">\n                    <div class=\"rounded-full bg-[#ffa726] border-4 border-white w-[68px] h-[68px]\">\n                        <img src=\"${observationDetail.feeling.image}\" alt=\"\">\n                    </div>\n                </div>\n                <div class=\"flex gap-4 mt-4\">\n                    <div class=\"text-center\">\n                        <img src=\"{{ asset('img/cam.PNG') }}\" alt=\"\" class=\"h-6 w-7\">\n                        <div @click=\"viewo=!viewo\" class=\"font-light text-white font-sm\">view</div>\n                    </div>\n                    <span class=\"text-lg italic font-extrabold text-white whitespace-nowrap ` + (observationDetail\n                .observation.id ? 'w-screen' : '') + `\">` + obsrName + `</span>\n                    ` + addicon + `\n                </div>\n            </div>\n            `;\n        }\n\n        let count = 0;\n        const likedPlaces = {!! json_encode($likedPlaces) !!};\n\n        const edited_place = {!! json_encode($edited_place) !!};\n\n\n        for (let i = 0; i < data.length; i++) {\n\n            count = count + 1;\n            place = data[i];\n\n\n\n            placename = 'No Place';\n\n            var addicon = '';\n\n            if (place.user_id == userid) {\n                addicon = `\n                    <div data-id=\"${place.id}\" class=\"cursor-pointer border-2 transition-all rounded-full bg-[#2d9bf0] border-white w-6 h-6 mt-1 noPlace\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"text-white\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 6v12m6-6H6\"></path>\n                        </svg>\n                    </div>\n                    `;\n            }\n\n            if (place.place_detail) {\n\n                placename = (place.place_detail.place ? place.place_detail.place.name : '') +\n                    (place.place_detail.place && place.place_detail.place_child ? '<span class=\"text-xs font-light\"> → ' +\n                        place.place_detail.place_child.name + '</span>' : '');\n\n\n                addicon = '';\n            }\n\n\n            const isUserOwner = place.user_id === userid;\n            const userdescription = place.description !== null ? place.description : '';\n            // const comment = place.place_comment.comment !== null ? place.place_comment.comment : '';\n            const comment = place.place_comment?.comment || '';\n\n\n            var textarea = `\n            <div class=\"flex flex-col items-end w-full mt-4 mb-6\">\n                <div class=\"px-3 py-2 h-[60px] border-0 focus:outline-none focus:border-0 focus:ring-0 bg-[#2d9bf0] border-0 italic text-white placeholder-white leading-2 text-sm w-10/12\">\n                ${userdescription}\n                </div>\n            </div>\n            `;\n\n            if (isUserOwner) {\n                textarea = `\n                <div class=\"flex flex-col items-end w-full mt-4 mb-6\">\n                <textarea type=\"text\" data-id=\"${place.id}\" id=\"myTextArea\" class=\"h-[60px] border-0 focus:outline-none focus:border-0 focus:ring-0 bg-[#2d9bf0] border-0 italic text-white placeholder-white leading-2 text-sm w-10/12\" placeholder=\"Place for a comment max 120 characters\">${userdescription}</textarea>\n                </div>\n            `;\n            }\n\n\n\n\n            username = place.user.name;\n\n\n\n\n            const givenDate = new Date(place.created_at); // Replace with your given date\n            const options = {\n                year: 'numeric',\n                month: '2-digit',\n                day: '2-digit'\n            };\n            const formattedDate = givenDate.toLocaleDateString('en-US', options);\n            // pics = place.image0;\n            placelatitude = place.latitude;\n            placelongitude = place.longitude;\n            var obsrvTotal = Object.keys(place.observations_detail).length;\n\n\n            if ((place.place_detail) && obsrvTotal == 0) {\n                icon2 = placeIcon;\n            }\n            if ((place.place_detail) && obsrvTotal > 0) {\n                icon2 = bothIcon;\n            }\n            if ((place.place_detail) == null && obsrvTotal > 0) {\n                icon2 = observationIcon;\n            }\n\n\n\n\n            var observationsList = '';\n\n            if (obsrvTotal > 0) {\n                place.observations_detail.forEach(observationDetail => {\n                    observationsList += generateObservationHTML(observationDetail);\n                }, '');\n            } else {\n                observationsList += generateObservationHTML({\n                    observation: 'null',\n                    observation_child: null,\n\n                    feeling: {\n                        image: ''\n                    }\n                }, place);\n            }\n\n            var like = false;\n            if (likedPlaces.includes(place.id)) {\n                like = true;\n            }\n\n\n            markerx = L.marker([placelatitude, placelongitude], {\n                icon: icon2\n            }).addTo(mymap0).bindPopup(\n\n\n                `<div class=\"bg-[#2d9bf0] p-0 w-full\" x-data=\"{ viewp: false,viewo: false }\">\n\n                    <div class=\"flex items-center justify-start gap-3 -mb-4 overflow-hidden\">\n                        <div class=\"flex flex-col items-center justify-center\">\n                            <div class=\"rounded-full bg-[#2d9bf0] border-4 border-white p-3 w-[68px] h-[68px]\">\n                                <img class=\"w-full h-full\" src=\"{{ asset('new_img/image.png') }}\" />\n                            </div>\n                        </div>\n                        <div class=\"flex gap-4 mt-4\">\n                            <div class=\"text-center\">\n                                <img src=\"{{ asset('img/cam-2.PNG') }}\" alt=\"\" class=\"h-6 w-7\">\n                                <div @click=\"viewp=!viewp\" class=\"font-light text-white font-sm\">view</div>\n                            </div>\n                            <span class=\"text-lg italic font-extrabold text-white\">\n                            ` + placename + `\n                            </span>\n                            ` + addicon + `\n\n\n                        </div>\n                    </div>\n\n                    ` + observationsList + `\n\n                    ` + textarea + `\n\n\n\n                    <div x-data=\"activeliked(${place.id},${like})\" class=\"absolute bottom-[-5px] w-full left-0 px-[10px]\">\n                        <div class=\"flex items-center justify-between italic font-light text-white\">\n                            <div class=\"flex items-center w-2/5 gap-10 likecomment\">\n                                <div @click=\"comment${place.id}=!comment${place.id}\" class=\"cursor-pointer\"><img src=\"{{ asset('img/msg.PNG') }}\" class=\"h-9 mt-[8px]\"></div>\n\n                                <div onclick=\"setlike(${place.id},this)\" @click=\"like${place.id}=!like${place.id}\" class=\"cursor-pointer bg-[#0078d9] text-center text px-2 rounded\">\n                                    <i class=\"fa fa-heart\"\n                                    :class=\"like${place.id} ? 'fa-heart text-[#ffc543] liked' : 'fa-heart-o nolike'\"\n                                    ></i></div>\n                            </div>\n                            <div class=\"w-3/5\">Added by ` + username + ` on ` + formattedDate +\n                `</div>\n                        </div>\n\n                        <div class=\"absolute left-0 w-full\" x-show=\"comment${place.id}\">\n                            <textarea type=\"text\" data-id=\"${place.id}\" class=\"feedback w-full rounded-xl h-[60px] focus:outline-none focus:border-0 focus:ring-0 bg-[#2d9bf0] border-0 italic text-white placeholder-white leading-2 text-sm w-10/12\" placeholder=\"Put your feedback\">` +\n                comment + `</textarea>\n                            <button onclick=\"saveComment(this)\" class=\"font-bold border-2 border-site px-2 py-1 text-white bg-[#2d9bf0] rounded-3xl cursor-pointer float-right\">Save</button>\n                            <div @click=\"comment${place.id}=false\" class=\"hideCommentBox\"></div>\n                        </div>\n                    </div>\n\n                    <div x-show=\"viewp\" class=\"fixed top-0 w-full height-[30vh] bg-white rounded\">\n                  \n                        <img src=\"storage/uploads/place/${place.place_image}\"  class=\"w-full h-full\" />\n                    \n                    </div>\n                     <div x-show=\"viewo\" class=\"fixed top-0 w-full height-[30vh] bg-white rounded\">\n                  \n                        <img src=\"storage/uploads/observation/${place.obsevation_image}\"  class=\"w-full h-full\" />\n                    \n                    </div>\n                </div>\n\n\n             \n                \n                \n                `\n\n\n\n            );\n\n            markerx.on('popupopen', (event) => {\n                const _id = event.popup._source.placeDetailID;\n                if (_id && temp_des['_' + _id]) {\n                    $('body #myTextArea').text(`${temp_des['_'+_id]}`);\n                }\n                if (_id && temp_comment['_' + _id]) {\n                    $('body .feedback').text(`${temp_comment['_'+_id]}`);\n                }\n                var typingTimer;\n                var delay = 1000;\n\n                function handleTypingStopped() {\n                    const data = $('body #myTextArea').val();\n                    const id = $('body #myTextArea').data('id');\n\n                    if (data && id) {\n                        temp_des['_' + id] = data;\n                        saveDescription(data, id);\n                        $('body #myTextArea').blur();\n                    }\n                }\n                $('body #myTextArea').on('input', function() {\n                    clearTimeout(typingTimer);\n                    typingTimer = setTimeout(handleTypingStopped, delay);\n                });\n\n\n\n            });\n            markerx.placeDetailID = place.id;\n            markers[place.id] = markerx;\n        }\n\n        function mylocation() {\n            getmyposition(success, fail);\n        }\n\n        function activeliked(id, like) {\n\n            if (temp_likes.includes(id)) {\n                like = true;\n            }\n            if (temp_dislikes.includes(id)) {\n                like = false;\n            }\n            return {\n                [`like${id}`]: like,\n                [`comment${id}`]: false\n            };\n        }\n\n\n\n\n\n\n\n        function getmyposition(success, fail) {\n\n            var is_echo = false;\n            if (navigator && navigator.geolocation) {\n                navigator.geolocation.getCurrentPosition(\n                    function(pos) {\n\n                        if (is_echo) {\n                            return;\n                        }\n                        is_echo = true;\n\n                        success(pos.coords.latitude, pos.coords.longitude, false);\n                    },\n                    function() {\n                        if (is_echo) {\n                            return;\n                        }\n                        is_echo = true;\n                        fail();\n                    }\n                );\n            } else {\n                fail();\n            }\n        }\n\n        function success(lat, lng, withmarket = true) {\n            mymap0.flyTo([lat, lng], 19);\n            if (withmarket) {\n                L.marker([lat, lng], {\n                    icon: currentPosIcon\n                }).addTo(mymap0);\n            }\n\n\n        }\n\n        function fail() {\n            alert(\"location failed\");\n        }\n\n        function zoom() {\n            myzoom(success, fail);\n        }\n\n        function myzoom(success, fail) {\n            var is_echo = false;\n            if (navigator && navigator.geolocation) {\n                navigator.geolocation.getCurrentPosition(\n                    function(pos) {\n                        if (is_echo) {\n                            return;\n                        }\n                        is_echo = true;\n                        success(pos.coords.latitude, pos.coords.longitude);\n                    },\n                    function() {\n                        if (is_echo) {\n                            return;\n                        }\n                        is_echo = true;\n                        fail();\n                    }\n                );\n            } else {\n                fail();\n            }\n        }\n\n\n\n\n\n\n\n        $('body').on('click', '.addToMap', function() {\n            set_empty();\n\n\n        });\n        $('body').on('click', '.submitData', function() {\n\n\n            $('.subPlacesItems').html('');\n            $('.subObservationItems').html('');\n\n            var place_detail = $(this).closest('.parentDiv').find('.placeActive').data('place');\n\n            var observations_detail = [];\n            $(this).closest('.parentDiv').find('.observationActive').each(function() {\n                var data = $(this).data('observations');\n                observations_detail.push(data);\n            });\n\n\n            var $homeTab = $(this).closest('.parentDiv').find('.observationTabActive').length > 0 ? 'observation' :\n                'place';\n            place_data['tab'] = $homeTab;\n            if ($homeTab == 'place' && place_detail.id) {\n                place_data['place_id'] = place_detail.id;\n\n                if (place_detail.child.length >= 0) {\n                    $('.placeparent').text(place_detail.name);\n                    var allHtml = '';\n                    place_detail.child.forEach(place => {\n                        allHtml += `\n                        <div class=\"flex flex-col items-center cursor-pointer\" @click=\"subactive='SPL_${place.id}'\">\n                                            <div data-subplaceid=\"${place.id}\" class=\"SPL_${place.id} w-[76px] h-[76px] rounded-full bg-[#2d9bf0]\"\n                                            :class=\"subactive == 'SPL_${place.id}' ? 'border-4 border-[#12CDD4] subplaceActive' : ''\">\n                                                <div class=\"flex items-center justify-center h-full align-item-center\">\n                                                    <img src=\"{{ asset('new_img/image.png') }}\" class=\"w-7 h-7\" />\n                                                </div>\n                                            </div>\n                                            <span class=\"mt-4 text-base font-normal text-black\">${place.name}</span>\n                                        </div>\n                        `;\n                    });\n                    $('.subPlacesItems').html(allHtml);\n\n                    $('.subModeltrigerPlace').click();\n\n                    if (edited_place && edited_place.place_detail.place_child_id) {\n                        setTimeout(() => {\n                            $('.SPL_' + edited_place.place_detail.place_child_id).click();\n                        }, 200);\n                    }\n\n                } else {\n                    submitDetailData(place_data);\n                }\n\n\n            } else if ($homeTab == 'observation') {\n                var allHtml = '';\n\n\n                observations_detail.forEach(function(observation) {\n\n\n                    allHtml +=\n                        `<div data-observation_id=\"${observation.id}\"><div class=\"mb-4\">${observation.name}</div>`;\n\n\n\n                    if (observation.child.length === 0) {\n                        allHtml += `\n                            <div data-subobservation_id=\"\" class=\"flex items-center justify-between mb-10\">\n                               ${getFeelingHTML(observation)}\n                            </div>\n                        `;\n                    } else {\n                        observation.child.forEach(observ => {\n                            allHtml += `\n                            <div data-subobservation_id=\"${observ.id}\" class=\"flex items-center justify-between gap-2 mb-10 lg:gap-20\">\n                                <div class=\"flex flex-col items-center w-[160px]\">\n                                    <div class=\"w-[76px] h-[76px] rounded-full bg-[#ffa726]\">\n                                        <div class=\"flex items-center justify-center h-full align-item-center\">\n                                            <img src=\"{{ asset('new_img/sad.png') }}\" alt=\"\"\n                                                            class=\"w-8 h-8 -mr-1\"> <img\n                                                            src=\"{{ asset('new_img/happy.png') }}\" alt=\"\"\n                                                            class=\"w-8 h-8 -ml-1\">\n                                        </div>\n                                    </div>\n                                    <span class=\"mt-1 text-base font-normal text-black\">${observ.name}</span>\n                                </div>\n\n                                ${getFeelingHTML(observation,observ)}\n                            </div>`;\n                        });\n                    }\n\n                    allHtml += `</div>`;\n                });\n\n                $('.subObservationItems').html(allHtml);\n\n\n\n                $('.subModeltrigerObservation').click();\n\n\n                setTimeout(() => {\n                    if (edited_place && edited_place.observations_detail && edited_place.observations_detail\n                        .length > 0) {\n                        edited_place.observations_detail.forEach(function(observation) {\n                            if (observation.observation_child_id) {\n                                clickClass = 'feel_' + observation.observation_id + '_' +\n                                    observation.observation_child_id + '_' + observation.feeling_id;\n                            } else {\n                                clickClass = 'feel_' + observation.observation_id + '_' +\n                                    observation.feeling_id;\n                            }\n                            $('.' + clickClass).click();\n                        });\n                    }\n                }, 200);\n\n            }\n\n\n\n\n\n        });\n\n\n        function getFeelingHTML(observation, child = '') {\n            return `\n                                <div x-data=\"{ feelActive${observation.id}: 'feel_${observation.id}_1' }\" class=\"flex flex-wrap items-center justify-center w-full gap-2 italic font-semibold \">\n                                    @foreach ($feelings as $feeling)\n                                        <div data-feeling_id=\"{{ $feeling->id }}\"\n                                            @click=\"feelActive${observation.id}='feel_${observation.id}_{{ $feeling->id }}'\"\n                                            class=\"feel_${observation.id}${child.id ? '_' + child.id : ''}_{{ $feeling->id }} cursor-pointer rounded-full\"\n                                            :class=\"feelActive${observation.id} == 'feel_${observation.id}_{{ $feeling->id }}' ? 'border-4 border-[#12CDD4] feelingActive' : ''\"\n                                            >\n                                            <img class=\"w-12 h-12 sm:w-16 sm:h-16\" src=\"{{ asset($feeling->image) }}\" alt=\"\">\n                                        </div>\n                                    @endforeach\n                                </div>\n                    `;\n        }\n\n        var fileInput_place = '';\n        var fileInput_observation = '';\n\n        $('body').on('click', '.submitDataAll', function() {\n\n            var $SubTab = $(this).closest('.parentDiv').find('.subobservationTabActive').length > 0 ?\n                'observation' : 'place';\n\n            if ($SubTab == 'place') {\n                var subplace_id = $(this).closest('.parentDiv').find('.subplaceActive').data('subplaceid');\n                fileInput_place = $(\".place_image\")[0].files[0];\n                place_data['place_description'] = $(this).closest('.parentDiv').find('.place_description').val();\n                place_data['child_place_id'] = subplace_id ? subplace_id : '';\n\n\n\n            } else if ($SubTab == 'observation') {\n                fileInput_observation = $(\".observation_image\")[0].files[0];\n                place_data['observation_description'] = $(this).closest('.parentDiv').find(\n                    '.observation_description').val();\n                var dataList = [];\n                $(this).closest('.parentDiv').find('.feelingActive').each(function() {\n                    var observationId = $(this).closest('[data-observation_id]').data('observation_id');\n                    var subobservationId = $(this).closest('[data-subobservation_id]').data(\n                        'subobservation_id');\n                    var feelingId = $(this).data('feeling_id');\n\n                    dataList.push({\n                        observation_id: observationId,\n                        child_observation_id: subobservationId,\n                        feeling_id: feelingId\n                    });\n                });\n                place_data['observations'] = dataList;\n\n            }\n            // console.log(place_data);\n            submitDetailData(place_data);\n\n        });\n\n\n\n\n\n        $('body').on('click', '.noPlace', function() {\n\n            set_empty();\n\n\n            place_data['place_detail_id'] = $(this).data('id');\n            place_data['update'] = 'place';\n            $('.openPlaceModel').click();\n            setTimeout(() => {\n                var hrefValue = $('.tabNewLink').attr('href');\n                $('.tabNewLink').attr('href', hrefValue + '/' + $(this).data('id'));\n            }, 200);\n        });\n\n        $('body').on('click', '.noObservation', function() {\n\n            set_empty();\n\n            place_data['place_detail_id'] = $(this).data('id');\n            place_data['update'] = 'observation';\n\n            $('.OpenObservationModel').click();\n            setTimeout(() => {\n                var hrefValue = $('.tabNewLink').attr('href');\n                $('.tabNewLink').attr('href', hrefValue + '/' + $(this).data('id'));\n            }, 200);\n        });\n\n        function set_empty() {\n            place_data['place_id'] = '';\n            place_data['place_detail_id'] = '';\n            place_data['child_place_id'] = '';\n            place_data['observations'] = '';\n            place_data['place_description'] = '';\n            place_data['observation_description'] = '';\n            place_data['tab'] = 'place';\n            place_data['update'] = '';\n        }\n\n\n\n        var totalswal = 0;\n\n        function submitDetailData(place_data) {\n\n\n\n            place_data['update'] = place_data.tab;\n\n            const formData = new FormData();\n            if (fileInput_place) {\n                formData.append('place_image', fileInput_place);\n            }\n            if (fileInput_observation) {\n                formData.append('observation_image', fileInput_observation);\n            }\n\n            formData.append('place_data', JSON.stringify(place_data));\n\n            $.ajaxSetup({\n                headers: {\n                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n                }\n            });\n\n\n            $.ajax({\n                type: 'POST',\n                url: \"/map/add/place\",\n                data: formData,\n                contentType: false,\n                processData: false,\n                success: function(data) {\n                    var reverse_tab = data.tab == 'place' ? 'observation' : 'place';\n                    if (data.status == 'success') {\n\n                        if (totalswal >= 1) {\n                            window.location.href = '/';\n                        } else {\n                            totalswal = totalswal + 1;\n                            place_data['place_detail_id'] = data.place_detail_id;\n                            swal({\n                                title: \"Success!\",\n                                text: data.tab.charAt(0).toUpperCase() + data.tab.slice(1) + \" \" + data\n                                    .msg + \" Do you want to add \" + reverse_tab + \" tag?\",\n                                icon: \"success\",\n                                buttons: [\"Close\", \"Continue\"],\n                            }).then((userConfirmed) => {\n                                if (userConfirmed) {\n                                    if (reverse_tab == 'place') {\n                                        $('.openPlaceModel').click();\n                                    } else {\n                                        $('.OpenObservationModel').click();\n                                    }\n                                } else {\n                                    window.location.href = '/';\n                                    // $('.closeAddProcess').click();\n                                }\n                            });\n                        }\n\n\n                    }\n\n                }\n\n            });\n\n        }\n\n        function setlike(id, e) {\n\n            if ($(e).find('i').hasClass('nolike')) {\n                temp_likes.push(id);\n                temp_dislikes = temp_dislikes.filter(function(value, index, arr) {\n                    return value != id;\n                });\n            } else {\n                temp_likes = temp_likes.filter(function(value, index, arr) {\n                    return value != id;\n                });\n                temp_dislikes.push(id);\n            }\n\n\n            $.ajaxSetup({\n                headers: {\n                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n                }\n            });\n            $.ajax({\n                url: '/set-like',\n                type: 'POST',\n                data: {\n                    id: id\n                }\n            });\n        }\n\n        function saveDescription(data, id) {\n            $.ajaxSetup({\n                headers: {\n                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n                }\n            });\n            $.ajax({\n                url: '/save-des',\n                type: 'POST',\n                data: {\n                    data: data,\n                    id: id\n                }\n            });\n        }\n\n        function saveComment(e) {\n            const data = $(e).parent().find('.feedback').val();\n            const id = $(e).parent().find('.feedback').data('id');\n\n            $(e).parent().find('.hideCommentBox').click();\n\n            temp_comment['_' + id] = data;\n\n            $.ajaxSetup({\n                headers: {\n                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n                }\n            });\n            $.ajax({\n                url: '/save-comment',\n                type: 'POST',\n                data: {\n                    data: data,\n                    id: id\n                }\n            });\n        }\n\n        $(document).ready(function() {\n\n            if (edit_id && edit_id != 0) {\n                $('.openPlaceModel').click();\n                // $('.OpenObservationModel').click();\n            }\n        });\n    </script>\n@endsection\n"
        }
    ]
}